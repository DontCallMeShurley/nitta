<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE AllowAmbiguousTypes #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DuplicateRecordFields #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-4"></span><span>
</span><span id="line-5"></span><span class="hs-comment">{- |
Module      : NITTA.Intermediate.Functions
Description : Library of functions
Copyright   : (c) Aleksandr Penskoi, 2019
License     : BSD3
Maintainer  : aleksandr.penskoi@gmail.com
Stability   : experimental

Library of functions for an intermediate algorithm representation. Execution
relations between functions and process units are many-to-many.

[@function (functional block)@] atomic operation in intermediate algorithm
representation. Function has zero or many inputs and zero or many output.
Function can contains state between process cycles.
-}</span><span>
</span><span id="line-20"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">NITTA.Intermediate.Functions</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Arithmetics</span></span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier">Add</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#add"><span class="hs-identifier">add</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier">Division</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#division"><span class="hs-identifier">division</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier">Multiply</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#multiply"><span class="hs-identifier">multiply</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftLR"><span class="hs-identifier">ShiftLR</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#shiftL"><span class="hs-identifier">shiftL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#shiftR"><span class="hs-identifier">shiftR</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier">Sub</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#sub"><span class="hs-identifier">sub</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier">Neg</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#neg"><span class="hs-identifier">neg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>    </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.Accum.html"><span class="hs-identifier">NITTA.Intermediate.Functions.Accum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Memory</span></span><span>
</span><span id="line-38"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier">Constant</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#constant"><span class="hs-identifier">constant</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#isConst"><span class="hs-identifier">isConst</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier">Loop</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#loop"><span class="hs-identifier">loop</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#isLoop"><span class="hs-identifier">isLoop</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopEnd"><span class="hs-identifier">LoopEnd</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopBegin"><span class="hs-identifier">LoopBegin</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier">Buffer</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#buffer"><span class="hs-identifier">buffer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>
</span><span id="line-49"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Input/Output</span></span><span>
</span><span id="line-50"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier">Receive</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#receive"><span class="hs-identifier">receive</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier">Send</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#send"><span class="hs-identifier">send</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Internal</span></span><span>
</span><span id="line-56"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier">BrokenBuffer</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-57"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#brokenBuffer"><span class="hs-identifier">brokenBuffer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bits</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">B</span></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Default</span></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashMap.Strict</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">HM</span></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">elems</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">fromList</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">union</span></span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Typeable</span></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.Accum.html"><span class="hs-identifier">NITTA.Intermediate.Functions.Accum</span></a></span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html"><span class="hs-identifier">NITTA.Intermediate.Types</span></a></span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="NITTA.Utils.Base.html"><span class="hs-identifier">NITTA.Utils.Base</span></a></span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span class="hs-comment">{- | Loop -- function for transfer data between computational cycles.
Let see the simple example with the following implementation of the
Fibonacci algorithm.

Data flow graph:

@
    +---------------------------------+
    |                                 |
    v                                 |
+------+                          b2  |
| Loop |      b1_1  +-----+    +------+
+------+----+------&gt;|     |    |
            | a1    | sum +----+
+------+-----------&gt;|     |
| Loop |    |       +-----+      b1_2
+------+    +-------------------------+
    ^                                 |
    |                                 |
    +---------------------------------+
@

Lua source code:

@
function fib(a1, b1)
    b2 = a1 + b1
    fib(b1, b2)
end
fib(0, 1)
@

Data flow defines computation for a single computational cycle. But
a controller should repeat the algorithm infinite times, and
usually, it is required to transfer data between cycles. `Loop`
allows doing that. At first cycle, `Loop` function produces an
initial value (`X x`), after that on each cycle `Loop` produces a
variable value from the previous cycle, and consumes a new value at
the end of the cycle.

Computational process:

@
         ][                 Cycle 1                 ][                Cycle 2                  ]
         ][                                         ][                                         ]
initial  ][ ---+                          b2   +--- ][ ---+                          b2   +--- ]
 value   ][ op |      b1_1  +-----+    +------&gt;| Lo ][ op |      b1_1  +-----+    +------&gt;| Lo ]
 is a    ][ ---+----+------&gt;|     |    |       +--- ][ ---+----+------&gt;|     |    |       +--- ]
part of  ][         |       | sum +----+            ][         |       | sum +----+            ]
software ][ ---+-----------&gt;|     |            +--- ][ ---+-----------&gt;|     |            +--- ]
         ][ op |    |       +-----+     b1_2   | Lo ][ op |    |       +-----+      b1_2  | Lo ]
         ][ ---+    +-------------------------&gt;+--- ][ ---+    +-------------------------&gt;+--- ]
         ][                                         ][                                         ]
@

Similation data:

+--------------+----+----+----+
| Cycle number | a1 | b1 | b2 |
+==============+====+====+====+
| 1            | 0  | 1  | 1  |
+--------------+----+----+----+
| 2            | 1  | 1  | 2  |
+--------------+----+----+----+
| 3            | 1  | 2  | 3  |
+--------------+----+----+----+
| 4            | 2  | 3  | 5  |
+--------------+----+----+----+

In practice, Loop function supported by Fram processor unit in the
following way: Loop function should be prepared before execution by
automatical refactor @BreakLoop@, which replace Loop by @LoopEnd@
and @LoopBegin@.
-}</span><span>
</span><span id="line-143"></span><span class="hs-keyword">data</span><span> </span><span id="Loop"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-var">Loop</span></a></span></span><span> </span><span id="local-6989586621680150967"><span class="annot"><a href="#local-6989586621680150967"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621680150968"><span class="annot"><a href="#local-6989586621680150968"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Loop"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-var">Loop</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#X"><span class="hs-identifier hs-type">X</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150968"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150967"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150967"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680150335"><span id="local-6989586621680150343"><span class="annot"><span class="annottext">Loop v x -&gt; Loop v x -&gt; Bool
(Loop v x -&gt; Loop v x -&gt; Bool)
-&gt; (Loop v x -&gt; Loop v x -&gt; Bool) -&gt; Eq (Loop v x)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall v x. (Eq x, Eq v) =&gt; Loop v x -&gt; Loop v x -&gt; Bool
/= :: Loop v x -&gt; Loop v x -&gt; Bool
$c/= :: forall v x. (Eq x, Eq v) =&gt; Loop v x -&gt; Loop v x -&gt; Bool
== :: Loop v x -&gt; Loop v x -&gt; Bool
$c== :: forall v x. (Eq x, Eq v) =&gt; Loop v x -&gt; Loop v x -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span id="local-6989586621680150963"><span id="local-6989586621680150964"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680150329"><span id="local-6989586621680150332"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150964"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621680150963"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150964"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150963"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680150325"><span class="annot"><span class="annottext">show :: Loop v x -&gt; String
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Loop v x -&gt; String
forall a. Label a =&gt; a -&gt; String
</span><a href="NITTA.Intermediate.Types.html#label"><span class="hs-keyword hs-var">label</span></a></span></span></span><span>
</span><span id="line-146"></span><span id="local-6989586621680150960"><span id="local-6989586621680150961"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150961"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621680150960"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150961"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150960"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-147"></span><span>    </span><span id="local-6989586621680150306"><span class="annot"><span class="annottext">label :: Loop v x -&gt; String
</span><a href="#local-6989586621680150306"><span class="hs-keyword hs-var hs-var hs-var hs-var">label</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#X"><span class="hs-identifier hs-type">X</span></a></span><span> </span><span id="local-6989586621680150304"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680150304"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680150303"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680150303"><span class="hs-identifier hs-var">os</span></a></span></span><span> </span><span id="local-6989586621680150302"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680150302"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-148"></span><span>        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;loop(&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680150304"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680150302"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;) = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">O v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680150303"><span class="hs-identifier hs-var">os</span></a></span></span></span><span>
</span><span id="line-149"></span><span id="local-6989586621680150945"><span id="local-6989586621680150946"><span class="annot"><a href="NITTA.Intermediate.Functions.html#loop"><span class="hs-identifier hs-type">loop</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150946"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Value.html#Val"><span class="hs-identifier hs-type">Val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150945"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680150945"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680150946"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680150946"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#F"><span class="hs-identifier hs-type">F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150946"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150945"><span class="hs-identifier hs-type">x</span></a></span></span></span><span>
</span><span id="line-150"></span><span id="loop"><span class="annot"><span class="annottext">loop :: forall v x. (Var v, Val x) =&gt; x -&gt; v -&gt; [v] -&gt; F v x
</span><a href="NITTA.Intermediate.Functions.html#loop"><span class="hs-identifier hs-var hs-var">loop</span></a></span></span><span> </span><span id="local-6989586621680150268"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680150268"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680150267"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680150267"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680150266"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680150266"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Loop v x -&gt; F v x
forall {f} {v} {x}.
(Function f v, Patch f (v, v), Locks f v, Show f, Label f,
 FunctionSimulation f v x, Typeable f, Eq f) =&gt;
f -&gt; F v x
</span><a href="NITTA.Intermediate.Types.html#packF"><span class="hs-identifier hs-var">packF</span></a></span><span> </span><span class="annot"><span class="annottext">(Loop v x -&gt; F v x) -&gt; Loop v x -&gt; F v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">X x -&gt; O v -&gt; I v -&gt; Loop v x
forall v x. X x -&gt; O v -&gt; I v -&gt; Loop v x
</span><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-var">Loop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x -&gt; X x
forall x. x -&gt; X x
</span><a href="NITTA.Intermediate.Types.html#X"><span class="hs-identifier hs-var">X</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680150268"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set v -&gt; O v
forall v. Set v -&gt; O v
</span><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-var">O</span></a></span><span> </span><span class="annot"><span class="annottext">(Set v -&gt; O v) -&gt; Set v -&gt; O v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Set v
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680150266"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(I v -&gt; Loop v x) -&gt; I v -&gt; Loop v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">v -&gt; I v
forall v. v -&gt; I v
</span><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-var">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680150267"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-151"></span><span id="isLoop"><span class="annot"><span class="annottext">isLoop :: F v x -&gt; Bool
</span><a href="NITTA.Intermediate.Functions.html#isLoop"><span class="hs-identifier hs-var hs-var">isLoop</span></a></span></span><span> </span><span id="local-6989586621680150257"><span class="annot"><span class="annottext">F v x
</span><a href="#local-6989586621680150257"><span class="hs-identifier hs-var">f</span></a></span></span><span>
</span><span id="line-152"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F v x -&gt; Maybe (Loop v x)
forall (f :: * -&gt; * -&gt; *) v x.
(Typeable f, Typeable v, Typeable x) =&gt;
F v x -&gt; Maybe (f v x)
</span><a href="NITTA.Intermediate.Types.html#castF"><span class="hs-identifier hs-var">castF</span></a></span><span> </span><span class="annot"><span class="annottext">F v x
</span><a href="#local-6989586621680150257"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-153"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span id="local-6989586621680150926"><span id="local-6989586621680150927"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150927"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150926"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150927"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-156"></span><span>    </span><span id="local-6989586621680150251"><span class="annot"><span class="annottext">isInternalLockPossible :: Loop v x -&gt; Bool
</span><a href="NITTA.Intermediate.Types.html#isInternalLockPossible"><span class="hs-identifier hs-var hs-var hs-var hs-var">isInternalLockPossible</span></a></span></span><span> </span><span class="annot"><span class="annottext">Loop v x
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-157"></span><span>    </span><span id="local-6989586621680150247"><span class="annot"><span class="annottext">inputs :: Loop v x -&gt; Set v
</span><a href="NITTA.Intermediate.Types.html#inputs"><span class="hs-identifier hs-var hs-var hs-var hs-var">inputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span> </span><span class="annot"><span class="annottext">X x
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680150245"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680150245"><span class="hs-identifier hs-var">_a</span></a></span></span><span> </span><span id="local-6989586621680150244"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680150244"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680150244"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-158"></span><span>    </span><span id="local-6989586621680150240"><span class="annot"><span class="annottext">outputs :: Loop v x -&gt; Set v
</span><a href="NITTA.Intermediate.Types.html#outputs"><span class="hs-identifier hs-var hs-var hs-var hs-var">outputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span> </span><span class="annot"><span class="annottext">X x
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680150238"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680150238"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680150237"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680150237"><span class="hs-identifier hs-var">_b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680150238"><span class="hs-identifier hs-var">a</span></a></span></span></span><span>
</span><span id="line-159"></span><span id="local-6989586621680150928"><span id="local-6989586621680150929"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150929"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150929"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150928"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680150929"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680150929"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-160"></span><span>    </span><span id="local-6989586621680150227"><span class="annot"><span class="annottext">patch :: (v, v) -&gt; Loop v x -&gt; Loop v x
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var hs-var hs-var hs-var">patch</span></a></span></span><span> </span><span id="local-6989586621680150225"><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680150225"><span class="hs-identifier hs-var">diff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span> </span><span id="local-6989586621680150224"><span class="annot"><span class="annottext">X x
</span><a href="#local-6989586621680150224"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680150223"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680150223"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680150222"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680150222"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">X x -&gt; O v -&gt; I v -&gt; Loop v x
forall v x. X x -&gt; O v -&gt; I v -&gt; Loop v x
</span><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-var">Loop</span></a></span><span> </span><span class="annot"><span class="annottext">X x
</span><a href="#local-6989586621680150224"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; O v -&gt; O v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680150225"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680150223"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680150225"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680150222"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-161"></span><span id="local-6989586621680150930"><span id="local-6989586621680150931"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150931"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Locks"><span class="hs-identifier hs-type">Locks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150931"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150930"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150931"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-162"></span><span>    </span><span id="local-6989586621680150216"><span class="annot"><span class="annottext">locks :: Loop v x -&gt; [Lock v]
</span><a href="NITTA.Intermediate.Types.html#locks"><span class="hs-identifier hs-var hs-var hs-var hs-var">locks</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span> </span><span class="annot"><span class="annottext">X x
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span id="local-6989586621680150214"><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680150214"><span class="hs-keyword hs-var">as</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span id="local-6989586621680150213"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680150213"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Lock :: forall v. v -&gt; v -&gt; Lock v
</span><a href="NITTA.Intermediate.Types.html#Lock"><span class="hs-identifier hs-type">Lock</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">locked :: v
</span><a href="#local-6989586621680150211"><span class="hs-identifier hs-var">locked</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680150213"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lockBy :: v
</span><a href="#local-6989586621680150210"><span class="hs-identifier hs-var">lockBy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680150209"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680150209"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680150209"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; [v]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680150214"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-163"></span><span id="local-6989586621680150932"><span id="local-6989586621680150933"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150933"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#FunctionSimulation"><span class="hs-identifier hs-type">FunctionSimulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150933"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150932"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150933"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150932"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-164"></span><span>    </span><span id="local-6989586621680150199"><span class="annot"><span class="annottext">simulate :: CycleCntx v x -&gt; Loop v x -&gt; [(v, x)]
</span><a href="NITTA.Intermediate.Types.html#simulate"><span class="hs-identifier hs-var hs-var hs-var hs-var">simulate</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#CycleCntx"><span class="hs-identifier hs-type">CycleCntx</span></a></span><span class="hs-special">{</span><span id="local-6989586621680150196"><span class="annot"><span class="annottext">HashMap v x
cycleCntx :: forall v x. CycleCntx v x -&gt; HashMap v x
cycleCntx :: HashMap v x
</span><a href="NITTA.Intermediate.Types.html#cycleCntx"><span class="hs-identifier hs-var hs-var">cycleCntx</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#X"><span class="hs-identifier hs-type">X</span></a></span><span> </span><span id="local-6989586621680150194"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680150194"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span id="local-6989586621680150193"><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680150193"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-165"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; v
forall {c}. Set c -&gt; c
</span><a href="NITTA.Utils.Base.html#oneOf"><span class="hs-identifier hs-var">oneOf</span></a></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680150193"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">v -&gt; HashMap v x -&gt; Maybe x
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-operator hs-var">`HM.lookup`</span></span><span> </span><span class="annot"><span class="annottext">HashMap v x
</span><a href="#local-6989586621680150196"><span class="hs-identifier hs-var">cycleCntx</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-166"></span><span>            </span><span class="hs-comment">-- if output variables are defined - nothing to do (values thrown on upper level)</span><span>
</span><span id="line-167"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">x
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-168"></span><span>            </span><span class="hs-comment">-- if output variables are not defined - set initial value</span><span>
</span><span id="line-169"></span><span>            </span><span class="annot"><span class="annottext">Maybe x
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680150190"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680150194"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680150190"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680150190"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; [v]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680150193"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-170"></span><span>
</span><span id="line-171"></span><span class="hs-keyword">data</span><span> </span><span id="LoopBegin"><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopBegin"><span class="hs-identifier hs-var">LoopBegin</span></a></span></span><span> </span><span id="local-6989586621680150872"><span class="annot"><a href="#local-6989586621680150872"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621680150873"><span class="annot"><a href="#local-6989586621680150873"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="LoopBegin"><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopBegin"><span class="hs-identifier hs-var">LoopBegin</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150872"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150873"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150872"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680150183"><span id="local-6989586621680150187"><span class="annot"><span class="annottext">LoopBegin v x -&gt; LoopBegin v x -&gt; Bool
(LoopBegin v x -&gt; LoopBegin v x -&gt; Bool)
-&gt; (LoopBegin v x -&gt; LoopBegin v x -&gt; Bool) -&gt; Eq (LoopBegin v x)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall v x. (Eq x, Eq v) =&gt; LoopBegin v x -&gt; LoopBegin v x -&gt; Bool
/= :: LoopBegin v x -&gt; LoopBegin v x -&gt; Bool
$c/= :: forall v x. (Eq x, Eq v) =&gt; LoopBegin v x -&gt; LoopBegin v x -&gt; Bool
== :: LoopBegin v x -&gt; LoopBegin v x -&gt; Bool
$c== :: forall v x. (Eq x, Eq v) =&gt; LoopBegin v x -&gt; LoopBegin v x -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-172"></span><span id="local-6989586621680150870"><span id="local-6989586621680150871"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680150178"><span id="local-6989586621680150181"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150871"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621680150870"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopBegin"><span class="hs-identifier hs-type">LoopBegin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150871"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150870"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680150175"><span class="annot"><span class="annottext">show :: LoopBegin v x -&gt; String
</span><a href="#local-6989586621680150175"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LoopBegin v x -&gt; String
forall a. Label a =&gt; a -&gt; String
</span><a href="NITTA.Intermediate.Types.html#label"><span class="hs-keyword hs-var">label</span></a></span></span></span><span>
</span><span id="line-173"></span><span id="local-6989586621680150868"><span id="local-6989586621680150869"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150869"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopBegin"><span class="hs-identifier hs-type">LoopBegin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150869"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150868"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-174"></span><span>    </span><span id="local-6989586621680150169"><span class="annot"><span class="annottext">label :: LoopBegin v x -&gt; String
</span><a href="#local-6989586621680150169"><span class="hs-keyword hs-var hs-var hs-var hs-var">label</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopBegin"><span class="hs-identifier hs-type">LoopBegin</span></a></span><span> </span><span class="annot"><span class="annottext">Loop v x
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680150168"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680150168"><span class="hs-identifier hs-var">os</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;LoopBegin() = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">O v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680150168"><span class="hs-identifier hs-var">os</span></a></span></span></span><span>
</span><span id="line-175"></span><span id="local-6989586621680150864"><span id="local-6989586621680150865"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680150166"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150865"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopBegin"><span class="hs-identifier hs-type">LoopBegin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150865"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150864"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150865"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-176"></span><span>    </span><span id="local-6989586621680150162"><span class="annot"><span class="annottext">outputs :: LoopBegin v x -&gt; Set v
</span><a href="#local-6989586621680150162"><span class="hs-identifier hs-var hs-var hs-var hs-var">outputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopBegin"><span class="hs-identifier hs-type">LoopBegin</span></a></span><span> </span><span class="annot"><span class="annottext">Loop v x
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680150161"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680150161"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680150161"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-177"></span><span>    </span><span id="local-6989586621680150160"><span class="annot"><span class="annottext">isInternalLockPossible :: LoopBegin v x -&gt; Bool
</span><a href="#local-6989586621680150160"><span class="hs-identifier hs-var hs-var hs-var hs-var">isInternalLockPossible</span></a></span></span><span> </span><span class="annot"><span class="annottext">LoopBegin v x
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span></span></span><span>
</span><span id="line-178"></span><span id="local-6989586621680150860"><span id="local-6989586621680150861"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150861"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopBegin"><span class="hs-identifier hs-type">LoopBegin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150861"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150860"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680150861"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680150861"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-179"></span><span>    </span><span id="local-6989586621680150153"><span class="annot"><span class="annottext">patch :: (v, v) -&gt; LoopBegin v x -&gt; LoopBegin v x
</span><a href="#local-6989586621680150153"><span class="hs-identifier hs-var hs-var hs-var hs-var">patch</span></a></span></span><span> </span><span id="local-6989586621680150152"><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680150152"><span class="hs-identifier hs-var">diff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopBegin"><span class="hs-identifier hs-type">LoopBegin</span></a></span><span> </span><span id="local-6989586621680150151"><span class="annot"><span class="annottext">Loop v x
</span><a href="#local-6989586621680150151"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621680150150"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680150150"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Loop v x -&gt; O v -&gt; LoopBegin v x
forall v x. Loop v x -&gt; O v -&gt; LoopBegin v x
</span><a href="NITTA.Intermediate.Functions.html#LoopBegin"><span class="hs-identifier hs-var">LoopBegin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; Loop v x -&gt; Loop v x
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680150152"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">Loop v x
</span><a href="#local-6989586621680150151"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(O v -&gt; LoopBegin v x) -&gt; O v -&gt; LoopBegin v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(v, v) -&gt; O v -&gt; O v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680150152"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680150150"><span class="hs-identifier hs-var">a</span></a></span></span></span><span>
</span><span id="line-180"></span><span id="local-6989586621680150856"><span id="local-6989586621680150857"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150857"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Locks"><span class="hs-identifier hs-type">Locks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopBegin"><span class="hs-identifier hs-type">LoopBegin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150857"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150856"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150857"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-181"></span><span>    </span><span id="local-6989586621680150144"><span class="annot"><span class="annottext">locks :: LoopBegin v x -&gt; [Lock v]
</span><a href="#local-6989586621680150144"><span class="hs-identifier hs-var hs-var hs-var hs-var">locks</span></a></span></span><span> </span><span class="annot"><span class="annottext">LoopBegin v x
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span></span></span><span>
</span><span id="line-182"></span><span id="local-6989586621680150852"><span id="local-6989586621680150853"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150853"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#FunctionSimulation"><span class="hs-identifier hs-type">FunctionSimulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopBegin"><span class="hs-identifier hs-type">LoopBegin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150853"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150852"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150853"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150852"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-183"></span><span>    </span><span id="local-6989586621680150139"><span class="annot"><span class="annottext">simulate :: CycleCntx v x -&gt; LoopBegin v x -&gt; [(v, x)]
</span><a href="#local-6989586621680150139"><span class="hs-identifier hs-var hs-var hs-var hs-var">simulate</span></a></span></span><span> </span><span id="local-6989586621680150138"><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680150138"><span class="hs-identifier hs-var">cntx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopBegin"><span class="hs-identifier hs-type">LoopBegin</span></a></span><span> </span><span id="local-6989586621680150137"><span class="annot"><span class="annottext">Loop v x
</span><a href="#local-6989586621680150137"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">O v
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CycleCntx v x -&gt; Loop v x -&gt; [(v, x)]
forall f v x.
FunctionSimulation f v x =&gt;
CycleCntx v x -&gt; f -&gt; [(v, x)]
</span><a href="NITTA.Intermediate.Types.html#simulate"><span class="hs-identifier hs-var">simulate</span></a></span><span> </span><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680150138"><span class="hs-identifier hs-var">cntx</span></a></span><span> </span><span class="annot"><span class="annottext">Loop v x
</span><a href="#local-6989586621680150137"><span class="hs-identifier hs-var">l</span></a></span></span></span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span class="hs-keyword">data</span><span> </span><span id="LoopEnd"><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopEnd"><span class="hs-identifier hs-var">LoopEnd</span></a></span></span><span> </span><span id="local-6989586621680150850"><span class="annot"><a href="#local-6989586621680150850"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621680150851"><span class="annot"><a href="#local-6989586621680150851"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="LoopEnd"><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopEnd"><span class="hs-identifier hs-var">LoopEnd</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150850"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150851"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150850"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680150130"><span id="local-6989586621680150134"><span class="annot"><span class="annottext">LoopEnd v x -&gt; LoopEnd v x -&gt; Bool
(LoopEnd v x -&gt; LoopEnd v x -&gt; Bool)
-&gt; (LoopEnd v x -&gt; LoopEnd v x -&gt; Bool) -&gt; Eq (LoopEnd v x)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall v x. (Eq x, Eq v) =&gt; LoopEnd v x -&gt; LoopEnd v x -&gt; Bool
/= :: LoopEnd v x -&gt; LoopEnd v x -&gt; Bool
$c/= :: forall v x. (Eq x, Eq v) =&gt; LoopEnd v x -&gt; LoopEnd v x -&gt; Bool
== :: LoopEnd v x -&gt; LoopEnd v x -&gt; Bool
$c== :: forall v x. (Eq x, Eq v) =&gt; LoopEnd v x -&gt; LoopEnd v x -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-186"></span><span id="local-6989586621680150848"><span id="local-6989586621680150849"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680150125"><span id="local-6989586621680150128"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150849"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621680150848"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopEnd"><span class="hs-identifier hs-type">LoopEnd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150849"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150848"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680150122"><span class="annot"><span class="annottext">show :: LoopEnd v x -&gt; String
</span><a href="#local-6989586621680150122"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LoopEnd v x -&gt; String
forall a. Label a =&gt; a -&gt; String
</span><a href="NITTA.Intermediate.Types.html#label"><span class="hs-keyword hs-var">label</span></a></span></span></span><span>
</span><span id="line-187"></span><span id="local-6989586621680150846"><span id="local-6989586621680150847"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150847"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopEnd"><span class="hs-identifier hs-type">LoopEnd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150847"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150846"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-188"></span><span>    </span><span id="local-6989586621680150113"><span class="annot"><span class="annottext">label :: LoopEnd v x -&gt; String
</span><a href="#local-6989586621680150113"><span class="hs-keyword hs-var hs-var hs-var hs-var">label</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopEnd"><span class="hs-identifier hs-type">LoopEnd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span> </span><span class="annot"><span class="annottext">X x
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680150112"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680150112"><span class="hs-identifier hs-var">os</span></a></span></span><span> </span><span class="annot"><span class="annottext">I v
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680150111"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680150111"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;LoopEnd(&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680150111"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;) pair out: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">O v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680150112"><span class="hs-identifier hs-var">os</span></a></span></span></span><span>
</span><span id="line-189"></span><span id="local-6989586621680150842"><span id="local-6989586621680150843"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680150108"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150843"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopEnd"><span class="hs-identifier hs-type">LoopEnd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150843"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150842"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150843"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-190"></span><span>    </span><span id="local-6989586621680150105"><span class="annot"><span class="annottext">inputs :: LoopEnd v x -&gt; Set v
</span><a href="#local-6989586621680150105"><span class="hs-identifier hs-var hs-var hs-var hs-var">inputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopEnd"><span class="hs-identifier hs-type">LoopEnd</span></a></span><span> </span><span class="annot"><span class="annottext">Loop v x
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680150104"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680150104"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680150104"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-191"></span><span>    </span><span id="local-6989586621680150103"><span class="annot"><span class="annottext">isInternalLockPossible :: LoopEnd v x -&gt; Bool
</span><a href="#local-6989586621680150103"><span class="hs-identifier hs-var hs-var hs-var hs-var">isInternalLockPossible</span></a></span></span><span> </span><span class="annot"><span class="annottext">LoopEnd v x
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span></span></span><span>
</span><span id="line-192"></span><span id="local-6989586621680150838"><span id="local-6989586621680150839"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150839"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopEnd"><span class="hs-identifier hs-type">LoopEnd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150839"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150838"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680150839"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680150839"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-193"></span><span>    </span><span id="local-6989586621680150095"><span class="annot"><span class="annottext">patch :: (v, v) -&gt; LoopEnd v x -&gt; LoopEnd v x
</span><a href="#local-6989586621680150095"><span class="hs-identifier hs-var hs-var hs-var hs-var">patch</span></a></span></span><span> </span><span id="local-6989586621680150094"><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680150094"><span class="hs-identifier hs-var">diff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopEnd"><span class="hs-identifier hs-type">LoopEnd</span></a></span><span> </span><span id="local-6989586621680150093"><span class="annot"><span class="annottext">Loop v x
</span><a href="#local-6989586621680150093"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621680150092"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680150092"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Loop v x -&gt; I v -&gt; LoopEnd v x
forall v x. Loop v x -&gt; I v -&gt; LoopEnd v x
</span><a href="NITTA.Intermediate.Functions.html#LoopEnd"><span class="hs-identifier hs-var">LoopEnd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; Loop v x -&gt; Loop v x
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680150094"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">Loop v x
</span><a href="#local-6989586621680150093"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(I v -&gt; LoopEnd v x) -&gt; I v -&gt; LoopEnd v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680150094"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680150092"><span class="hs-identifier hs-var">a</span></a></span></span></span><span>
</span><span id="line-194"></span><span id="local-6989586621680150834"><span id="local-6989586621680150835"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150835"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Locks"><span class="hs-identifier hs-type">Locks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopEnd"><span class="hs-identifier hs-type">LoopEnd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150835"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150834"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150835"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680150085"><span class="annot"><span class="annottext">locks :: LoopEnd v x -&gt; [Lock v]
</span><a href="#local-6989586621680150085"><span class="hs-identifier hs-var hs-var hs-var hs-var">locks</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopEnd"><span class="hs-identifier hs-type">LoopEnd</span></a></span><span> </span><span id="local-6989586621680150084"><span class="annot"><span class="annottext">Loop v x
</span><a href="#local-6989586621680150084"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">I v
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Loop v x -&gt; [Lock v]
forall x v. Locks x v =&gt; x -&gt; [Lock v]
</span><a href="NITTA.Intermediate.Types.html#locks"><span class="hs-identifier hs-var">locks</span></a></span><span> </span><span class="annot"><span class="annottext">Loop v x
</span><a href="#local-6989586621680150084"><span class="hs-identifier hs-var">l</span></a></span></span></span><span>
</span><span id="line-195"></span><span id="local-6989586621680150830"><span id="local-6989586621680150831"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150831"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#FunctionSimulation"><span class="hs-identifier hs-type">FunctionSimulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopEnd"><span class="hs-identifier hs-type">LoopEnd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150831"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150830"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150831"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150830"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-196"></span><span>    </span><span id="local-6989586621680150079"><span class="annot"><span class="annottext">simulate :: CycleCntx v x -&gt; LoopEnd v x -&gt; [(v, x)]
</span><a href="#local-6989586621680150079"><span class="hs-identifier hs-var hs-var hs-var hs-var">simulate</span></a></span></span><span> </span><span id="local-6989586621680150078"><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680150078"><span class="hs-identifier hs-var">cntx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopEnd"><span class="hs-identifier hs-type">LoopEnd</span></a></span><span> </span><span id="local-6989586621680150077"><span class="annot"><span class="annottext">Loop v x
</span><a href="#local-6989586621680150077"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">I v
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CycleCntx v x -&gt; Loop v x -&gt; [(v, x)]
forall f v x.
FunctionSimulation f v x =&gt;
CycleCntx v x -&gt; f -&gt; [(v, x)]
</span><a href="NITTA.Intermediate.Types.html#simulate"><span class="hs-identifier hs-var">simulate</span></a></span><span> </span><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680150078"><span class="hs-identifier hs-var">cntx</span></a></span><span> </span><span class="annot"><span class="annottext">Loop v x
</span><a href="#local-6989586621680150077"><span class="hs-identifier hs-var">l</span></a></span></span></span><span>
</span><span id="line-197"></span><span>
</span><span id="line-198"></span><span class="hs-keyword">data</span><span> </span><span id="Buffer"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-var">Buffer</span></a></span></span><span> </span><span id="local-6989586621680150829"><span class="annot"><a href="#local-6989586621680150829"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621680150828"><span class="annot"><a href="#local-6989586621680150828"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Buffer"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-var">Buffer</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150829"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150829"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680150070"><span id="local-6989586621680150074"><span class="annot"><span class="annottext">Buffer v x -&gt; Buffer v x -&gt; Bool
(Buffer v x -&gt; Buffer v x -&gt; Bool)
-&gt; (Buffer v x -&gt; Buffer v x -&gt; Bool) -&gt; Eq (Buffer v x)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall v x. Eq v =&gt; Buffer v x -&gt; Buffer v x -&gt; Bool
/= :: Buffer v x -&gt; Buffer v x -&gt; Bool
$c/= :: forall v x. Eq v =&gt; Buffer v x -&gt; Buffer v x -&gt; Bool
== :: Buffer v x -&gt; Buffer v x -&gt; Bool
$c== :: forall v x. Eq v =&gt; Buffer v x -&gt; Buffer v x -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-199"></span><span id="local-6989586621680150824"><span id="local-6989586621680150825"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-type">Buffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150825"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150824"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680150067"><span class="annot"><span class="annottext">label :: Buffer v x -&gt; String
</span><a href="#local-6989586621680150067"><span class="hs-keyword hs-var hs-var hs-var hs-var">label</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-type">Buffer</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;buf&quot;</span></span></span></span><span>
</span><span id="line-200"></span><span id="local-6989586621680150822"><span id="local-6989586621680150823"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680150062"><span id="local-6989586621680150065"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150823"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-type">Buffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150823"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150822"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-201"></span><span>    </span><span id="local-6989586621680150055"><span class="annot"><span class="annottext">show :: Buffer v x -&gt; String
</span><a href="#local-6989586621680150055"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-type">Buffer</span></a></span><span> </span><span id="local-6989586621680150054"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680150054"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680150053"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680150053"><span class="hs-identifier hs-var">os</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;buffer(&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680150054"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;)&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">O v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680150053"><span class="hs-identifier hs-var">os</span></a></span></span></span><span>
</span><span id="line-202"></span><span id="local-6989586621680150820"><span id="local-6989586621680150821"><span class="annot"><a href="NITTA.Intermediate.Functions.html#buffer"><span class="hs-identifier hs-type">buffer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150821"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Value.html#Val"><span class="hs-identifier hs-type">Val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150820"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680150821"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680150821"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#F"><span class="hs-identifier hs-type">F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150821"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150820"><span class="hs-identifier hs-type">x</span></a></span></span></span><span>
</span><span id="line-203"></span><span id="buffer"><span class="annot"><span class="annottext">buffer :: forall v x. (Var v, Val x) =&gt; v -&gt; [v] -&gt; F v x
</span><a href="NITTA.Intermediate.Functions.html#buffer"><span class="hs-identifier hs-var hs-var">buffer</span></a></span></span><span> </span><span id="local-6989586621680150032"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680150032"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680150031"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680150031"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Buffer v x -&gt; F v x
forall {f} {v} {x}.
(Function f v, Patch f (v, v), Locks f v, Show f, Label f,
 FunctionSimulation f v x, Typeable f, Eq f) =&gt;
f -&gt; F v x
</span><a href="NITTA.Intermediate.Types.html#packF"><span class="hs-identifier hs-var">packF</span></a></span><span> </span><span class="annot"><span class="annottext">(Buffer v x -&gt; F v x) -&gt; Buffer v x -&gt; F v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; O v -&gt; Buffer v x
forall v x. I v -&gt; O v -&gt; Buffer v x
</span><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-var">Buffer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; I v
forall v. v -&gt; I v
</span><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-var">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680150032"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set v -&gt; O v
forall v. Set v -&gt; O v
</span><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-var">O</span></a></span><span> </span><span class="annot"><span class="annottext">(Set v -&gt; O v) -&gt; Set v -&gt; O v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Set v
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680150031"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-204"></span><span>
</span><span id="line-205"></span><span id="local-6989586621680150810"><span id="local-6989586621680150811"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680150027"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150811"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-type">Buffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150811"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150810"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150811"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-206"></span><span>    </span><span id="local-6989586621680150025"><span class="annot"><span class="annottext">inputs :: Buffer v x -&gt; Set v
</span><a href="#local-6989586621680150025"><span class="hs-identifier hs-var hs-var hs-var hs-var">inputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-type">Buffer</span></a></span><span> </span><span id="local-6989586621680150024"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680150024"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680150023"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680150023"><span class="hs-identifier hs-var">_b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680150024"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-207"></span><span>    </span><span id="local-6989586621680150021"><span class="annot"><span class="annottext">outputs :: Buffer v x -&gt; Set v
</span><a href="#local-6989586621680150021"><span class="hs-identifier hs-var hs-var hs-var hs-var">outputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-type">Buffer</span></a></span><span> </span><span id="local-6989586621680150020"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680150020"><span class="hs-identifier hs-var">_a</span></a></span></span><span> </span><span id="local-6989586621680150019"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680150019"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680150019"><span class="hs-identifier hs-var">b</span></a></span></span></span><span>
</span><span id="line-208"></span><span id="local-6989586621680150812"><span id="local-6989586621680150813"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150813"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-type">Buffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150813"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150812"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680150813"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680150813"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-209"></span><span>    </span><span id="local-6989586621680150012"><span class="annot"><span class="annottext">patch :: (v, v) -&gt; Buffer v x -&gt; Buffer v x
</span><a href="#local-6989586621680150012"><span class="hs-identifier hs-var hs-var hs-var hs-var">patch</span></a></span></span><span> </span><span id="local-6989586621680150011"><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680150011"><span class="hs-identifier hs-var">diff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-type">Buffer</span></a></span><span> </span><span id="local-6989586621680150010"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680150010"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680150009"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680150009"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; O v -&gt; Buffer v x
forall v x. I v -&gt; O v -&gt; Buffer v x
</span><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-var">Buffer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680150011"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680150010"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; O v -&gt; O v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680150011"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680150009"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-210"></span><span id="local-6989586621680150814"><span id="local-6989586621680150815"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150815"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Locks"><span class="hs-identifier hs-type">Locks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-type">Buffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150815"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150814"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150815"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-211"></span><span>    </span><span id="local-6989586621680150003"><span class="annot"><span class="annottext">locks :: Buffer v x -&gt; [Lock v]
</span><a href="#local-6989586621680150003"><span class="hs-identifier hs-var hs-var hs-var hs-var">locks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Buffer v x -&gt; [Lock v]
forall {f} {v}. Function f v =&gt; f -&gt; [Lock v]
</span><a href="NITTA.Intermediate.Types.html#inputsLockOutputs"><span class="hs-identifier hs-var">inputsLockOutputs</span></a></span></span></span><span>
</span><span id="line-212"></span><span id="local-6989586621680150816"><span id="local-6989586621680150817"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150817"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#FunctionSimulation"><span class="hs-identifier hs-type">FunctionSimulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-type">Buffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150817"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150816"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150817"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150816"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-213"></span><span>    </span><span id="local-6989586621680149992"><span class="annot"><span class="annottext">simulate :: CycleCntx v x -&gt; Buffer v x -&gt; [(v, x)]
</span><a href="#local-6989586621680149992"><span class="hs-identifier hs-var hs-var hs-var hs-var">simulate</span></a></span></span><span> </span><span id="local-6989586621680149991"><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680149991"><span class="hs-identifier hs-var">cntx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-type">Buffer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span id="local-6989586621680149990"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149990"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span id="local-6989586621680149989"><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680149989"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-214"></span><span>        </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149988"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680149991"><span class="hs-identifier hs-var">cntx</span></a></span><span> </span><span class="annot"><span class="annottext">CycleCntx v x -&gt; v -&gt; x
forall {a} {v}.
(Eq a, Hashable a, ToString a) =&gt;
CycleCntx a v -&gt; a -&gt; v
</span><a href="NITTA.Intermediate.Types.html#getCntx"><span class="hs-operator hs-var">`getCntx`</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149990"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680149988"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149988"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; [v]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680149989"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-215"></span><span>
</span><span id="line-216"></span><span class="hs-keyword">data</span><span> </span><span id="Add"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-var">Add</span></a></span></span><span> </span><span id="local-6989586621680150799"><span class="annot"><a href="#local-6989586621680150799"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621680150798"><span class="annot"><a href="#local-6989586621680150798"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Add"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-var">Add</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150799"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150799"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150799"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680149979"><span id="local-6989586621680149984"><span class="annot"><span class="annottext">Add v x -&gt; Add v x -&gt; Bool
(Add v x -&gt; Add v x -&gt; Bool)
-&gt; (Add v x -&gt; Add v x -&gt; Bool) -&gt; Eq (Add v x)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall v x. Eq v =&gt; Add v x -&gt; Add v x -&gt; Bool
/= :: Add v x -&gt; Add v x -&gt; Bool
$c/= :: forall v x. Eq v =&gt; Add v x -&gt; Add v x -&gt; Bool
== :: Add v x -&gt; Add v x -&gt; Bool
$c== :: forall v x. Eq v =&gt; Add v x -&gt; Add v x -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-217"></span><span id="local-6989586621680150794"><span id="local-6989586621680150795"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-type">Add</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150795"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150794"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680149976"><span class="annot"><span class="annottext">label :: Add v x -&gt; String
</span><a href="#local-6989586621680149976"><span class="hs-keyword hs-var hs-var hs-var hs-var">label</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-type">Add</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;+&quot;</span></span></span></span><span>
</span><span id="line-218"></span><span id="local-6989586621680150792"><span id="local-6989586621680150793"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680149971"><span id="local-6989586621680149974"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150793"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-type">Add</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150793"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150792"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-219"></span><span>    </span><span id="local-6989586621680149963"><span class="annot"><span class="annottext">show :: Add v x -&gt; String
</span><a href="#local-6989586621680149963"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-type">Add</span></a></span><span> </span><span id="local-6989586621680149962"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149962"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680149961"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149961"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680149960"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149960"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-220"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680149959"><span class="annot"><span class="annottext">lexp :: String
</span><a href="#local-6989586621680149959"><span class="hs-identifier hs-var hs-var">lexp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149962"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; + &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149961"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-221"></span><span>            </span><span id="local-6989586621680149958"><span class="annot"><span class="annottext">rexp :: String
</span><a href="#local-6989586621680149958"><span class="hs-identifier hs-var hs-var">rexp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149960"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-222"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680149959"><span class="hs-identifier hs-var">lexp</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680149958"><span class="hs-identifier hs-var">rexp</span></a></span></span></span><span>
</span><span id="line-223"></span><span id="local-6989586621680150790"><span id="local-6989586621680150791"><span class="annot"><a href="NITTA.Intermediate.Functions.html#add"><span class="hs-identifier hs-type">add</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150791"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Value.html#Val"><span class="hs-identifier hs-type">Val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150790"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680150791"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680150791"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680150791"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#F"><span class="hs-identifier hs-type">F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150791"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150790"><span class="hs-identifier hs-type">x</span></a></span></span></span><span>
</span><span id="line-224"></span><span id="add"><span class="annot"><span class="annottext">add :: forall v x. (Var v, Val x) =&gt; v -&gt; v -&gt; [v] -&gt; F v x
</span><a href="NITTA.Intermediate.Functions.html#add"><span class="hs-identifier hs-var hs-var">add</span></a></span></span><span> </span><span id="local-6989586621680149933"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149933"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680149932"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149932"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680149931"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680149931"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Add v x -&gt; F v x
forall {f} {v} {x}.
(Function f v, Patch f (v, v), Locks f v, Show f, Label f,
 FunctionSimulation f v x, Typeable f, Eq f) =&gt;
f -&gt; F v x
</span><a href="NITTA.Intermediate.Types.html#packF"><span class="hs-identifier hs-var">packF</span></a></span><span> </span><span class="annot"><span class="annottext">(Add v x -&gt; F v x) -&gt; Add v x -&gt; F v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; I v -&gt; O v -&gt; Add v x
forall v x. I v -&gt; I v -&gt; O v -&gt; Add v x
</span><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-var">Add</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; I v
forall v. v -&gt; I v
</span><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-var">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149933"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; I v
forall v. v -&gt; I v
</span><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-var">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149932"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(O v -&gt; Add v x) -&gt; O v -&gt; Add v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; O v
forall v. Set v -&gt; O v
</span><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-var">O</span></a></span><span> </span><span class="annot"><span class="annottext">(Set v -&gt; O v) -&gt; Set v -&gt; O v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Set v
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680149931"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-225"></span><span>
</span><span id="line-226"></span><span id="local-6989586621680150780"><span id="local-6989586621680150781"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680149927"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150781"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-type">Add</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150781"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150780"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150781"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-227"></span><span>    </span><span id="local-6989586621680149923"><span class="annot"><span class="annottext">inputs :: Add v x -&gt; Set v
</span><a href="#local-6989586621680149923"><span class="hs-identifier hs-var hs-var hs-var hs-var">inputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-type">Add</span></a></span><span> </span><span id="local-6989586621680149922"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149922"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680149921"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149921"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680149920"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149920"><span class="hs-identifier hs-var">_c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149922"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; Set v -&gt; Set v
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-operator hs-var">`union`</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149921"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-228"></span><span>    </span><span id="local-6989586621680149918"><span class="annot"><span class="annottext">outputs :: Add v x -&gt; Set v
</span><a href="#local-6989586621680149918"><span class="hs-identifier hs-var hs-var hs-var hs-var">outputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-type">Add</span></a></span><span> </span><span id="local-6989586621680149917"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149917"><span class="hs-identifier hs-var">_a</span></a></span></span><span> </span><span id="local-6989586621680149916"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149916"><span class="hs-identifier hs-var">_b</span></a></span></span><span> </span><span id="local-6989586621680149915"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149915"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149915"><span class="hs-identifier hs-var">c</span></a></span></span></span><span>
</span><span id="line-229"></span><span id="local-6989586621680150782"><span id="local-6989586621680150783"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150783"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-type">Add</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150783"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150782"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680150783"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680150783"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-230"></span><span>    </span><span id="local-6989586621680149907"><span class="annot"><span class="annottext">patch :: (v, v) -&gt; Add v x -&gt; Add v x
</span><a href="#local-6989586621680149907"><span class="hs-identifier hs-var hs-var hs-var hs-var">patch</span></a></span></span><span> </span><span id="local-6989586621680149906"><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149906"><span class="hs-identifier hs-var">diff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-type">Add</span></a></span><span> </span><span id="local-6989586621680149905"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149905"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680149904"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149904"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680149903"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149903"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; I v -&gt; O v -&gt; Add v x
forall v x. I v -&gt; I v -&gt; O v -&gt; Add v x
</span><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-var">Add</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149906"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149905"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149906"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149904"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; O v -&gt; O v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149906"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149903"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-231"></span><span id="local-6989586621680150784"><span id="local-6989586621680150785"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150785"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Locks"><span class="hs-identifier hs-type">Locks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-type">Add</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150785"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150784"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150785"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-232"></span><span>    </span><span id="local-6989586621680149897"><span class="annot"><span class="annottext">locks :: Add v x -&gt; [Lock v]
</span><a href="#local-6989586621680149897"><span class="hs-identifier hs-var hs-var hs-var hs-var">locks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Add v x -&gt; [Lock v]
forall {f} {v}. Function f v =&gt; f -&gt; [Lock v]
</span><a href="NITTA.Intermediate.Types.html#inputsLockOutputs"><span class="hs-identifier hs-var">inputsLockOutputs</span></a></span></span></span><span>
</span><span id="line-233"></span><span id="local-6989586621680150786"><span id="local-6989586621680150787"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150787"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="annot"><a href="#local-6989586621680150786"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#FunctionSimulation"><span class="hs-identifier hs-type">FunctionSimulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-type">Add</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150787"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150786"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150787"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150786"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-234"></span><span>    </span><span id="local-6989586621680149882"><span class="annot"><span class="annottext">simulate :: CycleCntx v x -&gt; Add v x -&gt; [(v, x)]
</span><a href="#local-6989586621680149882"><span class="hs-identifier hs-var hs-var hs-var hs-var">simulate</span></a></span></span><span> </span><span id="local-6989586621680149881"><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680149881"><span class="hs-identifier hs-var">cntx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-type">Add</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span id="local-6989586621680149880"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149880"><span class="hs-identifier hs-var">v1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span id="local-6989586621680149879"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149879"><span class="hs-identifier hs-var">v2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span id="local-6989586621680149878"><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680149878"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-235"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680149877"><span class="annot"><span class="annottext">x1 :: x
</span><a href="#local-6989586621680149877"><span class="hs-identifier hs-var hs-var">x1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680149881"><span class="hs-identifier hs-var">cntx</span></a></span><span> </span><span class="annot"><span class="annottext">CycleCntx v x -&gt; v -&gt; x
forall {a} {v}.
(Eq a, Hashable a, ToString a) =&gt;
CycleCntx a v -&gt; a -&gt; v
</span><a href="NITTA.Intermediate.Types.html#getCntx"><span class="hs-operator hs-var">`getCntx`</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149880"><span class="hs-identifier hs-var">v1</span></a></span><span>
</span><span id="line-236"></span><span>            </span><span id="local-6989586621680149876"><span class="annot"><span class="annottext">x2 :: x
</span><a href="#local-6989586621680149876"><span class="hs-identifier hs-var hs-var">x2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680149881"><span class="hs-identifier hs-var">cntx</span></a></span><span> </span><span class="annot"><span class="annottext">CycleCntx v x -&gt; v -&gt; x
forall {a} {v}.
(Eq a, Hashable a, ToString a) =&gt;
CycleCntx a v -&gt; a -&gt; v
</span><a href="NITTA.Intermediate.Types.html#getCntx"><span class="hs-operator hs-var">`getCntx`</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149879"><span class="hs-identifier hs-var">v2</span></a></span><span>
</span><span id="line-237"></span><span>            </span><span id="local-6989586621680149875"><span class="annot"><span class="annottext">y :: x
</span><a href="#local-6989586621680149875"><span class="hs-identifier hs-var hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680149877"><span class="hs-identifier hs-var">x1</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; x -&gt; x
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680149876"><span class="hs-identifier hs-var">x2</span></a></span><span>
</span><span id="line-238"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149873"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680149875"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680149873"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149873"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; [v]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680149878"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-239"></span><span>
</span><span id="line-240"></span><span class="hs-keyword">data</span><span> </span><span id="Sub"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-var">Sub</span></a></span></span><span> </span><span id="local-6989586621680150771"><span class="annot"><a href="#local-6989586621680150771"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621680150770"><span class="annot"><a href="#local-6989586621680150770"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Sub"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-var">Sub</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150771"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150771"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150771"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680149865"><span id="local-6989586621680149870"><span class="annot"><span class="annottext">Sub v x -&gt; Sub v x -&gt; Bool
(Sub v x -&gt; Sub v x -&gt; Bool)
-&gt; (Sub v x -&gt; Sub v x -&gt; Bool) -&gt; Eq (Sub v x)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall v x. Eq v =&gt; Sub v x -&gt; Sub v x -&gt; Bool
/= :: Sub v x -&gt; Sub v x -&gt; Bool
$c/= :: forall v x. Eq v =&gt; Sub v x -&gt; Sub v x -&gt; Bool
== :: Sub v x -&gt; Sub v x -&gt; Bool
$c== :: forall v x. Eq v =&gt; Sub v x -&gt; Sub v x -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-241"></span><span id="local-6989586621680150766"><span id="local-6989586621680150767"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150767"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150766"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680149862"><span class="annot"><span class="annottext">label :: Sub v x -&gt; String
</span><a href="#local-6989586621680149862"><span class="hs-keyword hs-var hs-var hs-var hs-var">label</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-&quot;</span></span></span></span><span>
</span><span id="line-242"></span><span id="local-6989586621680150764"><span id="local-6989586621680150765"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680149857"><span id="local-6989586621680149860"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150765"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150765"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150764"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-243"></span><span>    </span><span id="local-6989586621680149849"><span class="annot"><span class="annottext">show :: Sub v x -&gt; String
</span><a href="#local-6989586621680149849"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span> </span><span id="local-6989586621680149848"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149848"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680149847"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149847"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680149846"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149846"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-244"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680149845"><span class="annot"><span class="annottext">lexp :: String
</span><a href="#local-6989586621680149845"><span class="hs-identifier hs-var hs-var">lexp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149848"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; - &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149847"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-245"></span><span>            </span><span id="local-6989586621680149844"><span class="annot"><span class="annottext">rexp :: String
</span><a href="#local-6989586621680149844"><span class="hs-identifier hs-var hs-var">rexp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149846"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-246"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680149845"><span class="hs-identifier hs-var">lexp</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680149844"><span class="hs-identifier hs-var">rexp</span></a></span></span></span><span>
</span><span id="line-247"></span><span id="local-6989586621680149842"><span id="local-6989586621680149843"><span class="annot"><a href="NITTA.Intermediate.Functions.html#sub"><span class="hs-identifier hs-type">sub</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680149843"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Value.html#Val"><span class="hs-identifier hs-type">Val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680149842"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680149843"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680149843"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680149843"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#F"><span class="hs-identifier hs-type">F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680149843"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680149842"><span class="hs-identifier hs-type">x</span></a></span></span></span><span>
</span><span id="line-248"></span><span id="sub"><span class="annot"><span class="annottext">sub :: forall v x. (Var v, Val x) =&gt; v -&gt; v -&gt; [v] -&gt; F v x
</span><a href="NITTA.Intermediate.Functions.html#sub"><span class="hs-identifier hs-var hs-var">sub</span></a></span></span><span> </span><span id="local-6989586621680149818"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149818"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680149817"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149817"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680149816"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680149816"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Sub v x -&gt; F v x
forall {f} {v} {x}.
(Function f v, Patch f (v, v), Locks f v, Show f, Label f,
 FunctionSimulation f v x, Typeable f, Eq f) =&gt;
f -&gt; F v x
</span><a href="NITTA.Intermediate.Types.html#packF"><span class="hs-identifier hs-var">packF</span></a></span><span> </span><span class="annot"><span class="annottext">(Sub v x -&gt; F v x) -&gt; Sub v x -&gt; F v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; I v -&gt; O v -&gt; Sub v x
forall v x. I v -&gt; I v -&gt; O v -&gt; Sub v x
</span><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-var">Sub</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; I v
forall v. v -&gt; I v
</span><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-var">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149818"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; I v
forall v. v -&gt; I v
</span><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-var">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149817"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(O v -&gt; Sub v x) -&gt; O v -&gt; Sub v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; O v
forall v. Set v -&gt; O v
</span><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-var">O</span></a></span><span> </span><span class="annot"><span class="annottext">(Set v -&gt; O v) -&gt; Set v -&gt; O v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Set v
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680149816"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-249"></span><span>
</span><span id="line-250"></span><span id="local-6989586621680150754"><span id="local-6989586621680150755"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680149812"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150755"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150755"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150754"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150755"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-251"></span><span>    </span><span id="local-6989586621680149808"><span class="annot"><span class="annottext">inputs :: Sub v x -&gt; Set v
</span><a href="#local-6989586621680149808"><span class="hs-identifier hs-var hs-var hs-var hs-var">inputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span> </span><span id="local-6989586621680149807"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149807"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680149806"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149806"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680149805"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149805"><span class="hs-identifier hs-var">_c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149807"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; Set v -&gt; Set v
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-operator hs-var">`union`</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149806"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-252"></span><span>    </span><span id="local-6989586621680149803"><span class="annot"><span class="annottext">outputs :: Sub v x -&gt; Set v
</span><a href="#local-6989586621680149803"><span class="hs-identifier hs-var hs-var hs-var hs-var">outputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span> </span><span id="local-6989586621680149802"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149802"><span class="hs-identifier hs-var">_a</span></a></span></span><span> </span><span id="local-6989586621680149801"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149801"><span class="hs-identifier hs-var">_b</span></a></span></span><span> </span><span id="local-6989586621680149800"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149800"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149800"><span class="hs-identifier hs-var">c</span></a></span></span></span><span>
</span><span id="line-253"></span><span id="local-6989586621680150756"><span id="local-6989586621680150757"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150757"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150757"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150756"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680150757"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680150757"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-254"></span><span>    </span><span id="local-6989586621680149792"><span class="annot"><span class="annottext">patch :: (v, v) -&gt; Sub v x -&gt; Sub v x
</span><a href="#local-6989586621680149792"><span class="hs-identifier hs-var hs-var hs-var hs-var">patch</span></a></span></span><span> </span><span id="local-6989586621680149791"><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149791"><span class="hs-identifier hs-var">diff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span> </span><span id="local-6989586621680149790"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149790"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680149789"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149789"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680149788"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149788"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; I v -&gt; O v -&gt; Sub v x
forall v x. I v -&gt; I v -&gt; O v -&gt; Sub v x
</span><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-var">Sub</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149791"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149790"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149791"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149789"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; O v -&gt; O v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149791"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149788"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-255"></span><span id="local-6989586621680150758"><span id="local-6989586621680150759"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150759"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Locks"><span class="hs-identifier hs-type">Locks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150759"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150758"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150759"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-256"></span><span>    </span><span id="local-6989586621680149782"><span class="annot"><span class="annottext">locks :: Sub v x -&gt; [Lock v]
</span><a href="#local-6989586621680149782"><span class="hs-identifier hs-var hs-var hs-var hs-var">locks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Sub v x -&gt; [Lock v]
forall {f} {v}. Function f v =&gt; f -&gt; [Lock v]
</span><a href="NITTA.Intermediate.Types.html#inputsLockOutputs"><span class="hs-identifier hs-var">inputsLockOutputs</span></a></span></span></span><span>
</span><span id="line-257"></span><span id="local-6989586621680150760"><span id="local-6989586621680150761"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150761"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="annot"><a href="#local-6989586621680150760"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#FunctionSimulation"><span class="hs-identifier hs-type">FunctionSimulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150761"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150760"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150761"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150760"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-258"></span><span>    </span><span id="local-6989586621680149767"><span class="annot"><span class="annottext">simulate :: CycleCntx v x -&gt; Sub v x -&gt; [(v, x)]
</span><a href="#local-6989586621680149767"><span class="hs-identifier hs-var hs-var hs-var hs-var">simulate</span></a></span></span><span> </span><span id="local-6989586621680149766"><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680149766"><span class="hs-identifier hs-var">cntx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span id="local-6989586621680149765"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149765"><span class="hs-identifier hs-var">v1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span id="local-6989586621680149764"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149764"><span class="hs-identifier hs-var">v2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span id="local-6989586621680149763"><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680149763"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-259"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680149762"><span class="annot"><span class="annottext">x1 :: x
</span><a href="#local-6989586621680149762"><span class="hs-identifier hs-var hs-var">x1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680149766"><span class="hs-identifier hs-var">cntx</span></a></span><span> </span><span class="annot"><span class="annottext">CycleCntx v x -&gt; v -&gt; x
forall {a} {v}.
(Eq a, Hashable a, ToString a) =&gt;
CycleCntx a v -&gt; a -&gt; v
</span><a href="NITTA.Intermediate.Types.html#getCntx"><span class="hs-operator hs-var">`getCntx`</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149765"><span class="hs-identifier hs-var">v1</span></a></span><span>
</span><span id="line-260"></span><span>            </span><span id="local-6989586621680149761"><span class="annot"><span class="annottext">x2 :: x
</span><a href="#local-6989586621680149761"><span class="hs-identifier hs-var hs-var">x2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680149766"><span class="hs-identifier hs-var">cntx</span></a></span><span> </span><span class="annot"><span class="annottext">CycleCntx v x -&gt; v -&gt; x
forall {a} {v}.
(Eq a, Hashable a, ToString a) =&gt;
CycleCntx a v -&gt; a -&gt; v
</span><a href="NITTA.Intermediate.Types.html#getCntx"><span class="hs-operator hs-var">`getCntx`</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149764"><span class="hs-identifier hs-var">v2</span></a></span><span>
</span><span id="line-261"></span><span>            </span><span id="local-6989586621680149760"><span class="annot"><span class="annottext">y :: x
</span><a href="#local-6989586621680149760"><span class="hs-identifier hs-var hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680149762"><span class="hs-identifier hs-var">x1</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; x -&gt; x
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680149761"><span class="hs-identifier hs-var">x2</span></a></span><span>
</span><span id="line-262"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149759"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680149760"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680149759"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149759"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; [v]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680149763"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-263"></span><span>
</span><span id="line-264"></span><span class="hs-keyword">data</span><span> </span><span id="Multiply"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-var">Multiply</span></a></span></span><span> </span><span id="local-6989586621680150747"><span class="annot"><a href="#local-6989586621680150747"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621680150746"><span class="annot"><a href="#local-6989586621680150746"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Multiply"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-var">Multiply</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150747"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150747"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150747"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680149751"><span id="local-6989586621680149756"><span class="annot"><span class="annottext">Multiply v x -&gt; Multiply v x -&gt; Bool
(Multiply v x -&gt; Multiply v x -&gt; Bool)
-&gt; (Multiply v x -&gt; Multiply v x -&gt; Bool) -&gt; Eq (Multiply v x)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall v x. Eq v =&gt; Multiply v x -&gt; Multiply v x -&gt; Bool
/= :: Multiply v x -&gt; Multiply v x -&gt; Bool
$c/= :: forall v x. Eq v =&gt; Multiply v x -&gt; Multiply v x -&gt; Bool
== :: Multiply v x -&gt; Multiply v x -&gt; Bool
$c== :: forall v x. Eq v =&gt; Multiply v x -&gt; Multiply v x -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-265"></span><span id="local-6989586621680150742"><span id="local-6989586621680150743"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-type">Multiply</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150743"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150742"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680149748"><span class="annot"><span class="annottext">label :: Multiply v x -&gt; String
</span><a href="#local-6989586621680149748"><span class="hs-keyword hs-var hs-var hs-var hs-var">label</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-type">Multiply</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;*&quot;</span></span></span></span><span>
</span><span id="line-266"></span><span id="local-6989586621680150740"><span id="local-6989586621680150741"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680149743"><span id="local-6989586621680149746"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150741"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-type">Multiply</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150741"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150740"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-267"></span><span>    </span><span id="local-6989586621680149735"><span class="annot"><span class="annottext">show :: Multiply v x -&gt; String
</span><a href="#local-6989586621680149735"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-type">Multiply</span></a></span><span> </span><span id="local-6989586621680149734"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149734"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680149733"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149733"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680149732"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149732"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-268"></span><span>        </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149734"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; * &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149733"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">O v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149732"><span class="hs-identifier hs-var">c</span></a></span></span></span><span>
</span><span id="line-269"></span><span id="local-6989586621680149730"><span id="local-6989586621680149731"><span class="annot"><a href="NITTA.Intermediate.Functions.html#multiply"><span class="hs-identifier hs-type">multiply</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680149731"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Value.html#Val"><span class="hs-identifier hs-type">Val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680149730"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680149731"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680149731"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680149731"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#F"><span class="hs-identifier hs-type">F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680149731"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680149730"><span class="hs-identifier hs-type">x</span></a></span></span></span><span>
</span><span id="line-270"></span><span id="multiply"><span class="annot"><span class="annottext">multiply :: forall v x. (Var v, Val x) =&gt; v -&gt; v -&gt; [v] -&gt; F v x
</span><a href="NITTA.Intermediate.Functions.html#multiply"><span class="hs-identifier hs-var hs-var">multiply</span></a></span></span><span> </span><span id="local-6989586621680149706"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149706"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680149705"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149705"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680149704"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680149704"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Multiply v x -&gt; F v x
forall {f} {v} {x}.
(Function f v, Patch f (v, v), Locks f v, Show f, Label f,
 FunctionSimulation f v x, Typeable f, Eq f) =&gt;
f -&gt; F v x
</span><a href="NITTA.Intermediate.Types.html#packF"><span class="hs-identifier hs-var">packF</span></a></span><span> </span><span class="annot"><span class="annottext">(Multiply v x -&gt; F v x) -&gt; Multiply v x -&gt; F v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; I v -&gt; O v -&gt; Multiply v x
forall v x. I v -&gt; I v -&gt; O v -&gt; Multiply v x
</span><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-var">Multiply</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; I v
forall v. v -&gt; I v
</span><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-var">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149706"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; I v
forall v. v -&gt; I v
</span><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-var">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149705"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(O v -&gt; Multiply v x) -&gt; O v -&gt; Multiply v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; O v
forall v. Set v -&gt; O v
</span><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-var">O</span></a></span><span> </span><span class="annot"><span class="annottext">(Set v -&gt; O v) -&gt; Set v -&gt; O v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Set v
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680149704"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-271"></span><span>
</span><span id="line-272"></span><span id="local-6989586621680150730"><span id="local-6989586621680150731"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680149700"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150731"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-type">Multiply</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150731"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150730"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150731"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-273"></span><span>    </span><span id="local-6989586621680149696"><span class="annot"><span class="annottext">inputs :: Multiply v x -&gt; Set v
</span><a href="#local-6989586621680149696"><span class="hs-identifier hs-var hs-var hs-var hs-var">inputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-type">Multiply</span></a></span><span> </span><span id="local-6989586621680149695"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149695"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680149694"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149694"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680149693"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149693"><span class="hs-identifier hs-var">_c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149695"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; Set v -&gt; Set v
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-operator hs-var">`union`</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149694"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-274"></span><span>    </span><span id="local-6989586621680149691"><span class="annot"><span class="annottext">outputs :: Multiply v x -&gt; Set v
</span><a href="#local-6989586621680149691"><span class="hs-identifier hs-var hs-var hs-var hs-var">outputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-type">Multiply</span></a></span><span> </span><span id="local-6989586621680149690"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149690"><span class="hs-identifier hs-var">_a</span></a></span></span><span> </span><span id="local-6989586621680149689"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149689"><span class="hs-identifier hs-var">_b</span></a></span></span><span> </span><span id="local-6989586621680149688"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149688"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149688"><span class="hs-identifier hs-var">c</span></a></span></span></span><span>
</span><span id="line-275"></span><span id="local-6989586621680150732"><span id="local-6989586621680150733"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150733"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-type">Multiply</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150733"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150732"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680150733"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680150733"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-276"></span><span>    </span><span id="local-6989586621680149680"><span class="annot"><span class="annottext">patch :: (v, v) -&gt; Multiply v x -&gt; Multiply v x
</span><a href="#local-6989586621680149680"><span class="hs-identifier hs-var hs-var hs-var hs-var">patch</span></a></span></span><span> </span><span id="local-6989586621680149679"><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149679"><span class="hs-identifier hs-var">diff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-type">Multiply</span></a></span><span> </span><span id="local-6989586621680149678"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149678"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680149677"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149677"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680149676"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149676"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; I v -&gt; O v -&gt; Multiply v x
forall v x. I v -&gt; I v -&gt; O v -&gt; Multiply v x
</span><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-var">Multiply</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149679"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149678"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149679"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149677"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; O v -&gt; O v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149679"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149676"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-277"></span><span id="local-6989586621680150734"><span id="local-6989586621680150735"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150735"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Locks"><span class="hs-identifier hs-type">Locks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-type">Multiply</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150735"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150734"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150735"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-278"></span><span>    </span><span id="local-6989586621680149670"><span class="annot"><span class="annottext">locks :: Multiply v x -&gt; [Lock v]
</span><a href="#local-6989586621680149670"><span class="hs-identifier hs-var hs-var hs-var hs-var">locks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Multiply v x -&gt; [Lock v]
forall {f} {v}. Function f v =&gt; f -&gt; [Lock v]
</span><a href="NITTA.Intermediate.Types.html#inputsLockOutputs"><span class="hs-identifier hs-var">inputsLockOutputs</span></a></span></span></span><span>
</span><span id="line-279"></span><span id="local-6989586621680150736"><span id="local-6989586621680150737"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150737"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="annot"><a href="#local-6989586621680150736"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#FunctionSimulation"><span class="hs-identifier hs-type">FunctionSimulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-type">Multiply</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150737"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150736"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150737"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150736"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-280"></span><span>    </span><span id="local-6989586621680149655"><span class="annot"><span class="annottext">simulate :: CycleCntx v x -&gt; Multiply v x -&gt; [(v, x)]
</span><a href="#local-6989586621680149655"><span class="hs-identifier hs-var hs-var hs-var hs-var">simulate</span></a></span></span><span> </span><span id="local-6989586621680149654"><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680149654"><span class="hs-identifier hs-var">cntx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-type">Multiply</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span id="local-6989586621680149653"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149653"><span class="hs-identifier hs-var">v1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span id="local-6989586621680149652"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149652"><span class="hs-identifier hs-var">v2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span id="local-6989586621680149651"><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680149651"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-281"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680149650"><span class="annot"><span class="annottext">x1 :: x
</span><a href="#local-6989586621680149650"><span class="hs-identifier hs-var hs-var">x1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680149654"><span class="hs-identifier hs-var">cntx</span></a></span><span> </span><span class="annot"><span class="annottext">CycleCntx v x -&gt; v -&gt; x
forall {a} {v}.
(Eq a, Hashable a, ToString a) =&gt;
CycleCntx a v -&gt; a -&gt; v
</span><a href="NITTA.Intermediate.Types.html#getCntx"><span class="hs-operator hs-var">`getCntx`</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149653"><span class="hs-identifier hs-var">v1</span></a></span><span>
</span><span id="line-282"></span><span>            </span><span id="local-6989586621680149649"><span class="annot"><span class="annottext">x2 :: x
</span><a href="#local-6989586621680149649"><span class="hs-identifier hs-var hs-var">x2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680149654"><span class="hs-identifier hs-var">cntx</span></a></span><span> </span><span class="annot"><span class="annottext">CycleCntx v x -&gt; v -&gt; x
forall {a} {v}.
(Eq a, Hashable a, ToString a) =&gt;
CycleCntx a v -&gt; a -&gt; v
</span><a href="NITTA.Intermediate.Types.html#getCntx"><span class="hs-operator hs-var">`getCntx`</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149652"><span class="hs-identifier hs-var">v2</span></a></span><span>
</span><span id="line-283"></span><span>            </span><span id="local-6989586621680149648"><span class="annot"><span class="annottext">y :: x
</span><a href="#local-6989586621680149648"><span class="hs-identifier hs-var hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680149650"><span class="hs-identifier hs-var">x1</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; x -&gt; x
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680149649"><span class="hs-identifier hs-var">x2</span></a></span><span>
</span><span id="line-284"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149646"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680149648"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680149646"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149646"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; [v]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680149651"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-285"></span><span>
</span><span id="line-286"></span><span class="hs-keyword">data</span><span> </span><span id="Division"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-var">Division</span></a></span></span><span> </span><span id="local-6989586621680150723"><span class="annot"><a href="#local-6989586621680150723"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621680150722"><span class="annot"><a href="#local-6989586621680150722"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Division"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-var">Division</span></a></span></span><span>
</span><span id="line-287"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Adenom%3ADivision"><span class="annot"><span class="annottext">forall v x. Division v x -&gt; I v
</span><a href="NITTA.Intermediate.Functions.html#%24sel%3Adenom%3ADivision"><span class="hs-identifier hs-var hs-var">denom</span></a></span></span><span class="hs-special">,</span><span> </span><span id="%24sel%3Anumer%3ADivision"><span class="annot"><span class="annottext">forall v x. Division v x -&gt; I v
</span><a href="NITTA.Intermediate.Functions.html#%24sel%3Anumer%3ADivision"><span class="hs-identifier hs-var hs-var">numer</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150723"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-288"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Aquotient%3ADivision"><span class="annot"><span class="annottext">forall v x. Division v x -&gt; O v
</span><a href="NITTA.Intermediate.Functions.html#%24sel%3Aquotient%3ADivision"><span class="hs-identifier hs-var hs-var">quotient</span></a></span></span><span class="hs-special">,</span><span> </span><span id="%24sel%3Aremain%3ADivision"><span class="annot"><span class="annottext">forall v x. Division v x -&gt; O v
</span><a href="NITTA.Intermediate.Functions.html#%24sel%3Aremain%3ADivision"><span class="hs-identifier hs-var hs-var">remain</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150723"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-289"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-290"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680149633"><span id="local-6989586621680149639"><span class="annot"><span class="annottext">Division v x -&gt; Division v x -&gt; Bool
(Division v x -&gt; Division v x -&gt; Bool)
-&gt; (Division v x -&gt; Division v x -&gt; Bool) -&gt; Eq (Division v x)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall v x. Eq v =&gt; Division v x -&gt; Division v x -&gt; Bool
/= :: Division v x -&gt; Division v x -&gt; Bool
$c/= :: forall v x. Eq v =&gt; Division v x -&gt; Division v x -&gt; Bool
== :: Division v x -&gt; Division v x -&gt; Bool
$c== :: forall v x. Eq v =&gt; Division v x -&gt; Division v x -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-291"></span><span id="local-6989586621680150710"><span id="local-6989586621680150711"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-type">Division</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150711"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150710"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680149630"><span class="annot"><span class="annottext">label :: Division v x -&gt; String
</span><a href="#local-6989586621680149630"><span class="hs-keyword hs-var hs-var hs-var hs-var">label</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-type">Division</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;/&quot;</span></span></span></span><span>
</span><span id="line-292"></span><span id="local-6989586621680150708"><span id="local-6989586621680150709"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680149625"><span id="local-6989586621680149628"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150709"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-type">Division</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150709"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150708"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-293"></span><span>    </span><span id="local-6989586621680149608"><span class="annot"><span class="annottext">show :: Division v x -&gt; String
</span><a href="#local-6989586621680149608"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-type">Division</span></a></span><span class="hs-special">{</span><span id="local-6989586621680149607"><span class="annot"><span class="annottext">I v
denom :: I v
$sel:denom:Division :: forall v x. Division v x -&gt; I v
</span><a href="#local-6989586621680149607"><span class="hs-identifier hs-var hs-var">denom</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680149606"><span class="annot"><span class="annottext">I v
numer :: I v
$sel:numer:Division :: forall v x. Division v x -&gt; I v
</span><a href="#local-6989586621680149606"><span class="hs-identifier hs-var hs-var">numer</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680149605"><span class="annot"><span class="annottext">O v
quotient :: O v
$sel:quotient:Division :: forall v x. Division v x -&gt; O v
</span><a href="#local-6989586621680149605"><span class="hs-identifier hs-var hs-var">quotient</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680149604"><span class="annot"><span class="annottext">O v
remain :: O v
$sel:remain:Division :: forall v x. Division v x -&gt; O v
</span><a href="#local-6989586621680149604"><span class="hs-identifier hs-var hs-var">remain</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-294"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680149603"><span class="annot"><span class="annottext">q :: String
</span><a href="#local-6989586621680149603"><span class="hs-identifier hs-var hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149606"><span class="hs-identifier hs-var">numer</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; / &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149607"><span class="hs-identifier hs-var">denom</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">O v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149605"><span class="hs-identifier hs-var">quotient</span></a></span><span>
</span><span id="line-295"></span><span>            </span><span id="local-6989586621680149602"><span class="annot"><span class="annottext">r :: String
</span><a href="#local-6989586621680149602"><span class="hs-identifier hs-var hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149606"><span class="hs-identifier hs-var">numer</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; mod &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149607"><span class="hs-identifier hs-var">denom</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">O v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149604"><span class="hs-identifier hs-var">remain</span></a></span><span>
</span><span id="line-296"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680149603"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;; &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680149602"><span class="hs-identifier hs-var">r</span></a></span></span></span><span>
</span><span id="line-297"></span><span id="local-6989586621680150706"><span id="local-6989586621680150707"><span class="annot"><a href="NITTA.Intermediate.Functions.html#division"><span class="hs-identifier hs-type">division</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150707"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Value.html#Val"><span class="hs-identifier hs-type">Val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150706"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680150707"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680150707"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680150707"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680150707"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#F"><span class="hs-identifier hs-type">F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150707"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150706"><span class="hs-identifier hs-type">x</span></a></span></span></span><span>
</span><span id="line-298"></span><span id="division"><span class="annot"><span class="annottext">division :: forall v x. (Var v, Val x) =&gt; v -&gt; v -&gt; [v] -&gt; [v] -&gt; F v x
</span><a href="NITTA.Intermediate.Functions.html#division"><span class="hs-identifier hs-var hs-var">division</span></a></span></span><span> </span><span id="local-6989586621680149579"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149579"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621680149578"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149578"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680149577"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680149577"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span id="local-6989586621680149576"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680149576"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-299"></span><span>    </span><span class="annot"><span class="annottext">Division v x -&gt; F v x
forall {f} {v} {x}.
(Function f v, Patch f (v, v), Locks f v, Show f, Label f,
 FunctionSimulation f v x, Typeable f, Eq f) =&gt;
f -&gt; F v x
</span><a href="NITTA.Intermediate.Types.html#packF"><span class="hs-identifier hs-var">packF</span></a></span><span> </span><span class="annot"><span class="annottext">(Division v x -&gt; F v x) -&gt; Division v x -&gt; F v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-300"></span><span>        </span><span class="annot"><span class="annottext">Division :: forall v x. I v -&gt; I v -&gt; O v -&gt; O v -&gt; Division v x
</span><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-type">Division</span></a></span><span>
</span><span id="line-301"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:denom:Division :: I v
</span><a href="NITTA.Intermediate.Functions.html#%24sel%3Adenom%3ADivision"><span class="hs-identifier hs-var">denom</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">v -&gt; I v
forall v. v -&gt; I v
</span><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-var">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149579"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-302"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:numer:Division :: I v
</span><a href="NITTA.Intermediate.Functions.html#%24sel%3Anumer%3ADivision"><span class="hs-identifier hs-var">numer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">v -&gt; I v
forall v. v -&gt; I v
</span><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-var">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149578"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-303"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:quotient:Division :: O v
</span><a href="NITTA.Intermediate.Functions.html#%24sel%3Aquotient%3ADivision"><span class="hs-identifier hs-var">quotient</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; O v
forall v. Set v -&gt; O v
</span><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-var">O</span></a></span><span> </span><span class="annot"><span class="annottext">(Set v -&gt; O v) -&gt; Set v -&gt; O v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Set v
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680149577"><span class="hs-identifier hs-var">q</span></a></span><span>
</span><span id="line-304"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:remain:Division :: O v
</span><a href="NITTA.Intermediate.Functions.html#%24sel%3Aremain%3ADivision"><span class="hs-identifier hs-var">remain</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; O v
forall v. Set v -&gt; O v
</span><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-var">O</span></a></span><span> </span><span class="annot"><span class="annottext">(Set v -&gt; O v) -&gt; Set v -&gt; O v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Set v
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680149576"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-305"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-306"></span><span>
</span><span id="line-307"></span><span id="local-6989586621680150696"><span id="local-6989586621680150697"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680149572"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150697"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-type">Division</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150697"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150696"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150697"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-308"></span><span>    </span><span id="local-6989586621680149568"><span class="annot"><span class="annottext">inputs :: Division v x -&gt; Set v
</span><a href="#local-6989586621680149568"><span class="hs-identifier hs-var hs-var hs-var hs-var">inputs</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-type">Division</span></a></span><span class="hs-special">{</span><span id="local-6989586621680149567"><span class="annot"><span class="annottext">I v
denom :: I v
$sel:denom:Division :: forall v x. Division v x -&gt; I v
</span><a href="#local-6989586621680149567"><span class="hs-identifier hs-var hs-var">denom</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680149566"><span class="annot"><span class="annottext">I v
numer :: I v
$sel:numer:Division :: forall v x. Division v x -&gt; I v
</span><a href="#local-6989586621680149566"><span class="hs-identifier hs-var hs-var">numer</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149567"><span class="hs-identifier hs-var">denom</span></a></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; Set v -&gt; Set v
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-operator hs-var">`union`</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149566"><span class="hs-identifier hs-var">numer</span></a></span><span>
</span><span id="line-309"></span><span>    </span><span id="local-6989586621680149562"><span class="annot"><span class="annottext">outputs :: Division v x -&gt; Set v
</span><a href="#local-6989586621680149562"><span class="hs-identifier hs-var hs-var hs-var hs-var">outputs</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-type">Division</span></a></span><span class="hs-special">{</span><span id="local-6989586621680149561"><span class="annot"><span class="annottext">O v
quotient :: O v
$sel:quotient:Division :: forall v x. Division v x -&gt; O v
</span><a href="#local-6989586621680149561"><span class="hs-identifier hs-var hs-var">quotient</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680149560"><span class="annot"><span class="annottext">O v
remain :: O v
$sel:remain:Division :: forall v x. Division v x -&gt; O v
</span><a href="#local-6989586621680149560"><span class="hs-identifier hs-var hs-var">remain</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149561"><span class="hs-identifier hs-var">quotient</span></a></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; Set v -&gt; Set v
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-operator hs-var">`union`</span></span><span> </span><span class="annot"><span class="annottext">O v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149560"><span class="hs-identifier hs-var">remain</span></a></span></span></span><span>
</span><span id="line-310"></span><span id="local-6989586621680150698"><span id="local-6989586621680150699"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150699"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-type">Division</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150699"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150698"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680150699"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680150699"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-311"></span><span>    </span><span id="local-6989586621680149551"><span class="annot"><span class="annottext">patch :: (v, v) -&gt; Division v x -&gt; Division v x
</span><a href="#local-6989586621680149551"><span class="hs-identifier hs-var hs-var hs-var hs-var">patch</span></a></span></span><span> </span><span id="local-6989586621680149550"><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149550"><span class="hs-identifier hs-var">diff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-type">Division</span></a></span><span> </span><span id="local-6989586621680149549"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149549"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680149548"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149548"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680149547"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149547"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621680149546"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149546"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; I v -&gt; O v -&gt; O v -&gt; Division v x
forall v x. I v -&gt; I v -&gt; O v -&gt; O v -&gt; Division v x
</span><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-var">Division</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149550"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149549"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149550"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149548"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; O v -&gt; O v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149550"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149547"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; O v -&gt; O v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149550"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149546"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-312"></span><span id="local-6989586621680150700"><span id="local-6989586621680150701"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150701"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Locks"><span class="hs-identifier hs-type">Locks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-type">Division</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150701"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150700"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150701"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-313"></span><span>    </span><span id="local-6989586621680149540"><span class="annot"><span class="annottext">locks :: Division v x -&gt; [Lock v]
</span><a href="#local-6989586621680149540"><span class="hs-identifier hs-var hs-var hs-var hs-var">locks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Division v x -&gt; [Lock v]
forall {f} {v}. Function f v =&gt; f -&gt; [Lock v]
</span><a href="NITTA.Intermediate.Types.html#inputsLockOutputs"><span class="hs-identifier hs-var">inputsLockOutputs</span></a></span></span></span><span>
</span><span id="line-314"></span><span id="local-6989586621680150702"><span id="local-6989586621680150703"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150703"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integral</span></span><span> </span><span class="annot"><a href="#local-6989586621680150702"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#FunctionSimulation"><span class="hs-identifier hs-type">FunctionSimulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-type">Division</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150703"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150702"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150703"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150702"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-315"></span><span>    </span><span id="local-6989586621680149525"><span class="annot"><span class="annottext">simulate :: CycleCntx v x -&gt; Division v x -&gt; [(v, x)]
</span><a href="#local-6989586621680149525"><span class="hs-identifier hs-var hs-var hs-var hs-var">simulate</span></a></span></span><span> </span><span id="local-6989586621680149524"><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680149524"><span class="hs-identifier hs-var">cntx</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-type">Division</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:denom:Division :: forall v x. Division v x -&gt; I v
</span><a href="NITTA.Intermediate.Functions.html#%24sel%3Adenom%3ADivision"><span class="hs-identifier hs-var">denom</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span id="local-6989586621680149523"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149523"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:numer:Division :: forall v x. Division v x -&gt; I v
</span><a href="NITTA.Intermediate.Functions.html#%24sel%3Anumer%3ADivision"><span class="hs-identifier hs-var">numer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span id="local-6989586621680149522"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149522"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:quotient:Division :: forall v x. Division v x -&gt; O v
</span><a href="NITTA.Intermediate.Functions.html#%24sel%3Aquotient%3ADivision"><span class="hs-identifier hs-var">quotient</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span id="local-6989586621680149521"><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680149521"><span class="hs-identifier hs-var">qs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:remain:Division :: forall v x. Division v x -&gt; O v
</span><a href="NITTA.Intermediate.Functions.html#%24sel%3Aremain%3ADivision"><span class="hs-identifier hs-var">remain</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span id="local-6989586621680149520"><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680149520"><span class="hs-identifier hs-var">rs</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-316"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680149519"><span class="annot"><span class="annottext">dx :: x
</span><a href="#local-6989586621680149519"><span class="hs-identifier hs-var hs-var">dx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680149524"><span class="hs-identifier hs-var">cntx</span></a></span><span> </span><span class="annot"><span class="annottext">CycleCntx v x -&gt; v -&gt; x
forall {a} {v}.
(Eq a, Hashable a, ToString a) =&gt;
CycleCntx a v -&gt; a -&gt; v
</span><a href="NITTA.Intermediate.Types.html#getCntx"><span class="hs-operator hs-var">`getCntx`</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149523"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-317"></span><span>            </span><span id="local-6989586621680149518"><span class="annot"><span class="annottext">nx :: x
</span><a href="#local-6989586621680149518"><span class="hs-identifier hs-var hs-var">nx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680149524"><span class="hs-identifier hs-var">cntx</span></a></span><span> </span><span class="annot"><span class="annottext">CycleCntx v x -&gt; v -&gt; x
forall {a} {v}.
(Eq a, Hashable a, ToString a) =&gt;
CycleCntx a v -&gt; a -&gt; v
</span><a href="NITTA.Intermediate.Types.html#getCntx"><span class="hs-operator hs-var">`getCntx`</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149522"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-318"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621680149517"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680149517"><span class="hs-identifier hs-var">qx</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680149516"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680149516"><span class="hs-identifier hs-var">rx</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680149519"><span class="hs-identifier hs-var">dx</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; x -&gt; (x, x)
forall a. Integral a =&gt; a -&gt; a -&gt; (a, a)
</span><span class="hs-operator hs-var">`quotRem`</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680149518"><span class="hs-identifier hs-var">nx</span></a></span><span>
</span><span id="line-319"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149514"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680149517"><span class="hs-identifier hs-var">qx</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680149514"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149514"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; [v]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680149521"><span class="hs-identifier hs-var">qs</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[(v, x)] -&gt; [(v, x)] -&gt; [(v, x)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149513"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680149516"><span class="hs-identifier hs-var">rx</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680149513"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149513"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; [v]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680149520"><span class="hs-identifier hs-var">rs</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-320"></span><span>
</span><span id="line-321"></span><span class="hs-keyword">data</span><span> </span><span id="Neg"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-var">Neg</span></a></span></span><span> </span><span id="local-6989586621680150688"><span class="annot"><a href="#local-6989586621680150688"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621680150687"><span class="annot"><a href="#local-6989586621680150687"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Neg"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-var">Neg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150688"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150688"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680149506"><span id="local-6989586621680149510"><span class="annot"><span class="annottext">Neg v x -&gt; Neg v x -&gt; Bool
(Neg v x -&gt; Neg v x -&gt; Bool)
-&gt; (Neg v x -&gt; Neg v x -&gt; Bool) -&gt; Eq (Neg v x)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall v x. Eq v =&gt; Neg v x -&gt; Neg v x -&gt; Bool
/= :: Neg v x -&gt; Neg v x -&gt; Bool
$c/= :: forall v x. Eq v =&gt; Neg v x -&gt; Neg v x -&gt; Bool
== :: Neg v x -&gt; Neg v x -&gt; Bool
$c== :: forall v x. Eq v =&gt; Neg v x -&gt; Neg v x -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-322"></span><span id="local-6989586621680150683"><span id="local-6989586621680150684"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-type">Neg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150684"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150683"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680149503"><span class="annot"><span class="annottext">label :: Neg v x -&gt; String
</span><a href="#local-6989586621680149503"><span class="hs-keyword hs-var hs-var hs-var hs-var">label</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-type">Neg</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;neg&quot;</span></span></span></span><span>
</span><span id="line-323"></span><span id="local-6989586621680150681"><span id="local-6989586621680150682"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680149498"><span id="local-6989586621680149501"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150682"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-type">Neg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150682"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150681"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-324"></span><span>    </span><span id="local-6989586621680149492"><span class="annot"><span class="annottext">show :: Neg v x -&gt; String
</span><a href="#local-6989586621680149492"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-type">Neg</span></a></span><span> </span><span id="local-6989586621680149491"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149491"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680149490"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149490"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149491"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">O v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149490"><span class="hs-identifier hs-var">o</span></a></span></span></span><span>
</span><span id="line-325"></span><span>
</span><span id="line-326"></span><span id="local-6989586621680149488"><span id="local-6989586621680149489"><span class="annot"><a href="NITTA.Intermediate.Functions.html#neg"><span class="hs-identifier hs-type">neg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680149489"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Value.html#Val"><span class="hs-identifier hs-type">Val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680149488"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680149489"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680149489"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#F"><span class="hs-identifier hs-type">F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680149489"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680149488"><span class="hs-identifier hs-type">x</span></a></span></span></span><span>
</span><span id="line-327"></span><span id="neg"><span class="annot"><span class="annottext">neg :: forall v x. (Var v, Val x) =&gt; v -&gt; [v] -&gt; F v x
</span><a href="NITTA.Intermediate.Functions.html#neg"><span class="hs-identifier hs-var hs-var">neg</span></a></span></span><span> </span><span id="local-6989586621680149464"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149464"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680149463"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680149463"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Neg v x -&gt; F v x
forall {f} {v} {x}.
(Function f v, Patch f (v, v), Locks f v, Show f, Label f,
 FunctionSimulation f v x, Typeable f, Eq f) =&gt;
f -&gt; F v x
</span><a href="NITTA.Intermediate.Types.html#packF"><span class="hs-identifier hs-var">packF</span></a></span><span> </span><span class="annot"><span class="annottext">(Neg v x -&gt; F v x) -&gt; Neg v x -&gt; F v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; O v -&gt; Neg v x
forall v x. I v -&gt; O v -&gt; Neg v x
</span><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-var">Neg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; I v
forall v. v -&gt; I v
</span><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-var">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149464"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(O v -&gt; Neg v x) -&gt; O v -&gt; Neg v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; O v
forall v. Set v -&gt; O v
</span><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-var">O</span></a></span><span> </span><span class="annot"><span class="annottext">(Set v -&gt; O v) -&gt; Set v -&gt; O v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Set v
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680149463"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-328"></span><span>
</span><span id="line-329"></span><span id="local-6989586621680150671"><span id="local-6989586621680150672"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680149459"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621680150672"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-type">Neg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150672"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150671"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150672"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-330"></span><span>    </span><span id="local-6989586621680149457"><span class="annot"><span class="annottext">inputs :: Neg v x -&gt; Set v
</span><a href="#local-6989586621680149457"><span class="hs-identifier hs-var hs-var hs-var hs-var">inputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-type">Neg</span></a></span><span> </span><span id="local-6989586621680149456"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149456"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="annot"><span class="annottext">O v
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149456"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-331"></span><span>    </span><span id="local-6989586621680149454"><span class="annot"><span class="annottext">outputs :: Neg v x -&gt; Set v
</span><a href="#local-6989586621680149454"><span class="hs-identifier hs-var hs-var hs-var hs-var">outputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-type">Neg</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680149453"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149453"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149453"><span class="hs-identifier hs-var">o</span></a></span></span></span><span>
</span><span id="line-332"></span><span id="local-6989586621680150673"><span id="local-6989586621680150674"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621680150674"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-type">Neg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150674"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150673"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680150674"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680150674"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-333"></span><span>    </span><span id="local-6989586621680149447"><span class="annot"><span class="annottext">patch :: (v, v) -&gt; Neg v x -&gt; Neg v x
</span><a href="#local-6989586621680149447"><span class="hs-identifier hs-var hs-var hs-var hs-var">patch</span></a></span></span><span> </span><span id="local-6989586621680149446"><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149446"><span class="hs-identifier hs-var">diff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-type">Neg</span></a></span><span> </span><span id="local-6989586621680149445"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149445"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680149444"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149444"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; O v -&gt; Neg v x
forall v x. I v -&gt; O v -&gt; Neg v x
</span><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-var">Neg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149446"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149445"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; O v -&gt; O v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149446"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149444"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-334"></span><span id="local-6989586621680150675"><span id="local-6989586621680150676"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150676"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Locks"><span class="hs-identifier hs-type">Locks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-type">Neg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150676"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150675"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150676"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-335"></span><span>    </span><span id="local-6989586621680149437"><span class="annot"><span class="annottext">locks :: Neg v x -&gt; [Lock v]
</span><a href="#local-6989586621680149437"><span class="hs-identifier hs-var hs-var hs-var hs-var">locks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Neg v x -&gt; [Lock v]
forall {f} {v}. Function f v =&gt; f -&gt; [Lock v]
</span><a href="NITTA.Intermediate.Types.html#inputsLockOutputs"><span class="hs-identifier hs-var">inputsLockOutputs</span></a></span></span></span><span>
</span><span id="line-336"></span><span id="local-6989586621680150677"><span id="local-6989586621680150678"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150678"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="annot"><a href="#local-6989586621680150677"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#FunctionSimulation"><span class="hs-identifier hs-type">FunctionSimulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-type">Neg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150678"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150677"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150678"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150677"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-337"></span><span>    </span><span id="local-6989586621680149425"><span class="annot"><span class="annottext">simulate :: CycleCntx v x -&gt; Neg v x -&gt; [(v, x)]
</span><a href="#local-6989586621680149425"><span class="hs-identifier hs-var hs-var hs-var hs-var">simulate</span></a></span></span><span> </span><span id="local-6989586621680149424"><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680149424"><span class="hs-identifier hs-var">cntx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-type">Neg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span id="local-6989586621680149423"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149423"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span id="local-6989586621680149422"><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680149422"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-338"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680149421"><span class="annot"><span class="annottext">x1 :: x
</span><a href="#local-6989586621680149421"><span class="hs-identifier hs-var hs-var">x1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680149424"><span class="hs-identifier hs-var">cntx</span></a></span><span> </span><span class="annot"><span class="annottext">CycleCntx v x -&gt; v -&gt; x
forall {a} {v}.
(Eq a, Hashable a, ToString a) =&gt;
CycleCntx a v -&gt; a -&gt; v
</span><a href="NITTA.Intermediate.Types.html#getCntx"><span class="hs-operator hs-var">`getCntx`</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149423"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-339"></span><span>            </span><span id="local-6989586621680149420"><span class="annot"><span class="annottext">y :: x
</span><a href="#local-6989586621680149420"><span class="hs-identifier hs-var hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680149421"><span class="hs-identifier hs-var">x1</span></a></span><span>
</span><span id="line-340"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149419"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680149420"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680149419"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149419"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; [v]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680149422"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-341"></span><span>
</span><span id="line-342"></span><span class="hs-keyword">data</span><span> </span><span id="Constant"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-var">Constant</span></a></span></span><span> </span><span id="local-6989586621680150663"><span class="annot"><a href="#local-6989586621680150663"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621680150664"><span class="annot"><a href="#local-6989586621680150664"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Constant"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-var">Constant</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#X"><span class="hs-identifier hs-type">X</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150664"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150663"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680149412"><span id="local-6989586621680149416"><span class="annot"><span class="annottext">Constant v x -&gt; Constant v x -&gt; Bool
(Constant v x -&gt; Constant v x -&gt; Bool)
-&gt; (Constant v x -&gt; Constant v x -&gt; Bool) -&gt; Eq (Constant v x)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall v x. (Eq x, Eq v) =&gt; Constant v x -&gt; Constant v x -&gt; Bool
/= :: Constant v x -&gt; Constant v x -&gt; Bool
$c/= :: forall v x. (Eq x, Eq v) =&gt; Constant v x -&gt; Constant v x -&gt; Bool
== :: Constant v x -&gt; Constant v x -&gt; Bool
$c== :: forall v x. (Eq x, Eq v) =&gt; Constant v x -&gt; Constant v x -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-343"></span><span id="local-6989586621680150659"><span id="local-6989586621680150660"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621680150660"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-type">Constant</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150659"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150660"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680149407"><span class="annot"><span class="annottext">label :: Constant v x -&gt; String
</span><a href="#local-6989586621680149407"><span class="hs-keyword hs-var hs-var hs-var hs-var">label</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-type">Constant</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#X"><span class="hs-identifier hs-type">X</span></a></span><span> </span><span id="local-6989586621680149406"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680149406"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">O v
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680149406"><span class="hs-identifier hs-var">x</span></a></span></span></span><span>
</span><span id="line-344"></span><span id="local-6989586621680150657"><span id="local-6989586621680150658"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680149401"><span id="local-6989586621680149404"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150658"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621680150657"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-type">Constant</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150658"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150657"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-345"></span><span>    </span><span id="local-6989586621680149395"><span class="annot"><span class="annottext">show :: Constant v x -&gt; String
</span><a href="#local-6989586621680149395"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-type">Constant</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#X"><span class="hs-identifier hs-type">X</span></a></span><span> </span><span id="local-6989586621680149394"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680149394"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680149393"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149393"><span class="hs-identifier hs-var">os</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;const(&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680149394"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;) = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">O v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149393"><span class="hs-identifier hs-var">os</span></a></span></span></span><span>
</span><span id="line-346"></span><span id="local-6989586621680150655"><span id="local-6989586621680150656"><span class="annot"><a href="NITTA.Intermediate.Functions.html#constant"><span class="hs-identifier hs-type">constant</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150656"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Value.html#Val"><span class="hs-identifier hs-type">Val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150655"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680150655"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680150656"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#F"><span class="hs-identifier hs-type">F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150656"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150655"><span class="hs-identifier hs-type">x</span></a></span></span></span><span>
</span><span id="line-347"></span><span id="constant"><span class="annot"><span class="annottext">constant :: forall v x. (Var v, Val x) =&gt; x -&gt; [v] -&gt; F v x
</span><a href="NITTA.Intermediate.Functions.html#constant"><span class="hs-identifier hs-var hs-var">constant</span></a></span></span><span> </span><span id="local-6989586621680149367"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680149367"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680149366"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680149366"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Constant v x -&gt; F v x
forall {f} {v} {x}.
(Function f v, Patch f (v, v), Locks f v, Show f, Label f,
 FunctionSimulation f v x, Typeable f, Eq f) =&gt;
f -&gt; F v x
</span><a href="NITTA.Intermediate.Types.html#packF"><span class="hs-identifier hs-var">packF</span></a></span><span> </span><span class="annot"><span class="annottext">(Constant v x -&gt; F v x) -&gt; Constant v x -&gt; F v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">X x -&gt; O v -&gt; Constant v x
forall v x. X x -&gt; O v -&gt; Constant v x
</span><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-var">Constant</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x -&gt; X x
forall x. x -&gt; X x
</span><a href="NITTA.Intermediate.Types.html#X"><span class="hs-identifier hs-var">X</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680149367"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(O v -&gt; Constant v x) -&gt; O v -&gt; Constant v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; O v
forall v. Set v -&gt; O v
</span><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-var">O</span></a></span><span> </span><span class="annot"><span class="annottext">(Set v -&gt; O v) -&gt; Set v -&gt; O v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Set v
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680149366"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-348"></span><span id="isConst"><span class="annot"><span class="annottext">isConst :: F v x -&gt; Bool
</span><a href="NITTA.Intermediate.Functions.html#isConst"><span class="hs-identifier hs-var hs-var">isConst</span></a></span></span><span> </span><span id="local-6989586621680149360"><span class="annot"><span class="annottext">F v x
</span><a href="#local-6989586621680149360"><span class="hs-identifier hs-var">f</span></a></span></span><span>
</span><span id="line-349"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-type">Constant</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F v x -&gt; Maybe (Constant v x)
forall (f :: * -&gt; * -&gt; *) v x.
(Typeable f, Typeable v, Typeable x) =&gt;
F v x -&gt; Maybe (f v x)
</span><a href="NITTA.Intermediate.Types.html#castF"><span class="hs-identifier hs-var">castF</span></a></span><span> </span><span class="annot"><span class="annottext">F v x
</span><a href="#local-6989586621680149360"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-350"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-351"></span><span>
</span><span id="line-352"></span><span id="local-6989586621680150645"><span id="local-6989586621680150646"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680149355"><span id="local-6989586621680149358"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621680150646"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621680150646"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621680150646"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-type">Constant</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150645"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150646"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150645"><span class="hs-identifier hs-type">v</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-353"></span><span>    </span><span id="local-6989586621680149353"><span class="annot"><span class="annottext">outputs :: Constant v x -&gt; Set v
</span><a href="#local-6989586621680149353"><span class="hs-identifier hs-var hs-var hs-var hs-var">outputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-type">Constant</span></a></span><span> </span><span class="annot"><span class="annottext">X x
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680149352"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149352"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149352"><span class="hs-identifier hs-var">o</span></a></span></span></span><span>
</span><span id="line-354"></span><span id="local-6989586621680150647"><span id="local-6989586621680150648"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150648"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-type">Constant</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150648"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150647"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680150648"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680150648"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-355"></span><span>    </span><span id="local-6989586621680149347"><span class="annot"><span class="annottext">patch :: (v, v) -&gt; Constant v x -&gt; Constant v x
</span><a href="#local-6989586621680149347"><span class="hs-identifier hs-var hs-var hs-var hs-var">patch</span></a></span></span><span> </span><span id="local-6989586621680149346"><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149346"><span class="hs-identifier hs-var">diff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-type">Constant</span></a></span><span> </span><span id="local-6989586621680149345"><span class="annot"><span class="annottext">X x
</span><a href="#local-6989586621680149345"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680149344"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149344"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">X x -&gt; O v -&gt; Constant v x
forall v x. X x -&gt; O v -&gt; Constant v x
</span><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-var">Constant</span></a></span><span> </span><span class="annot"><span class="annottext">X x
</span><a href="#local-6989586621680149345"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; O v -&gt; O v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149346"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149344"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-356"></span><span id="local-6989586621680150649"><span id="local-6989586621680150650"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150650"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Locks"><span class="hs-identifier hs-type">Locks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-type">Constant</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150650"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150649"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150650"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680149339"><span class="annot"><span class="annottext">locks :: Constant v x -&gt; [Lock v]
</span><a href="#local-6989586621680149339"><span class="hs-identifier hs-var hs-var hs-var hs-var">locks</span></a></span></span><span> </span><span class="annot"><span class="annottext">Constant v x
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span></span></span><span>
</span><span id="line-357"></span><span id="local-6989586621680150651"><span id="local-6989586621680150652"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#FunctionSimulation"><span class="hs-identifier hs-type">FunctionSimulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-type">Constant</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150652"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150651"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150652"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150651"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-358"></span><span>    </span><span id="local-6989586621680149337"><span class="annot"><span class="annottext">simulate :: CycleCntx v x -&gt; Constant v x -&gt; [(v, x)]
</span><a href="#local-6989586621680149337"><span class="hs-identifier hs-var hs-var hs-var hs-var">simulate</span></a></span></span><span> </span><span id="local-6989586621680149336"><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680149336"><span class="hs-identifier hs-var">_cntx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-type">Constant</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#X"><span class="hs-identifier hs-type">X</span></a></span><span> </span><span id="local-6989586621680149335"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680149335"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span id="local-6989586621680149334"><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680149334"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149333"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680149335"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680149333"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149333"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; [v]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680149334"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-359"></span><span>
</span><span id="line-360"></span><span class="hs-comment">-- TODO: separete into two different functions</span><span>
</span><span id="line-361"></span><span>
</span><span id="line-362"></span><span class="hs-comment">-- | Functional unit that implements logic shift operations</span><span>
</span><span id="line-363"></span><span class="hs-keyword">data</span><span> </span><span id="ShiftLR"><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftLR"><span class="hs-identifier hs-var">ShiftLR</span></a></span></span><span> </span><span id="local-6989586621680150636"><span class="annot"><a href="#local-6989586621680150636"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621680150635"><span class="annot"><a href="#local-6989586621680150635"><span class="hs-identifier hs-type">x</span></a></span></span><span>
</span><span id="line-364"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="ShiftL"><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftL"><span class="hs-identifier hs-var">ShiftL</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150636"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150636"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-365"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="ShiftR"><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftR"><span class="hs-identifier hs-var">ShiftR</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150636"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150636"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-366"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680149320"><span id="local-6989586621680149329"><span class="annot"><span class="annottext">ShiftLR v x -&gt; ShiftLR v x -&gt; Bool
(ShiftLR v x -&gt; ShiftLR v x -&gt; Bool)
-&gt; (ShiftLR v x -&gt; ShiftLR v x -&gt; Bool) -&gt; Eq (ShiftLR v x)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall v x. Eq v =&gt; ShiftLR v x -&gt; ShiftLR v x -&gt; Bool
/= :: ShiftLR v x -&gt; ShiftLR v x -&gt; Bool
$c/= :: forall v x. Eq v =&gt; ShiftLR v x -&gt; ShiftLR v x -&gt; Bool
== :: ShiftLR v x -&gt; ShiftLR v x -&gt; Bool
$c== :: forall v x. Eq v =&gt; ShiftLR v x -&gt; ShiftLR v x -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-367"></span><span>
</span><span id="line-368"></span><span id="local-6989586621680150633"><span id="local-6989586621680150634"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680149315"><span id="local-6989586621680149318"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150634"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftLR"><span class="hs-identifier hs-type">ShiftLR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150634"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150633"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-369"></span><span>    </span><span id="local-6989586621680149299"><span class="annot"><span class="annottext">show :: ShiftLR v x -&gt; String
</span><a href="#local-6989586621680149299"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftL"><span class="hs-identifier hs-type">ShiftL</span></a></span><span> </span><span id="local-6989586621680149298"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680149298"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621680149297"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149297"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680149296"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149296"><span class="hs-identifier hs-var">os</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149297"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; &lt;&lt; &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680149298"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">O v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149296"><span class="hs-identifier hs-var">os</span></a></span><span>
</span><span id="line-370"></span><span>    </span><span class="annot"><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftR"><span class="hs-identifier hs-type">ShiftR</span></a></span><span> </span><span id="local-6989586621680149295"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680149295"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621680149294"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149294"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680149293"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149293"><span class="hs-identifier hs-var">os</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149294"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; &gt;&gt; &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680149295"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">O v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149293"><span class="hs-identifier hs-var">os</span></a></span></span></span><span>
</span><span id="line-371"></span><span id="local-6989586621680150629"><span id="local-6989586621680150630"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150630"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftLR"><span class="hs-identifier hs-type">ShiftLR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150630"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150629"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680149288"><span class="annot"><span class="annottext">label :: ShiftLR v x -&gt; String
</span><a href="#local-6989586621680149288"><span class="hs-keyword hs-var hs-var hs-var hs-var">label</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShiftLR v x -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span></span></span><span>
</span><span id="line-372"></span><span>
</span><span id="line-373"></span><span id="local-6989586621680150627"><span id="local-6989586621680150628"><span class="annot"><a href="NITTA.Intermediate.Functions.html#shiftL"><span class="hs-identifier hs-type">shiftL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150628"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Value.html#Val"><span class="hs-identifier hs-type">Val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150627"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680150628"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680150628"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#F"><span class="hs-identifier hs-type">F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150628"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150627"><span class="hs-identifier hs-type">x</span></a></span></span></span><span>
</span><span id="line-374"></span><span id="shiftL"><span class="annot"><span class="annottext">shiftL :: forall v x. (Var v, Val x) =&gt; Int -&gt; v -&gt; [v] -&gt; F v x
</span><a href="NITTA.Intermediate.Functions.html#shiftL"><span class="hs-identifier hs-var hs-var">shiftL</span></a></span></span><span> </span><span id="local-6989586621680149265"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680149265"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621680149264"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149264"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680149263"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680149263"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShiftLR v x -&gt; F v x
forall {f} {v} {x}.
(Function f v, Patch f (v, v), Locks f v, Show f, Label f,
 FunctionSimulation f v x, Typeable f, Eq f) =&gt;
f -&gt; F v x
</span><a href="NITTA.Intermediate.Types.html#packF"><span class="hs-identifier hs-var">packF</span></a></span><span> </span><span class="annot"><span class="annottext">(ShiftLR v x -&gt; F v x) -&gt; ShiftLR v x -&gt; F v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; I v -&gt; O v -&gt; ShiftLR v x
forall v x. Int -&gt; I v -&gt; O v -&gt; ShiftLR v x
</span><a href="NITTA.Intermediate.Functions.html#ShiftL"><span class="hs-identifier hs-var">ShiftL</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680149265"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; I v
forall v. v -&gt; I v
</span><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-var">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149264"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(O v -&gt; ShiftLR v x) -&gt; O v -&gt; ShiftLR v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; O v
forall v. Set v -&gt; O v
</span><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-var">O</span></a></span><span> </span><span class="annot"><span class="annottext">(Set v -&gt; O v) -&gt; Set v -&gt; O v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Set v
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680149263"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-375"></span><span id="local-6989586621680149261"><span id="local-6989586621680149262"><span class="annot"><a href="NITTA.Intermediate.Functions.html#shiftR"><span class="hs-identifier hs-type">shiftR</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680149262"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Value.html#Val"><span class="hs-identifier hs-type">Val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680149261"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680149262"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680149262"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#F"><span class="hs-identifier hs-type">F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680149262"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680149261"><span class="hs-identifier hs-type">x</span></a></span></span></span><span>
</span><span id="line-376"></span><span id="shiftR"><span class="annot"><span class="annottext">shiftR :: forall v x. (Var v, Val x) =&gt; Int -&gt; v -&gt; [v] -&gt; F v x
</span><a href="NITTA.Intermediate.Functions.html#shiftR"><span class="hs-identifier hs-var hs-var">shiftR</span></a></span></span><span> </span><span id="local-6989586621680149242"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680149242"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621680149241"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149241"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680149240"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680149240"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShiftLR v x -&gt; F v x
forall {f} {v} {x}.
(Function f v, Patch f (v, v), Locks f v, Show f, Label f,
 FunctionSimulation f v x, Typeable f, Eq f) =&gt;
f -&gt; F v x
</span><a href="NITTA.Intermediate.Types.html#packF"><span class="hs-identifier hs-var">packF</span></a></span><span> </span><span class="annot"><span class="annottext">(ShiftLR v x -&gt; F v x) -&gt; ShiftLR v x -&gt; F v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; I v -&gt; O v -&gt; ShiftLR v x
forall v x. Int -&gt; I v -&gt; O v -&gt; ShiftLR v x
</span><a href="NITTA.Intermediate.Functions.html#ShiftR"><span class="hs-identifier hs-var">ShiftR</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680149242"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; I v
forall v. v -&gt; I v
</span><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-var">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149241"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(O v -&gt; ShiftLR v x) -&gt; O v -&gt; ShiftLR v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; O v
forall v. Set v -&gt; O v
</span><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-var">O</span></a></span><span> </span><span class="annot"><span class="annottext">(Set v -&gt; O v) -&gt; Set v -&gt; O v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Set v
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680149240"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-377"></span><span>
</span><span id="line-378"></span><span id="local-6989586621680150616"><span id="local-6989586621680150617"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680149236"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150617"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftLR"><span class="hs-identifier hs-type">ShiftLR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150617"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150616"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150617"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-379"></span><span>    </span><span id="local-6989586621680149233"><span class="annot"><span class="annottext">inputs :: ShiftLR v x -&gt; Set v
</span><a href="#local-6989586621680149233"><span class="hs-identifier hs-var hs-var hs-var hs-var">inputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftL"><span class="hs-identifier hs-type">ShiftL</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680149232"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149232"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="annot"><span class="annottext">O v
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149232"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-380"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Types.html#inputs"><span class="hs-identifier hs-var">inputs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftR"><span class="hs-identifier hs-type">ShiftR</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680149231"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149231"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="annot"><span class="annottext">O v
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149231"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-381"></span><span>    </span><span id="local-6989586621680149228"><span class="annot"><span class="annottext">outputs :: ShiftLR v x -&gt; Set v
</span><a href="#local-6989586621680149228"><span class="hs-identifier hs-var hs-var hs-var hs-var">outputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftL"><span class="hs-identifier hs-type">ShiftL</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680149227"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149227"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149227"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-382"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Types.html#outputs"><span class="hs-identifier hs-var">outputs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftR"><span class="hs-identifier hs-type">ShiftR</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680149226"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149226"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149226"><span class="hs-identifier hs-var">o</span></a></span></span></span><span>
</span><span id="line-383"></span><span id="local-6989586621680150618"><span id="local-6989586621680150619"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150619"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftLR"><span class="hs-identifier hs-type">ShiftLR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150619"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150618"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680150619"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680150619"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-384"></span><span>    </span><span id="local-6989586621680149217"><span class="annot"><span class="annottext">patch :: (v, v) -&gt; ShiftLR v x -&gt; ShiftLR v x
</span><a href="#local-6989586621680149217"><span class="hs-identifier hs-var hs-var hs-var hs-var">patch</span></a></span></span><span> </span><span id="local-6989586621680149216"><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149216"><span class="hs-identifier hs-var">diff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftL"><span class="hs-identifier hs-type">ShiftL</span></a></span><span> </span><span id="local-6989586621680149215"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680149215"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621680149214"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149214"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680149213"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149213"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; I v -&gt; O v -&gt; ShiftLR v x
forall v x. Int -&gt; I v -&gt; O v -&gt; ShiftLR v x
</span><a href="NITTA.Intermediate.Functions.html#ShiftL"><span class="hs-identifier hs-var">ShiftL</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680149215"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149216"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149214"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; O v -&gt; O v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149216"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149213"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-385"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span id="local-6989586621680149212"><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149212"><span class="hs-identifier hs-var">diff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftR"><span class="hs-identifier hs-type">ShiftR</span></a></span><span> </span><span id="local-6989586621680149211"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680149211"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621680149210"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149210"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680149209"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149209"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; I v -&gt; O v -&gt; ShiftLR v x
forall v x. Int -&gt; I v -&gt; O v -&gt; ShiftLR v x
</span><a href="NITTA.Intermediate.Functions.html#ShiftR"><span class="hs-identifier hs-var">ShiftR</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680149211"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149212"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149210"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; O v -&gt; O v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149212"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149209"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-386"></span><span id="local-6989586621680150620"><span id="local-6989586621680150621"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150621"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Locks"><span class="hs-identifier hs-type">Locks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftLR"><span class="hs-identifier hs-type">ShiftLR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150621"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150620"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150621"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-387"></span><span>    </span><span id="local-6989586621680149203"><span class="annot"><span class="annottext">locks :: ShiftLR v x -&gt; [Lock v]
</span><a href="#local-6989586621680149203"><span class="hs-identifier hs-var hs-var hs-var hs-var">locks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShiftLR v x -&gt; [Lock v]
forall {f} {v}. Function f v =&gt; f -&gt; [Lock v]
</span><a href="NITTA.Intermediate.Types.html#inputsLockOutputs"><span class="hs-identifier hs-var">inputsLockOutputs</span></a></span></span></span><span>
</span><span id="line-388"></span><span id="local-6989586621680150622"><span id="local-6989586621680150623"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150623"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">B.Bits</span></span><span> </span><span class="annot"><a href="#local-6989586621680150622"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#FunctionSimulation"><span class="hs-identifier hs-type">FunctionSimulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftLR"><span class="hs-identifier hs-type">ShiftLR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150623"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150622"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150623"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150622"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-389"></span><span>    </span><span id="local-6989586621680149187"><span class="annot"><span class="annottext">simulate :: CycleCntx v x -&gt; ShiftLR v x -&gt; [(v, x)]
</span><a href="#local-6989586621680149187"><span class="hs-identifier hs-var hs-var hs-var hs-var">simulate</span></a></span></span><span> </span><span id="local-6989586621680149186"><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680149186"><span class="hs-identifier hs-var">cntx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftL"><span class="hs-identifier hs-type">ShiftL</span></a></span><span> </span><span id="local-6989586621680149185"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680149185"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span id="local-6989586621680149184"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149184"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span id="local-6989586621680149183"><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680149183"><span class="hs-identifier hs-var">os</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-390"></span><span>        </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149182"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CycleCntx v x -&gt; v -&gt; x
forall {a} {v}.
(Eq a, Hashable a, ToString a) =&gt;
CycleCntx a v -&gt; a -&gt; v
</span><a href="NITTA.Intermediate.Types.html#getCntx"><span class="hs-identifier hs-var">getCntx</span></a></span><span> </span><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680149186"><span class="hs-identifier hs-var">cntx</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149184"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; Int -&gt; x
forall a. Bits a =&gt; a -&gt; Int -&gt; a
</span><span class="hs-operator hs-var">`B.shiftL`</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680149185"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680149182"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149182"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; [v]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680149183"><span class="hs-identifier hs-var">os</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-391"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Types.html#simulate"><span class="hs-identifier hs-var">simulate</span></a></span><span> </span><span id="local-6989586621680149180"><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680149180"><span class="hs-identifier hs-var">cntx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftR"><span class="hs-identifier hs-type">ShiftR</span></a></span><span> </span><span id="local-6989586621680149179"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680149179"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span id="local-6989586621680149178"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149178"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span id="local-6989586621680149177"><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680149177"><span class="hs-identifier hs-var">os</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-392"></span><span>        </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149176"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CycleCntx v x -&gt; v -&gt; x
forall {a} {v}.
(Eq a, Hashable a, ToString a) =&gt;
CycleCntx a v -&gt; a -&gt; v
</span><a href="NITTA.Intermediate.Types.html#getCntx"><span class="hs-identifier hs-var">getCntx</span></a></span><span> </span><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680149180"><span class="hs-identifier hs-var">cntx</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149178"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; Int -&gt; x
forall a. Bits a =&gt; a -&gt; Int -&gt; a
</span><span class="hs-operator hs-var">`B.shiftR`</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680149179"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680149176"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149176"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; [v]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680149177"><span class="hs-identifier hs-var">os</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-393"></span><span>
</span><span id="line-394"></span><span class="hs-keyword">newtype</span><span> </span><span id="Send"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier hs-var">Send</span></a></span></span><span> </span><span id="local-6989586621680150604"><span class="annot"><a href="#local-6989586621680150604"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621680150603"><span class="annot"><a href="#local-6989586621680150603"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Send"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier hs-var">Send</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150604"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680149167"><span id="local-6989586621680149171"><span class="annot"><span class="annottext">Send v x -&gt; Send v x -&gt; Bool
(Send v x -&gt; Send v x -&gt; Bool)
-&gt; (Send v x -&gt; Send v x -&gt; Bool) -&gt; Eq (Send v x)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall v x. Eq v =&gt; Send v x -&gt; Send v x -&gt; Bool
/= :: Send v x -&gt; Send v x -&gt; Bool
$c/= :: forall v x. Eq v =&gt; Send v x -&gt; Send v x -&gt; Bool
== :: Send v x -&gt; Send v x -&gt; Bool
$c== :: forall v x. Eq v =&gt; Send v x -&gt; Send v x -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-395"></span><span id="local-6989586621680150601"><span id="local-6989586621680150602"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680149159"><span id="local-6989586621680149162"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150602"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier hs-type">Send</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150602"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150601"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-396"></span><span>    </span><span id="local-6989586621680149155"><span class="annot"><span class="annottext">show :: Send v x -&gt; String
</span><a href="#local-6989586621680149155"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier hs-type">Send</span></a></span><span> </span><span id="local-6989586621680149154"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149154"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;send(&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149154"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;)&quot;</span></span></span></span><span>
</span><span id="line-397"></span><span id="local-6989586621680150597"><span id="local-6989586621680150598"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier hs-type">Send</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150598"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150597"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680149151"><span class="annot"><span class="annottext">label :: Send v x -&gt; String
</span><a href="#local-6989586621680149151"><span class="hs-keyword hs-var hs-var hs-var hs-var">label</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier hs-type">Send</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;send&quot;</span></span></span></span><span>
</span><span id="line-398"></span><span id="local-6989586621680150595"><span id="local-6989586621680150596"><span class="annot"><a href="NITTA.Intermediate.Functions.html#send"><span class="hs-identifier hs-type">send</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150596"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Value.html#Val"><span class="hs-identifier hs-type">Val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150595"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680150596"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#F"><span class="hs-identifier hs-type">F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150596"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150595"><span class="hs-identifier hs-type">x</span></a></span></span></span><span>
</span><span id="line-399"></span><span id="send"><span class="annot"><span class="annottext">send :: forall v x. (Var v, Val x) =&gt; v -&gt; F v x
</span><a href="NITTA.Intermediate.Functions.html#send"><span class="hs-identifier hs-var hs-var">send</span></a></span></span><span> </span><span id="local-6989586621680149131"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149131"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Send v x -&gt; F v x
forall {f} {v} {x}.
(Function f v, Patch f (v, v), Locks f v, Show f, Label f,
 FunctionSimulation f v x, Typeable f, Eq f) =&gt;
f -&gt; F v x
</span><a href="NITTA.Intermediate.Types.html#packF"><span class="hs-identifier hs-var">packF</span></a></span><span> </span><span class="annot"><span class="annottext">(Send v x -&gt; F v x) -&gt; Send v x -&gt; F v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; Send v x
forall v x. I v -&gt; Send v x
</span><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier hs-var">Send</span></a></span><span> </span><span class="annot"><span class="annottext">(I v -&gt; Send v x) -&gt; I v -&gt; Send v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">v -&gt; I v
forall v. v -&gt; I v
</span><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-var">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149131"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-400"></span><span id="local-6989586621680150585"><span id="local-6989586621680150586"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680149126"><span id="local-6989586621680149128"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150586"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier hs-type">Send</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150586"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150585"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150586"><span class="hs-identifier hs-type">v</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-401"></span><span>    </span><span id="local-6989586621680149124"><span class="annot"><span class="annottext">inputs :: Send v x -&gt; Set v
</span><a href="#local-6989586621680149124"><span class="hs-identifier hs-var hs-var hs-var hs-var">inputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier hs-type">Send</span></a></span><span> </span><span id="local-6989586621680149123"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149123"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149123"><span class="hs-identifier hs-var">i</span></a></span></span></span><span>
</span><span id="line-402"></span><span id="local-6989586621680150587"><span id="local-6989586621680150588"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150588"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier hs-type">Send</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150588"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150587"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680150588"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680150588"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-403"></span><span>    </span><span id="local-6989586621680149117"><span class="annot"><span class="annottext">patch :: (v, v) -&gt; Send v x -&gt; Send v x
</span><a href="#local-6989586621680149117"><span class="hs-identifier hs-var hs-var hs-var hs-var">patch</span></a></span></span><span> </span><span id="local-6989586621680149116"><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149116"><span class="hs-identifier hs-var">diff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier hs-type">Send</span></a></span><span> </span><span id="local-6989586621680149115"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149115"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; Send v x
forall v x. I v -&gt; Send v x
</span><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier hs-var">Send</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149116"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149115"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-404"></span><span id="local-6989586621680150589"><span id="local-6989586621680150590"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150590"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Locks"><span class="hs-identifier hs-type">Locks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier hs-type">Send</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150590"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150589"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150590"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680149110"><span class="annot"><span class="annottext">locks :: Send v x -&gt; [Lock v]
</span><a href="#local-6989586621680149110"><span class="hs-identifier hs-var hs-var hs-var hs-var">locks</span></a></span></span><span> </span><span class="annot"><span class="annottext">Send v x
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span></span></span><span>
</span><span id="line-405"></span><span id="local-6989586621680150591"><span id="local-6989586621680150592"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#FunctionSimulation"><span class="hs-identifier hs-type">FunctionSimulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier hs-type">Send</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150592"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150591"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150592"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150591"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-406"></span><span>    </span><span id="local-6989586621680149108"><span class="annot"><span class="annottext">simulate :: CycleCntx v x -&gt; Send v x -&gt; [(v, x)]
</span><a href="#local-6989586621680149108"><span class="hs-identifier hs-var hs-var hs-var hs-var">simulate</span></a></span></span><span> </span><span id="local-6989586621680149107"><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680149107"><span class="hs-identifier hs-var">_cntx</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier hs-type">Send</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span></span></span><span>
</span><span id="line-407"></span><span>
</span><span id="line-408"></span><span class="hs-keyword">newtype</span><span> </span><span id="Receive"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier hs-var">Receive</span></a></span></span><span> </span><span id="local-6989586621680150576"><span class="annot"><a href="#local-6989586621680150576"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621680150575"><span class="annot"><a href="#local-6989586621680150575"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Receive"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier hs-var">Receive</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150576"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680149099"><span id="local-6989586621680149103"><span class="annot"><span class="annottext">Receive v x -&gt; Receive v x -&gt; Bool
(Receive v x -&gt; Receive v x -&gt; Bool)
-&gt; (Receive v x -&gt; Receive v x -&gt; Bool) -&gt; Eq (Receive v x)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall v x. Eq v =&gt; Receive v x -&gt; Receive v x -&gt; Bool
/= :: Receive v x -&gt; Receive v x -&gt; Bool
$c/= :: forall v x. Eq v =&gt; Receive v x -&gt; Receive v x -&gt; Bool
== :: Receive v x -&gt; Receive v x -&gt; Bool
$c== :: forall v x. Eq v =&gt; Receive v x -&gt; Receive v x -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-409"></span><span id="local-6989586621680150573"><span id="local-6989586621680150574"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680149091"><span id="local-6989586621680149094"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150574"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier hs-type">Receive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150574"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150573"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-410"></span><span>    </span><span id="local-6989586621680149088"><span class="annot"><span class="annottext">show :: Receive v x -&gt; String
</span><a href="#local-6989586621680149088"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier hs-type">Receive</span></a></span><span> </span><span id="local-6989586621680149087"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149087"><span class="hs-identifier hs-var">os</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;receive() = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">O v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149087"><span class="hs-identifier hs-var">os</span></a></span></span></span><span>
</span><span id="line-411"></span><span id="local-6989586621680150569"><span id="local-6989586621680150570"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier hs-type">Receive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150570"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150569"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680149084"><span class="annot"><span class="annottext">label :: Receive v x -&gt; String
</span><a href="#local-6989586621680149084"><span class="hs-keyword hs-var hs-var hs-var hs-var">label</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier hs-type">Receive</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;receive&quot;</span></span></span></span><span>
</span><span id="line-412"></span><span id="local-6989586621680150567"><span id="local-6989586621680150568"><span class="annot"><a href="NITTA.Intermediate.Functions.html#receive"><span class="hs-identifier hs-type">receive</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150568"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Value.html#Val"><span class="hs-identifier hs-type">Val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150567"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680150568"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#F"><span class="hs-identifier hs-type">F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150568"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150567"><span class="hs-identifier hs-type">x</span></a></span></span></span><span>
</span><span id="line-413"></span><span id="receive"><span class="annot"><span class="annottext">receive :: forall v x. (Var v, Val x) =&gt; [v] -&gt; F v x
</span><a href="NITTA.Intermediate.Functions.html#receive"><span class="hs-identifier hs-var hs-var">receive</span></a></span></span><span> </span><span id="local-6989586621680149063"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680149063"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Receive v x -&gt; F v x
forall {f} {v} {x}.
(Function f v, Patch f (v, v), Locks f v, Show f, Label f,
 FunctionSimulation f v x, Typeable f, Eq f) =&gt;
f -&gt; F v x
</span><a href="NITTA.Intermediate.Types.html#packF"><span class="hs-identifier hs-var">packF</span></a></span><span> </span><span class="annot"><span class="annottext">(Receive v x -&gt; F v x) -&gt; Receive v x -&gt; F v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">O v -&gt; Receive v x
forall v x. O v -&gt; Receive v x
</span><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier hs-var">Receive</span></a></span><span> </span><span class="annot"><span class="annottext">(O v -&gt; Receive v x) -&gt; O v -&gt; Receive v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; O v
forall v. Set v -&gt; O v
</span><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-var">O</span></a></span><span> </span><span class="annot"><span class="annottext">(Set v -&gt; O v) -&gt; Set v -&gt; O v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Set v
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680149063"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-414"></span><span id="local-6989586621680150557"><span id="local-6989586621680150558"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680149058"><span id="local-6989586621680149061"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150558"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier hs-type">Receive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150558"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150557"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150558"><span class="hs-identifier hs-type">v</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-415"></span><span>    </span><span id="local-6989586621680149056"><span class="annot"><span class="annottext">outputs :: Receive v x -&gt; Set v
</span><a href="#local-6989586621680149056"><span class="hs-identifier hs-var hs-var hs-var hs-var">outputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier hs-type">Receive</span></a></span><span> </span><span id="local-6989586621680149055"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149055"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149055"><span class="hs-identifier hs-var">o</span></a></span></span></span><span>
</span><span id="line-416"></span><span id="local-6989586621680150559"><span id="local-6989586621680150560"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150560"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier hs-type">Receive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150560"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150559"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680150560"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680150560"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-417"></span><span>    </span><span id="local-6989586621680149050"><span class="annot"><span class="annottext">patch :: (v, v) -&gt; Receive v x -&gt; Receive v x
</span><a href="#local-6989586621680149050"><span class="hs-identifier hs-var hs-var hs-var hs-var">patch</span></a></span></span><span> </span><span id="local-6989586621680149049"><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149049"><span class="hs-identifier hs-var">diff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier hs-type">Receive</span></a></span><span> </span><span id="local-6989586621680149048"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149048"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; Receive v x
forall v x. O v -&gt; Receive v x
</span><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier hs-var">Receive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; O v -&gt; O v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680149049"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149048"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-418"></span><span id="local-6989586621680150561"><span id="local-6989586621680150562"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150562"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Locks"><span class="hs-identifier hs-type">Locks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier hs-type">Receive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150562"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150561"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150562"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680149043"><span class="annot"><span class="annottext">locks :: Receive v x -&gt; [Lock v]
</span><a href="#local-6989586621680149043"><span class="hs-identifier hs-var hs-var hs-var hs-var">locks</span></a></span></span><span> </span><span class="annot"><span class="annottext">Receive v x
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span></span></span><span>
</span><span id="line-419"></span><span id="local-6989586621680150563"><span id="local-6989586621680150564"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150564"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Value.html#Val"><span class="hs-identifier hs-type">Val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150563"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#FunctionSimulation"><span class="hs-identifier hs-type">FunctionSimulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier hs-type">Receive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150564"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150563"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150564"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150563"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-420"></span><span>    </span><span id="local-6989586621680149031"><span class="annot"><span class="annottext">simulate :: CycleCntx v x -&gt; Receive v x -&gt; [(v, x)]
</span><a href="#local-6989586621680149031"><span class="hs-identifier hs-var hs-var hs-var hs-var">simulate</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#CycleCntx"><span class="hs-identifier hs-type">CycleCntx</span></a></span><span class="hs-special">{</span><span id="local-6989586621680149030"><span class="annot"><span class="annottext">HashMap v x
cycleCntx :: HashMap v x
cycleCntx :: forall v x. CycleCntx v x -&gt; HashMap v x
</span><a href="#local-6989586621680149030"><span class="hs-identifier hs-var hs-var">cycleCntx</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier hs-type">Receive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span id="local-6989586621680149029"><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680149029"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-421"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; v
forall {c}. Set c -&gt; c
</span><a href="NITTA.Utils.Base.html#oneOf"><span class="hs-identifier hs-var">oneOf</span></a></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680149029"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">v -&gt; HashMap v x -&gt; Maybe x
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-operator hs-var">`HM.lookup`</span></span><span> </span><span class="annot"><span class="annottext">HashMap v x
</span><a href="#local-6989586621680149030"><span class="hs-identifier hs-var">cycleCntx</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-422"></span><span>            </span><span class="hs-comment">-- if output variables are defined - nothing to do (values thrown on upper level)</span><span>
</span><span id="line-423"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">x
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-424"></span><span>            </span><span class="hs-comment">-- if output variables are not defined - set initial value</span><span>
</span><span id="line-425"></span><span>            </span><span class="annot"><span class="annottext">Maybe x
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149028"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">x
forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680149028"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680149028"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; [v]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680149029"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-426"></span><span>
</span><span id="line-427"></span><span class="hs-comment">-- | Special function for negative tests only.</span><span>
</span><span id="line-428"></span><span class="hs-keyword">data</span><span> </span><span id="BrokenBuffer"><span class="annot"><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-var">BrokenBuffer</span></a></span></span><span> </span><span id="local-6989586621680150548"><span class="annot"><a href="#local-6989586621680150548"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621680150547"><span class="annot"><a href="#local-6989586621680150547"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="BrokenBuffer"><span class="annot"><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-var">BrokenBuffer</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150548"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150548"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680149020"><span id="local-6989586621680149024"><span class="annot"><span class="annottext">BrokenBuffer v x -&gt; BrokenBuffer v x -&gt; Bool
(BrokenBuffer v x -&gt; BrokenBuffer v x -&gt; Bool)
-&gt; (BrokenBuffer v x -&gt; BrokenBuffer v x -&gt; Bool)
-&gt; Eq (BrokenBuffer v x)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall v x. Eq v =&gt; BrokenBuffer v x -&gt; BrokenBuffer v x -&gt; Bool
/= :: BrokenBuffer v x -&gt; BrokenBuffer v x -&gt; Bool
$c/= :: forall v x. Eq v =&gt; BrokenBuffer v x -&gt; BrokenBuffer v x -&gt; Bool
== :: BrokenBuffer v x -&gt; BrokenBuffer v x -&gt; Bool
$c== :: forall v x. Eq v =&gt; BrokenBuffer v x -&gt; BrokenBuffer v x -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-429"></span><span>
</span><span id="line-430"></span><span id="local-6989586621680150543"><span id="local-6989586621680150544"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-type">BrokenBuffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150544"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150543"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680149017"><span class="annot"><span class="annottext">label :: BrokenBuffer v x -&gt; String
</span><a href="#local-6989586621680149017"><span class="hs-keyword hs-var hs-var hs-var hs-var">label</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-type">BrokenBuffer</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;broken&quot;</span></span></span></span><span>
</span><span id="line-431"></span><span id="local-6989586621680150541"><span id="local-6989586621680150542"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680149012"><span id="local-6989586621680149015"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150542"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-type">BrokenBuffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150542"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150541"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-432"></span><span>    </span><span id="local-6989586621680149005"><span class="annot"><span class="annottext">show :: BrokenBuffer v x -&gt; String
</span><a href="#local-6989586621680149005"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-type">BrokenBuffer</span></a></span><span> </span><span id="local-6989586621680149004"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149004"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680149003"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149003"><span class="hs-identifier hs-var">os</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;brokenBuffer(&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680149004"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;)&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">O v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680149003"><span class="hs-identifier hs-var">os</span></a></span></span></span><span>
</span><span id="line-433"></span><span id="local-6989586621680149001"><span id="local-6989586621680149002"><span class="annot"><a href="NITTA.Intermediate.Functions.html#brokenBuffer"><span class="hs-identifier hs-type">brokenBuffer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680149002"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Value.html#Val"><span class="hs-identifier hs-type">Val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680149001"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680149002"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680149002"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#F"><span class="hs-identifier hs-type">F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680149002"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680149001"><span class="hs-identifier hs-type">x</span></a></span></span></span><span>
</span><span id="line-434"></span><span id="brokenBuffer"><span class="annot"><span class="annottext">brokenBuffer :: forall v x. (Var v, Val x) =&gt; v -&gt; [v] -&gt; F v x
</span><a href="NITTA.Intermediate.Functions.html#brokenBuffer"><span class="hs-identifier hs-var hs-var">brokenBuffer</span></a></span></span><span> </span><span id="local-6989586621680148980"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680148980"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680148979"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680148979"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BrokenBuffer v x -&gt; F v x
forall {f} {v} {x}.
(Function f v, Patch f (v, v), Locks f v, Show f, Label f,
 FunctionSimulation f v x, Typeable f, Eq f) =&gt;
f -&gt; F v x
</span><a href="NITTA.Intermediate.Types.html#packF"><span class="hs-identifier hs-var">packF</span></a></span><span> </span><span class="annot"><span class="annottext">(BrokenBuffer v x -&gt; F v x) -&gt; BrokenBuffer v x -&gt; F v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; O v -&gt; BrokenBuffer v x
forall v x. I v -&gt; O v -&gt; BrokenBuffer v x
</span><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-var">BrokenBuffer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; I v
forall v. v -&gt; I v
</span><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-var">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680148980"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set v -&gt; O v
forall v. Set v -&gt; O v
</span><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-var">O</span></a></span><span> </span><span class="annot"><span class="annottext">(Set v -&gt; O v) -&gt; Set v -&gt; O v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Set v
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680148979"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-435"></span><span>
</span><span id="line-436"></span><span id="local-6989586621680150531"><span id="local-6989586621680150532"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680148975"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150532"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-type">BrokenBuffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150532"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150531"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150532"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-437"></span><span>    </span><span id="local-6989586621680148973"><span class="annot"><span class="annottext">inputs :: BrokenBuffer v x -&gt; Set v
</span><a href="#local-6989586621680148973"><span class="hs-identifier hs-var hs-var hs-var hs-var">inputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-type">BrokenBuffer</span></a></span><span> </span><span id="local-6989586621680148972"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680148972"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680148971"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680148971"><span class="hs-identifier hs-var">_b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680148972"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-438"></span><span>    </span><span id="local-6989586621680148969"><span class="annot"><span class="annottext">outputs :: BrokenBuffer v x -&gt; Set v
</span><a href="#local-6989586621680148969"><span class="hs-identifier hs-var hs-var hs-var hs-var">outputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-type">BrokenBuffer</span></a></span><span> </span><span id="local-6989586621680148968"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680148968"><span class="hs-identifier hs-var">_a</span></a></span></span><span> </span><span id="local-6989586621680148967"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680148967"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680148967"><span class="hs-identifier hs-var">b</span></a></span></span></span><span>
</span><span id="line-439"></span><span id="local-6989586621680150533"><span id="local-6989586621680150534"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150534"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-type">BrokenBuffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150534"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150533"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680150534"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680150534"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-440"></span><span>    </span><span id="local-6989586621680148960"><span class="annot"><span class="annottext">patch :: (v, v) -&gt; BrokenBuffer v x -&gt; BrokenBuffer v x
</span><a href="#local-6989586621680148960"><span class="hs-identifier hs-var hs-var hs-var hs-var">patch</span></a></span></span><span> </span><span id="local-6989586621680148959"><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680148959"><span class="hs-identifier hs-var">diff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-type">BrokenBuffer</span></a></span><span> </span><span id="local-6989586621680148958"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680148958"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680148957"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680148957"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; O v -&gt; BrokenBuffer v x
forall v x. I v -&gt; O v -&gt; BrokenBuffer v x
</span><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-var">BrokenBuffer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680148959"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680148958"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; O v -&gt; O v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680148959"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680148957"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-441"></span><span id="local-6989586621680150535"><span id="local-6989586621680150536"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150536"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Locks"><span class="hs-identifier hs-type">Locks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-type">BrokenBuffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150536"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150535"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150536"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-442"></span><span>    </span><span id="local-6989586621680148951"><span class="annot"><span class="annottext">locks :: BrokenBuffer v x -&gt; [Lock v]
</span><a href="#local-6989586621680148951"><span class="hs-identifier hs-var hs-var hs-var hs-var">locks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BrokenBuffer v x -&gt; [Lock v]
forall {f} {v}. Function f v =&gt; f -&gt; [Lock v]
</span><a href="NITTA.Intermediate.Types.html#inputsLockOutputs"><span class="hs-identifier hs-var">inputsLockOutputs</span></a></span></span></span><span>
</span><span id="line-443"></span><span id="local-6989586621680150537"><span id="local-6989586621680150538"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150538"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#FunctionSimulation"><span class="hs-identifier hs-type">FunctionSimulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-type">BrokenBuffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150538"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150537"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680150538"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680150537"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-444"></span><span>    </span><span id="local-6989586621680148941"><span class="annot"><span class="annottext">simulate :: CycleCntx v x -&gt; BrokenBuffer v x -&gt; [(v, x)]
</span><a href="#local-6989586621680148941"><span class="hs-identifier hs-var hs-var hs-var hs-var">simulate</span></a></span></span><span> </span><span id="local-6989586621680148940"><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680148940"><span class="hs-identifier hs-var">cntx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-type">BrokenBuffer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span id="local-6989586621680148939"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680148939"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span id="local-6989586621680148938"><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680148938"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680148937"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680148940"><span class="hs-identifier hs-var">cntx</span></a></span><span> </span><span class="annot"><span class="annottext">CycleCntx v x -&gt; v -&gt; x
forall {a} {v}.
(Eq a, Hashable a, ToString a) =&gt;
CycleCntx a v -&gt; a -&gt; v
</span><a href="NITTA.Intermediate.Types.html#getCntx"><span class="hs-operator hs-var">`getCntx`</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680148939"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680148937"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680148937"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; [v]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680148938"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-445"></span></pre></body></html>