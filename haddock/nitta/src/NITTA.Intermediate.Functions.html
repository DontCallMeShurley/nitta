<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE AllowAmbiguousTypes #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DuplicateRecordFields #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-9"></span><span>
</span><span id="line-10"></span><span class="hs-comment">{- |
Module      : NITTA.Intermediate.Functions
Description : Library of functions
Copyright   : (c) Aleksandr Penskoi, 2019
License     : BSD3
Maintainer  : aleksandr.penskoi@gmail.com
Stability   : experimental

Library of functions for an intermediate algorithm representation. Execution
relations between functions and process units are many-to-many.

[@function (functional block)@] atomic operation in intermediate algorithm
representation. Function has zero or many inputs and zero or many output.
Function can contains state between process cycles.
-}</span><span>
</span><span id="line-25"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">NITTA.Intermediate.Functions</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><span class="hs-comment">-- *Arithmetics</span></span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier">Add</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#add"><span class="hs-identifier">add</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier">Division</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#division"><span class="hs-identifier">division</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier">Multiply</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#multiply"><span class="hs-identifier">multiply</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftLR"><span class="hs-identifier">ShiftLR</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#shiftL"><span class="hs-identifier">shiftL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#shiftR"><span class="hs-identifier">shiftR</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier">Sub</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#sub"><span class="hs-identifier">sub</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier">Neg</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#neg"><span class="hs-identifier">neg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>    </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.Accum.html"><span class="hs-identifier">NITTA.Intermediate.Functions.Accum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>
</span><span id="line-42"></span><span>    </span><span class="annot"><span class="hs-comment">-- *Memory</span></span><span>
</span><span id="line-43"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier">Constant</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#constant"><span class="hs-identifier">constant</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#isConst"><span class="hs-identifier">isConst</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier">Loop</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#loop"><span class="hs-identifier">loop</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#isLoop"><span class="hs-identifier">isLoop</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopEnd"><span class="hs-identifier">LoopEnd</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopBegin"><span class="hs-identifier">LoopBegin</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier">Buffer</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#buffer"><span class="hs-identifier">buffer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span>    </span><span class="annot"><span class="hs-comment">-- *Input/Output</span></span><span>
</span><span id="line-55"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier">Receive</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#receive"><span class="hs-identifier">receive</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-57"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier">Send</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#send"><span class="hs-identifier">send</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span>    </span><span class="annot"><span class="hs-comment">-- *Internal</span></span><span>
</span><span id="line-61"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier">BrokenBuffer</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#brokenBuffer"><span class="hs-identifier">brokenBuffer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-64"></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bits</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">B</span></span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Default</span></span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashMap.Strict</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">HM</span></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">elems</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">fromList</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">union</span></span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Typeable</span></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.Accum.html"><span class="hs-identifier">NITTA.Intermediate.Functions.Accum</span></a></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html"><span class="hs-identifier">NITTA.Intermediate.Types</span></a></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="NITTA.Utils.Base.html"><span class="hs-identifier">NITTA.Utils.Base</span></a></span><span>
</span><span id="line-73"></span><span>
</span><span id="line-74"></span><span class="hs-comment">{- |Loop -- function for transfer data between computational cycles.
Let see the simple example with the following implementation of the
Fibonacci algorithm.

Data flow graph:

@
    +---------------------------------+
    |                                 |
    v                                 |
+------+                          b2  |
| Loop |      b1_1  +-----+    +------+
+------+----+------&gt;|     |    |
            | a1    | sum +----+
+------+-----------&gt;|     |
| Loop |    |       +-----+      b1_2
+------+    +-------------------------+
    ^                                 |
    |                                 |
    +---------------------------------+
@

Lua source code:

@
function fib(a1, b1)
    b2 = a1 + b1
    fib(b1, b2)
end
fib(0, 1)
@

Data flow defines computation for a single computational cycle. But
a controller should repeat the algorithm infinite times, and
usually, it is required to transfer data between cycles. `Loop`
allows doing that. At first cycle, `Loop` function produces an
initial value (`X x`), after that on each cycle `Loop` produces a
variable value from the previous cycle, and consumes a new value at
the end of the cycle.

Computational process:

@
         ][                 Cycle 1                 ][                Cycle 2                  ]
         ][                                         ][                                         ]
initial  ][ ---+                          b2   +--- ][ ---+                          b2   +--- ]
 value   ][ op |      b1_1  +-----+    +------&gt;| Lo ][ op |      b1_1  +-----+    +------&gt;| Lo ]
 is a    ][ ---+----+------&gt;|     |    |       +--- ][ ---+----+------&gt;|     |    |       +--- ]
part of  ][         |       | sum +----+            ][         |       | sum +----+            ]
software ][ ---+-----------&gt;|     |            +--- ][ ---+-----------&gt;|     |            +--- ]
         ][ op |    |       +-----+     b1_2   | Lo ][ op |    |       +-----+      b1_2  | Lo ]
         ][ ---+    +-------------------------&gt;+--- ][ ---+    +-------------------------&gt;+--- ]
         ][                                         ][                                         ]
@

Similation data:

+--------------+----+----+----+
| Cycle number | a1 | b1 | b2 |
+==============+====+====+====+
| 1            | 0  | 1  | 1  |
+--------------+----+----+----+
| 2            | 1  | 1  | 2  |
+--------------+----+----+----+
| 3            | 1  | 2  | 3  |
+--------------+----+----+----+
| 4            | 2  | 3  | 5  |
+--------------+----+----+----+

In practice, Loop function supported by Fram processor unit in the
following way: Loop function should be prepared before execution by
automatical refactor @BreakLoop@, which replace Loop by @LoopEnd@
and @LoopBegin@.
-}</span><span>
</span><span id="line-148"></span><span class="hs-keyword">data</span><span> </span><span id="Loop"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-var">Loop</span></a></span></span><span> </span><span id="local-6989586621680106248"><span class="annot"><a href="#local-6989586621680106248"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621680106249"><span class="annot"><a href="#local-6989586621680106249"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Loop"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-var">Loop</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#X"><span class="hs-identifier hs-type">X</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680106249"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680106248"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680106248"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680105914"><span id="local-6989586621680105916"><span class="annot"><span class="annottext">Loop v x -&gt; Loop v x -&gt; Bool
(Loop v x -&gt; Loop v x -&gt; Bool)
-&gt; (Loop v x -&gt; Loop v x -&gt; Bool) -&gt; Eq (Loop v x)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall v x. (Eq x, Eq v) =&gt; Loop v x -&gt; Loop v x -&gt; Bool
/= :: Loop v x -&gt; Loop v x -&gt; Bool
$c/= :: forall v x. (Eq x, Eq v) =&gt; Loop v x -&gt; Loop v x -&gt; Bool
== :: Loop v x -&gt; Loop v x -&gt; Bool
$c== :: forall v x. (Eq x, Eq v) =&gt; Loop v x -&gt; Loop v x -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span id="local-6989586621680105911"><span id="local-6989586621680105912"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680105906"><span id="local-6989586621680105909"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105912"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621680105911"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105912"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105911"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680105904"><span class="annot"><span class="annottext">show :: Loop v x -&gt; String
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Loop v x -&gt; String
forall a. Label a =&gt; a -&gt; String
</span><a href="NITTA.Intermediate.Types.html#label"><span class="hs-keyword hs-var">label</span></a></span></span></span><span>
</span><span id="line-151"></span><span id="local-6989586621680105900"><span id="local-6989586621680105901"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105901"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621680105900"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105901"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105900"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-152"></span><span>    </span><span id="local-6989586621680105897"><span class="annot"><span class="annottext">label :: Loop v x -&gt; String
</span><a href="#local-6989586621680105897"><span class="hs-keyword hs-var hs-var hs-var hs-var">label</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#X"><span class="hs-identifier hs-type">X</span></a></span><span> </span><span id="local-6989586621680105895"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105895"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680105894"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105894"><span class="hs-identifier hs-var">os</span></a></span></span><span> </span><span id="local-6989586621680105893"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105893"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-153"></span><span>        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;loop(&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105895"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105893"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;) = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">O v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105894"><span class="hs-identifier hs-var">os</span></a></span></span></span><span>
</span><span id="line-154"></span><span id="local-6989586621680105891"><span id="local-6989586621680105892"><span class="annot"><a href="NITTA.Intermediate.Functions.html#loop"><span class="hs-identifier hs-type">loop</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105892"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Value.html#Val"><span class="hs-identifier hs-type">Val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105891"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680105891"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680105892"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680105892"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#F"><span class="hs-identifier hs-type">F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105892"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105891"><span class="hs-identifier hs-type">x</span></a></span></span></span><span>
</span><span id="line-155"></span><span id="loop"><span class="annot"><span class="annottext">loop :: x -&gt; v -&gt; [v] -&gt; F v x
</span><a href="NITTA.Intermediate.Functions.html#loop"><span class="hs-identifier hs-var hs-var">loop</span></a></span></span><span> </span><span id="local-6989586621680105890"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105890"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680105889"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105889"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680105888"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680105888"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Loop v x -&gt; F v x
forall f v x.
(Function f v, Patch f (v, v), Locks f v, Show f, Label f,
 FunctionSimulation f v x, Typeable f, Eq f) =&gt;
f -&gt; F v x
</span><a href="NITTA.Intermediate.Types.html#packF"><span class="hs-identifier hs-var">packF</span></a></span><span> </span><span class="annot"><span class="annottext">(Loop v x -&gt; F v x) -&gt; Loop v x -&gt; F v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">X x -&gt; O v -&gt; I v -&gt; Loop v x
forall v x. X x -&gt; O v -&gt; I v -&gt; Loop v x
</span><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-var">Loop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x -&gt; X x
forall x. x -&gt; X x
</span><a href="NITTA.Intermediate.Types.html#X"><span class="hs-identifier hs-var">X</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105890"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set v -&gt; O v
forall v. Set v -&gt; O v
</span><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-var">O</span></a></span><span> </span><span class="annot"><span class="annottext">(Set v -&gt; O v) -&gt; Set v -&gt; O v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Set v
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680105888"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(I v -&gt; Loop v x) -&gt; I v -&gt; Loop v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">v -&gt; I v
forall v. v -&gt; I v
</span><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-var">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105889"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-156"></span><span id="isLoop"><span class="annot"><span class="annottext">isLoop :: F v x -&gt; Bool
</span><a href="NITTA.Intermediate.Functions.html#isLoop"><span class="hs-identifier hs-var hs-var">isLoop</span></a></span></span><span> </span><span id="local-6989586621680105884"><span class="annot"><span class="annottext">F v x
</span><a href="#local-6989586621680105884"><span class="hs-identifier hs-var">f</span></a></span></span><span>
</span><span id="line-157"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F v x -&gt; Maybe (Loop v x)
forall (f :: * -&gt; * -&gt; *) v x.
(Typeable f, Typeable v, Typeable x) =&gt;
F v x -&gt; Maybe (f v x)
</span><a href="NITTA.Intermediate.Types.html#castF"><span class="hs-identifier hs-var">castF</span></a></span><span> </span><span class="annot"><span class="annottext">F v x
</span><a href="#local-6989586621680105884"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-158"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-159"></span><span>
</span><span id="line-160"></span><span id="local-6989586621680105881"><span id="local-6989586621680105882"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105882"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105881"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105882"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-161"></span><span>    </span><span id="local-6989586621680105876"><span class="annot"><span class="annottext">isInternalLockPossible :: Loop v x -&gt; Bool
</span><a href="NITTA.Intermediate.Types.html#isInternalLockPossible"><span class="hs-identifier hs-var hs-var hs-var hs-var">isInternalLockPossible</span></a></span></span><span> </span><span class="annot"><span class="annottext">Loop v x
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-162"></span><span>    </span><span id="local-6989586621680105874"><span class="annot"><span class="annottext">inputs :: Loop v x -&gt; Set v
</span><a href="NITTA.Intermediate.Types.html#inputs"><span class="hs-identifier hs-var hs-var hs-var hs-var">inputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span> </span><span class="annot"><span class="annottext">X x
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680105872"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105872"><span class="hs-identifier hs-var">_a</span></a></span></span><span> </span><span id="local-6989586621680105871"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105871"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105871"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-163"></span><span>    </span><span id="local-6989586621680105869"><span class="annot"><span class="annottext">outputs :: Loop v x -&gt; Set v
</span><a href="NITTA.Intermediate.Types.html#outputs"><span class="hs-identifier hs-var hs-var hs-var hs-var">outputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span> </span><span class="annot"><span class="annottext">X x
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680105867"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105867"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680105866"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105866"><span class="hs-identifier hs-var">_b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105867"><span class="hs-identifier hs-var">a</span></a></span></span></span><span>
</span><span id="line-164"></span><span id="local-6989586621680105864"><span id="local-6989586621680105865"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105865"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105865"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105864"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680105865"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680105865"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-165"></span><span>    </span><span id="local-6989586621680105861"><span class="annot"><span class="annottext">patch :: (v, v) -&gt; Loop v x -&gt; Loop v x
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var hs-var hs-var hs-var">patch</span></a></span></span><span> </span><span id="local-6989586621680105859"><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105859"><span class="hs-identifier hs-var">diff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span> </span><span id="local-6989586621680105858"><span class="annot"><span class="annottext">X x
</span><a href="#local-6989586621680105858"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680105857"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105857"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680105856"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105856"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">X x -&gt; O v -&gt; I v -&gt; Loop v x
forall v x. X x -&gt; O v -&gt; I v -&gt; Loop v x
</span><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-var">Loop</span></a></span><span> </span><span class="annot"><span class="annottext">X x
</span><a href="#local-6989586621680105858"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; O v -&gt; O v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105859"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105857"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105859"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105856"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-166"></span><span id="local-6989586621680105854"><span id="local-6989586621680105855"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105855"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Locks"><span class="hs-identifier hs-type">Locks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105855"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105854"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105855"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-167"></span><span>    </span><span id="local-6989586621680105850"><span class="annot"><span class="annottext">locks :: Loop v x -&gt; [Lock v]
</span><a href="NITTA.Intermediate.Types.html#locks"><span class="hs-identifier hs-var hs-var hs-var hs-var">locks</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span> </span><span class="annot"><span class="annottext">X x
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span id="local-6989586621680105848"><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680105848"><span class="hs-keyword hs-var">as</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span id="local-6989586621680105847"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105847"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Lock :: forall v. v -&gt; v -&gt; Lock v
</span><a href="NITTA.Intermediate.Types.html#Lock"><span class="hs-identifier hs-type">Lock</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">locked :: v
</span><a href="#local-6989586621680105845"><span class="hs-identifier hs-var">locked</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105847"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lockBy :: v
</span><a href="#local-6989586621680105844"><span class="hs-identifier hs-var">lockBy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105843"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680105843"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105843"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; [v]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680105848"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-168"></span><span id="local-6989586621680105841"><span id="local-6989586621680105842"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105842"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#FunctionSimulation"><span class="hs-identifier hs-type">FunctionSimulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105842"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105841"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105842"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105841"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-169"></span><span>    </span><span id="local-6989586621680105838"><span class="annot"><span class="annottext">simulate :: CycleCntx v x -&gt; Loop v x -&gt; [(v, x)]
</span><a href="NITTA.Intermediate.Types.html#simulate"><span class="hs-identifier hs-var hs-var hs-var hs-var">simulate</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#CycleCntx"><span class="hs-identifier hs-type">CycleCntx</span></a></span><span class="hs-special">{</span><span id="local-6989586621680105835"><span class="annot"><span class="annottext">HashMap v x
cycleCntx :: forall v x. CycleCntx v x -&gt; HashMap v x
cycleCntx :: HashMap v x
</span><a href="NITTA.Intermediate.Types.html#cycleCntx"><span class="hs-identifier hs-var hs-var">cycleCntx</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#X"><span class="hs-identifier hs-type">X</span></a></span><span> </span><span id="local-6989586621680105833"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105833"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span id="local-6989586621680105832"><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680105832"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-170"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; v
forall c. Set c -&gt; c
</span><a href="NITTA.Utils.Base.html#oneOf"><span class="hs-identifier hs-var">oneOf</span></a></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680105832"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">v -&gt; HashMap v x -&gt; Maybe x
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-operator hs-var">`HM.lookup`</span></span><span> </span><span class="annot"><span class="annottext">HashMap v x
</span><a href="#local-6989586621680105835"><span class="hs-identifier hs-var">cycleCntx</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-171"></span><span>            </span><span class="hs-comment">-- if output variables are defined - nothing to do (values thrown on upper level)</span><span>
</span><span id="line-172"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">x
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-173"></span><span>            </span><span class="hs-comment">-- if output variables are not defined - set initial value</span><span>
</span><span id="line-174"></span><span>            </span><span class="annot"><span class="annottext">Maybe x
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105829"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105833"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680105829"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105829"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; [v]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680105832"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-175"></span><span>
</span><span id="line-176"></span><span class="hs-keyword">data</span><span> </span><span id="LoopBegin"><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopBegin"><span class="hs-identifier hs-var">LoopBegin</span></a></span></span><span> </span><span id="local-6989586621680106194"><span class="annot"><a href="#local-6989586621680106194"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621680106193"><span class="annot"><a href="#local-6989586621680106193"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="LoopBegin"><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopBegin"><span class="hs-identifier hs-var">LoopBegin</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680106194"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680106193"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680106194"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680105824"><span id="local-6989586621680105826"><span class="annot"><span class="annottext">LoopBegin v x -&gt; LoopBegin v x -&gt; Bool
(LoopBegin v x -&gt; LoopBegin v x -&gt; Bool)
-&gt; (LoopBegin v x -&gt; LoopBegin v x -&gt; Bool) -&gt; Eq (LoopBegin v x)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall v x. (Eq x, Eq v) =&gt; LoopBegin v x -&gt; LoopBegin v x -&gt; Bool
/= :: LoopBegin v x -&gt; LoopBegin v x -&gt; Bool
$c/= :: forall v x. (Eq x, Eq v) =&gt; LoopBegin v x -&gt; LoopBegin v x -&gt; Bool
== :: LoopBegin v x -&gt; LoopBegin v x -&gt; Bool
$c== :: forall v x. (Eq x, Eq v) =&gt; LoopBegin v x -&gt; LoopBegin v x -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-177"></span><span id="local-6989586621680105822"><span id="local-6989586621680105823"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680105817"><span id="local-6989586621680105820"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105823"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621680105822"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopBegin"><span class="hs-identifier hs-type">LoopBegin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105823"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105822"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680105816"><span class="annot"><span class="annottext">show :: LoopBegin v x -&gt; String
</span><a href="#local-6989586621680105816"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LoopBegin v x -&gt; String
forall a. Label a =&gt; a -&gt; String
</span><a href="NITTA.Intermediate.Types.html#label"><span class="hs-keyword hs-var">label</span></a></span></span></span><span>
</span><span id="line-178"></span><span id="local-6989586621680105814"><span id="local-6989586621680105815"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105815"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopBegin"><span class="hs-identifier hs-type">LoopBegin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105815"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105814"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-179"></span><span>    </span><span id="local-6989586621680105812"><span class="annot"><span class="annottext">label :: LoopBegin v x -&gt; String
</span><a href="#local-6989586621680105812"><span class="hs-keyword hs-var hs-var hs-var hs-var">label</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopBegin"><span class="hs-identifier hs-type">LoopBegin</span></a></span><span> </span><span class="annot"><span class="annottext">Loop v x
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680105811"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105811"><span class="hs-identifier hs-var">os</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;LoopBegin() = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">O v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105811"><span class="hs-identifier hs-var">os</span></a></span></span></span><span>
</span><span id="line-180"></span><span id="local-6989586621680105809"><span id="local-6989586621680105810"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680105807"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105810"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopBegin"><span class="hs-identifier hs-type">LoopBegin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105810"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105809"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105810"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-181"></span><span>    </span><span id="local-6989586621680105804"><span class="annot"><span class="annottext">outputs :: LoopBegin v x -&gt; Set v
</span><a href="#local-6989586621680105804"><span class="hs-identifier hs-var hs-var hs-var hs-var">outputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopBegin"><span class="hs-identifier hs-type">LoopBegin</span></a></span><span> </span><span class="annot"><span class="annottext">Loop v x
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680105803"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105803"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105803"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-182"></span><span>    </span><span id="local-6989586621680105802"><span class="annot"><span class="annottext">isInternalLockPossible :: LoopBegin v x -&gt; Bool
</span><a href="#local-6989586621680105802"><span class="hs-identifier hs-var hs-var hs-var hs-var">isInternalLockPossible</span></a></span></span><span> </span><span class="annot"><span class="annottext">LoopBegin v x
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span></span></span><span>
</span><span id="line-183"></span><span id="local-6989586621680105800"><span id="local-6989586621680105801"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105801"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopBegin"><span class="hs-identifier hs-type">LoopBegin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105801"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105800"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680105801"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680105801"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-184"></span><span>    </span><span id="local-6989586621680105798"><span class="annot"><span class="annottext">patch :: (v, v) -&gt; LoopBegin v x -&gt; LoopBegin v x
</span><a href="#local-6989586621680105798"><span class="hs-identifier hs-var hs-var hs-var hs-var">patch</span></a></span></span><span> </span><span id="local-6989586621680105797"><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105797"><span class="hs-identifier hs-var">diff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopBegin"><span class="hs-identifier hs-type">LoopBegin</span></a></span><span> </span><span id="local-6989586621680105796"><span class="annot"><span class="annottext">Loop v x
</span><a href="#local-6989586621680105796"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621680105795"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105795"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Loop v x -&gt; O v -&gt; LoopBegin v x
forall v x. Loop v x -&gt; O v -&gt; LoopBegin v x
</span><a href="NITTA.Intermediate.Functions.html#LoopBegin"><span class="hs-identifier hs-var">LoopBegin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; Loop v x -&gt; Loop v x
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105797"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">Loop v x
</span><a href="#local-6989586621680105796"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(O v -&gt; LoopBegin v x) -&gt; O v -&gt; LoopBegin v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(v, v) -&gt; O v -&gt; O v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105797"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105795"><span class="hs-identifier hs-var">a</span></a></span></span></span><span>
</span><span id="line-185"></span><span id="local-6989586621680105793"><span id="local-6989586621680105794"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105794"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Locks"><span class="hs-identifier hs-type">Locks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopBegin"><span class="hs-identifier hs-type">LoopBegin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105794"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105793"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105794"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-186"></span><span>    </span><span id="local-6989586621680105790"><span class="annot"><span class="annottext">locks :: LoopBegin v x -&gt; [Lock v]
</span><a href="#local-6989586621680105790"><span class="hs-identifier hs-var hs-var hs-var hs-var">locks</span></a></span></span><span> </span><span class="annot"><span class="annottext">LoopBegin v x
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span></span></span><span>
</span><span id="line-187"></span><span id="local-6989586621680105788"><span id="local-6989586621680105789"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105789"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#FunctionSimulation"><span class="hs-identifier hs-type">FunctionSimulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopBegin"><span class="hs-identifier hs-type">LoopBegin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105789"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105788"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105789"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105788"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-188"></span><span>    </span><span id="local-6989586621680105786"><span class="annot"><span class="annottext">simulate :: CycleCntx v x -&gt; LoopBegin v x -&gt; [(v, x)]
</span><a href="#local-6989586621680105786"><span class="hs-identifier hs-var hs-var hs-var hs-var">simulate</span></a></span></span><span> </span><span id="local-6989586621680105785"><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680105785"><span class="hs-identifier hs-var">cntx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopBegin"><span class="hs-identifier hs-type">LoopBegin</span></a></span><span> </span><span id="local-6989586621680105784"><span class="annot"><span class="annottext">Loop v x
</span><a href="#local-6989586621680105784"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">O v
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CycleCntx v x -&gt; Loop v x -&gt; [(v, x)]
forall f v x.
FunctionSimulation f v x =&gt;
CycleCntx v x -&gt; f -&gt; [(v, x)]
</span><a href="NITTA.Intermediate.Types.html#simulate"><span class="hs-identifier hs-var">simulate</span></a></span><span> </span><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680105785"><span class="hs-identifier hs-var">cntx</span></a></span><span> </span><span class="annot"><span class="annottext">Loop v x
</span><a href="#local-6989586621680105784"><span class="hs-identifier hs-var">l</span></a></span></span></span><span>
</span><span id="line-189"></span><span>
</span><span id="line-190"></span><span class="hs-keyword">data</span><span> </span><span id="LoopEnd"><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopEnd"><span class="hs-identifier hs-var">LoopEnd</span></a></span></span><span> </span><span id="local-6989586621680106177"><span class="annot"><a href="#local-6989586621680106177"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621680106176"><span class="annot"><a href="#local-6989586621680106176"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="LoopEnd"><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopEnd"><span class="hs-identifier hs-var">LoopEnd</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680106177"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680106176"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680106177"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680105779"><span id="local-6989586621680105781"><span class="annot"><span class="annottext">LoopEnd v x -&gt; LoopEnd v x -&gt; Bool
(LoopEnd v x -&gt; LoopEnd v x -&gt; Bool)
-&gt; (LoopEnd v x -&gt; LoopEnd v x -&gt; Bool) -&gt; Eq (LoopEnd v x)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall v x. (Eq x, Eq v) =&gt; LoopEnd v x -&gt; LoopEnd v x -&gt; Bool
/= :: LoopEnd v x -&gt; LoopEnd v x -&gt; Bool
$c/= :: forall v x. (Eq x, Eq v) =&gt; LoopEnd v x -&gt; LoopEnd v x -&gt; Bool
== :: LoopEnd v x -&gt; LoopEnd v x -&gt; Bool
$c== :: forall v x. (Eq x, Eq v) =&gt; LoopEnd v x -&gt; LoopEnd v x -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-191"></span><span id="local-6989586621680105777"><span id="local-6989586621680105778"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680105772"><span id="local-6989586621680105775"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105778"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621680105777"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopEnd"><span class="hs-identifier hs-type">LoopEnd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105778"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105777"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680105771"><span class="annot"><span class="annottext">show :: LoopEnd v x -&gt; String
</span><a href="#local-6989586621680105771"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LoopEnd v x -&gt; String
forall a. Label a =&gt; a -&gt; String
</span><a href="NITTA.Intermediate.Types.html#label"><span class="hs-keyword hs-var">label</span></a></span></span></span><span>
</span><span id="line-192"></span><span id="local-6989586621680105769"><span id="local-6989586621680105770"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105770"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopEnd"><span class="hs-identifier hs-type">LoopEnd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105770"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105769"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-193"></span><span>    </span><span id="local-6989586621680105767"><span class="annot"><span class="annottext">label :: LoopEnd v x -&gt; String
</span><a href="#local-6989586621680105767"><span class="hs-keyword hs-var hs-var hs-var hs-var">label</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopEnd"><span class="hs-identifier hs-type">LoopEnd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Loop"><span class="hs-identifier hs-type">Loop</span></a></span><span> </span><span class="annot"><span class="annottext">X x
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680105766"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105766"><span class="hs-identifier hs-var">os</span></a></span></span><span> </span><span class="annot"><span class="annottext">I v
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680105765"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105765"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;LoopEnd(&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105765"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;) pair out: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">O v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105766"><span class="hs-identifier hs-var">os</span></a></span></span></span><span>
</span><span id="line-194"></span><span id="local-6989586621680105763"><span id="local-6989586621680105764"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680105760"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105764"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopEnd"><span class="hs-identifier hs-type">LoopEnd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105764"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105763"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105764"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-195"></span><span>    </span><span id="local-6989586621680105758"><span class="annot"><span class="annottext">inputs :: LoopEnd v x -&gt; Set v
</span><a href="#local-6989586621680105758"><span class="hs-identifier hs-var hs-var hs-var hs-var">inputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopEnd"><span class="hs-identifier hs-type">LoopEnd</span></a></span><span> </span><span class="annot"><span class="annottext">Loop v x
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680105757"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105757"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105757"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-196"></span><span>    </span><span id="local-6989586621680105756"><span class="annot"><span class="annottext">isInternalLockPossible :: LoopEnd v x -&gt; Bool
</span><a href="#local-6989586621680105756"><span class="hs-identifier hs-var hs-var hs-var hs-var">isInternalLockPossible</span></a></span></span><span> </span><span class="annot"><span class="annottext">LoopEnd v x
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span></span></span><span>
</span><span id="line-197"></span><span id="local-6989586621680105754"><span id="local-6989586621680105755"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105755"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopEnd"><span class="hs-identifier hs-type">LoopEnd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105755"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105754"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680105755"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680105755"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-198"></span><span>    </span><span id="local-6989586621680105752"><span class="annot"><span class="annottext">patch :: (v, v) -&gt; LoopEnd v x -&gt; LoopEnd v x
</span><a href="#local-6989586621680105752"><span class="hs-identifier hs-var hs-var hs-var hs-var">patch</span></a></span></span><span> </span><span id="local-6989586621680105751"><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105751"><span class="hs-identifier hs-var">diff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopEnd"><span class="hs-identifier hs-type">LoopEnd</span></a></span><span> </span><span id="local-6989586621680105750"><span class="annot"><span class="annottext">Loop v x
</span><a href="#local-6989586621680105750"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621680105749"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105749"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Loop v x -&gt; I v -&gt; LoopEnd v x
forall v x. Loop v x -&gt; I v -&gt; LoopEnd v x
</span><a href="NITTA.Intermediate.Functions.html#LoopEnd"><span class="hs-identifier hs-var">LoopEnd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; Loop v x -&gt; Loop v x
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105751"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">Loop v x
</span><a href="#local-6989586621680105750"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(I v -&gt; LoopEnd v x) -&gt; I v -&gt; LoopEnd v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105751"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105749"><span class="hs-identifier hs-var">a</span></a></span></span></span><span>
</span><span id="line-199"></span><span id="local-6989586621680105747"><span id="local-6989586621680105748"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105748"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Locks"><span class="hs-identifier hs-type">Locks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopEnd"><span class="hs-identifier hs-type">LoopEnd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105748"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105747"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105748"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680105744"><span class="annot"><span class="annottext">locks :: LoopEnd v x -&gt; [Lock v]
</span><a href="#local-6989586621680105744"><span class="hs-identifier hs-var hs-var hs-var hs-var">locks</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopEnd"><span class="hs-identifier hs-type">LoopEnd</span></a></span><span> </span><span id="local-6989586621680105743"><span class="annot"><span class="annottext">Loop v x
</span><a href="#local-6989586621680105743"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">I v
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Loop v x -&gt; [Lock v]
forall x v. Locks x v =&gt; x -&gt; [Lock v]
</span><a href="NITTA.Intermediate.Types.html#locks"><span class="hs-identifier hs-var">locks</span></a></span><span> </span><span class="annot"><span class="annottext">Loop v x
</span><a href="#local-6989586621680105743"><span class="hs-identifier hs-var">l</span></a></span></span></span><span>
</span><span id="line-200"></span><span id="local-6989586621680105741"><span id="local-6989586621680105742"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105742"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#FunctionSimulation"><span class="hs-identifier hs-type">FunctionSimulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopEnd"><span class="hs-identifier hs-type">LoopEnd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105742"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105741"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105742"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105741"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-201"></span><span>    </span><span id="local-6989586621680105739"><span class="annot"><span class="annottext">simulate :: CycleCntx v x -&gt; LoopEnd v x -&gt; [(v, x)]
</span><a href="#local-6989586621680105739"><span class="hs-identifier hs-var hs-var hs-var hs-var">simulate</span></a></span></span><span> </span><span id="local-6989586621680105738"><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680105738"><span class="hs-identifier hs-var">cntx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#LoopEnd"><span class="hs-identifier hs-type">LoopEnd</span></a></span><span> </span><span id="local-6989586621680105737"><span class="annot"><span class="annottext">Loop v x
</span><a href="#local-6989586621680105737"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">I v
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CycleCntx v x -&gt; Loop v x -&gt; [(v, x)]
forall f v x.
FunctionSimulation f v x =&gt;
CycleCntx v x -&gt; f -&gt; [(v, x)]
</span><a href="NITTA.Intermediate.Types.html#simulate"><span class="hs-identifier hs-var">simulate</span></a></span><span> </span><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680105738"><span class="hs-identifier hs-var">cntx</span></a></span><span> </span><span class="annot"><span class="annottext">Loop v x
</span><a href="#local-6989586621680105737"><span class="hs-identifier hs-var">l</span></a></span></span></span><span>
</span><span id="line-202"></span><span>
</span><span id="line-203"></span><span class="hs-keyword">data</span><span> </span><span id="Buffer"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-var">Buffer</span></a></span></span><span> </span><span id="local-6989586621680106162"><span class="annot"><a href="#local-6989586621680106162"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621680106161"><span class="annot"><a href="#local-6989586621680106161"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Buffer"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-var">Buffer</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680106162"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680106162"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680105732"><span id="local-6989586621680105734"><span class="annot"><span class="annottext">Buffer v x -&gt; Buffer v x -&gt; Bool
(Buffer v x -&gt; Buffer v x -&gt; Bool)
-&gt; (Buffer v x -&gt; Buffer v x -&gt; Bool) -&gt; Eq (Buffer v x)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall v x. Eq v =&gt; Buffer v x -&gt; Buffer v x -&gt; Bool
/= :: Buffer v x -&gt; Buffer v x -&gt; Bool
$c/= :: forall v x. Eq v =&gt; Buffer v x -&gt; Buffer v x -&gt; Bool
== :: Buffer v x -&gt; Buffer v x -&gt; Bool
$c== :: forall v x. Eq v =&gt; Buffer v x -&gt; Buffer v x -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-204"></span><span id="local-6989586621680105730"><span id="local-6989586621680105731"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-type">Buffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105731"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105730"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680105728"><span class="annot"><span class="annottext">label :: Buffer v x -&gt; String
</span><a href="#local-6989586621680105728"><span class="hs-keyword hs-var hs-var hs-var hs-var">label</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-type">Buffer</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;buf&quot;</span></span></span></span><span>
</span><span id="line-205"></span><span id="local-6989586621680105726"><span id="local-6989586621680105727"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680105721"><span id="local-6989586621680105724"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105727"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-type">Buffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105727"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105726"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-206"></span><span>    </span><span id="local-6989586621680105720"><span class="annot"><span class="annottext">show :: Buffer v x -&gt; String
</span><a href="#local-6989586621680105720"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-type">Buffer</span></a></span><span> </span><span id="local-6989586621680105719"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105719"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680105718"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105718"><span class="hs-identifier hs-var">os</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;buffer(&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105719"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;)&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">O v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105718"><span class="hs-identifier hs-var">os</span></a></span></span></span><span>
</span><span id="line-207"></span><span id="local-6989586621680105716"><span id="local-6989586621680105717"><span class="annot"><a href="NITTA.Intermediate.Functions.html#buffer"><span class="hs-identifier hs-type">buffer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105717"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Value.html#Val"><span class="hs-identifier hs-type">Val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105716"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680105717"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680105717"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#F"><span class="hs-identifier hs-type">F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105717"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105716"><span class="hs-identifier hs-type">x</span></a></span></span></span><span>
</span><span id="line-208"></span><span id="buffer"><span class="annot"><span class="annottext">buffer :: v -&gt; [v] -&gt; F v x
</span><a href="NITTA.Intermediate.Functions.html#buffer"><span class="hs-identifier hs-var hs-var">buffer</span></a></span></span><span> </span><span id="local-6989586621680105715"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105715"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680105714"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680105714"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Buffer v x -&gt; F v x
forall f v x.
(Function f v, Patch f (v, v), Locks f v, Show f, Label f,
 FunctionSimulation f v x, Typeable f, Eq f) =&gt;
f -&gt; F v x
</span><a href="NITTA.Intermediate.Types.html#packF"><span class="hs-identifier hs-var">packF</span></a></span><span> </span><span class="annot"><span class="annottext">(Buffer v x -&gt; F v x) -&gt; Buffer v x -&gt; F v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; O v -&gt; Buffer v x
forall v x. I v -&gt; O v -&gt; Buffer v x
</span><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-var">Buffer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; I v
forall v. v -&gt; I v
</span><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-var">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105715"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set v -&gt; O v
forall v. Set v -&gt; O v
</span><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-var">O</span></a></span><span> </span><span class="annot"><span class="annottext">(Set v -&gt; O v) -&gt; Set v -&gt; O v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Set v
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680105714"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-209"></span><span>
</span><span id="line-210"></span><span id="local-6989586621680105712"><span id="local-6989586621680105713"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680105708"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105713"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-type">Buffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105713"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105712"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105713"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-211"></span><span>    </span><span id="local-6989586621680105707"><span class="annot"><span class="annottext">inputs :: Buffer v x -&gt; Set v
</span><a href="#local-6989586621680105707"><span class="hs-identifier hs-var hs-var hs-var hs-var">inputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-type">Buffer</span></a></span><span> </span><span id="local-6989586621680105706"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105706"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680105705"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105705"><span class="hs-identifier hs-var">_b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105706"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-212"></span><span>    </span><span id="local-6989586621680105704"><span class="annot"><span class="annottext">outputs :: Buffer v x -&gt; Set v
</span><a href="#local-6989586621680105704"><span class="hs-identifier hs-var hs-var hs-var hs-var">outputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-type">Buffer</span></a></span><span> </span><span id="local-6989586621680105703"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105703"><span class="hs-identifier hs-var">_a</span></a></span></span><span> </span><span id="local-6989586621680105702"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105702"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105702"><span class="hs-identifier hs-var">b</span></a></span></span></span><span>
</span><span id="line-213"></span><span id="local-6989586621680105700"><span id="local-6989586621680105701"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105701"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-type">Buffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105701"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105700"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680105701"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680105701"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-214"></span><span>    </span><span id="local-6989586621680105698"><span class="annot"><span class="annottext">patch :: (v, v) -&gt; Buffer v x -&gt; Buffer v x
</span><a href="#local-6989586621680105698"><span class="hs-identifier hs-var hs-var hs-var hs-var">patch</span></a></span></span><span> </span><span id="local-6989586621680105697"><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105697"><span class="hs-identifier hs-var">diff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-type">Buffer</span></a></span><span> </span><span id="local-6989586621680105696"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105696"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680105695"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105695"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; O v -&gt; Buffer v x
forall v x. I v -&gt; O v -&gt; Buffer v x
</span><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-var">Buffer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105697"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105696"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; O v -&gt; O v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105697"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105695"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-215"></span><span id="local-6989586621680105693"><span id="local-6989586621680105694"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105694"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Locks"><span class="hs-identifier hs-type">Locks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-type">Buffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105694"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105693"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105694"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-216"></span><span>    </span><span id="local-6989586621680105690"><span class="annot"><span class="annottext">locks :: Buffer v x -&gt; [Lock v]
</span><a href="#local-6989586621680105690"><span class="hs-identifier hs-var hs-var hs-var hs-var">locks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Buffer v x -&gt; [Lock v]
forall f v. Function f v =&gt; f -&gt; [Lock v]
</span><a href="NITTA.Intermediate.Types.html#inputsLockOutputs"><span class="hs-identifier hs-var">inputsLockOutputs</span></a></span></span></span><span>
</span><span id="line-217"></span><span id="local-6989586621680105687"><span id="local-6989586621680105688"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105688"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#FunctionSimulation"><span class="hs-identifier hs-type">FunctionSimulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-type">Buffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105688"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105687"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105688"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105687"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-218"></span><span>    </span><span id="local-6989586621680105685"><span class="annot"><span class="annottext">simulate :: CycleCntx v x -&gt; Buffer v x -&gt; [(v, x)]
</span><a href="#local-6989586621680105685"><span class="hs-identifier hs-var hs-var hs-var hs-var">simulate</span></a></span></span><span> </span><span id="local-6989586621680105684"><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680105684"><span class="hs-identifier hs-var">cntx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Buffer"><span class="hs-identifier hs-type">Buffer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span id="local-6989586621680105683"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105683"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span id="local-6989586621680105682"><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680105682"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-219"></span><span>        </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105681"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680105684"><span class="hs-identifier hs-var">cntx</span></a></span><span> </span><span class="annot"><span class="annottext">CycleCntx v x -&gt; v -&gt; x
forall a p.
(Eq a, Hashable a, ToString a) =&gt;
CycleCntx a p -&gt; a -&gt; p
</span><a href="NITTA.Intermediate.Types.html#getCntx"><span class="hs-operator hs-var">`getCntx`</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105683"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680105681"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105681"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; [v]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680105682"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-220"></span><span>
</span><span id="line-221"></span><span class="hs-keyword">data</span><span> </span><span id="Add"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-var">Add</span></a></span></span><span> </span><span id="local-6989586621680106138"><span class="annot"><a href="#local-6989586621680106138"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621680106137"><span class="annot"><a href="#local-6989586621680106137"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Add"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-var">Add</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680106138"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680106138"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680106138"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680105675"><span id="local-6989586621680105677"><span class="annot"><span class="annottext">Add v x -&gt; Add v x -&gt; Bool
(Add v x -&gt; Add v x -&gt; Bool)
-&gt; (Add v x -&gt; Add v x -&gt; Bool) -&gt; Eq (Add v x)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall v x. Eq v =&gt; Add v x -&gt; Add v x -&gt; Bool
/= :: Add v x -&gt; Add v x -&gt; Bool
$c/= :: forall v x. Eq v =&gt; Add v x -&gt; Add v x -&gt; Bool
== :: Add v x -&gt; Add v x -&gt; Bool
$c== :: forall v x. Eq v =&gt; Add v x -&gt; Add v x -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-222"></span><span id="local-6989586621680105673"><span id="local-6989586621680105674"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-type">Add</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105674"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105673"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680105671"><span class="annot"><span class="annottext">label :: Add v x -&gt; String
</span><a href="#local-6989586621680105671"><span class="hs-keyword hs-var hs-var hs-var hs-var">label</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-type">Add</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;+&quot;</span></span></span></span><span>
</span><span id="line-223"></span><span id="local-6989586621680105669"><span id="local-6989586621680105670"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680105664"><span id="local-6989586621680105667"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105670"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-type">Add</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105670"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105669"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-224"></span><span>    </span><span id="local-6989586621680105663"><span class="annot"><span class="annottext">show :: Add v x -&gt; String
</span><a href="#local-6989586621680105663"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-type">Add</span></a></span><span> </span><span id="local-6989586621680105662"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105662"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680105661"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105661"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680105660"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105660"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-225"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680105659"><span class="annot"><span class="annottext">lexp :: String
</span><a href="#local-6989586621680105659"><span class="hs-identifier hs-var hs-var">lexp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105662"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; + &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105661"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-226"></span><span>            </span><span id="local-6989586621680105658"><span class="annot"><span class="annottext">rexp :: String
</span><a href="#local-6989586621680105658"><span class="hs-identifier hs-var hs-var">rexp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105660"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-227"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680105659"><span class="hs-identifier hs-var">lexp</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680105658"><span class="hs-identifier hs-var">rexp</span></a></span></span></span><span>
</span><span id="line-228"></span><span id="local-6989586621680105656"><span id="local-6989586621680105657"><span class="annot"><a href="NITTA.Intermediate.Functions.html#add"><span class="hs-identifier hs-type">add</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105657"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Value.html#Val"><span class="hs-identifier hs-type">Val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105656"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680105657"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680105657"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680105657"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#F"><span class="hs-identifier hs-type">F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105657"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105656"><span class="hs-identifier hs-type">x</span></a></span></span></span><span>
</span><span id="line-229"></span><span id="add"><span class="annot"><span class="annottext">add :: v -&gt; v -&gt; [v] -&gt; F v x
</span><a href="NITTA.Intermediate.Functions.html#add"><span class="hs-identifier hs-var hs-var">add</span></a></span></span><span> </span><span id="local-6989586621680105655"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105655"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680105654"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105654"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680105653"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680105653"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Add v x -&gt; F v x
forall f v x.
(Function f v, Patch f (v, v), Locks f v, Show f, Label f,
 FunctionSimulation f v x, Typeable f, Eq f) =&gt;
f -&gt; F v x
</span><a href="NITTA.Intermediate.Types.html#packF"><span class="hs-identifier hs-var">packF</span></a></span><span> </span><span class="annot"><span class="annottext">(Add v x -&gt; F v x) -&gt; Add v x -&gt; F v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; I v -&gt; O v -&gt; Add v x
forall v x. I v -&gt; I v -&gt; O v -&gt; Add v x
</span><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-var">Add</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; I v
forall v. v -&gt; I v
</span><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-var">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105655"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; I v
forall v. v -&gt; I v
</span><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-var">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105654"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(O v -&gt; Add v x) -&gt; O v -&gt; Add v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; O v
forall v. Set v -&gt; O v
</span><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-var">O</span></a></span><span> </span><span class="annot"><span class="annottext">(Set v -&gt; O v) -&gt; Set v -&gt; O v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Set v
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680105653"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-230"></span><span>
</span><span id="line-231"></span><span id="local-6989586621680105651"><span id="local-6989586621680105652"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680105647"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105652"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-type">Add</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105652"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105651"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105652"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-232"></span><span>    </span><span id="local-6989586621680105646"><span class="annot"><span class="annottext">inputs :: Add v x -&gt; Set v
</span><a href="#local-6989586621680105646"><span class="hs-identifier hs-var hs-var hs-var hs-var">inputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-type">Add</span></a></span><span> </span><span id="local-6989586621680105645"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105645"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680105644"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105644"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680105643"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105643"><span class="hs-identifier hs-var">_c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105645"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; Set v -&gt; Set v
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-operator hs-var">`union`</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105644"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-233"></span><span>    </span><span id="local-6989586621680105642"><span class="annot"><span class="annottext">outputs :: Add v x -&gt; Set v
</span><a href="#local-6989586621680105642"><span class="hs-identifier hs-var hs-var hs-var hs-var">outputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-type">Add</span></a></span><span> </span><span id="local-6989586621680105641"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105641"><span class="hs-identifier hs-var">_a</span></a></span></span><span> </span><span id="local-6989586621680105640"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105640"><span class="hs-identifier hs-var">_b</span></a></span></span><span> </span><span id="local-6989586621680105639"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105639"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105639"><span class="hs-identifier hs-var">c</span></a></span></span></span><span>
</span><span id="line-234"></span><span id="local-6989586621680105637"><span id="local-6989586621680105638"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105638"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-type">Add</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105638"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105637"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680105638"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680105638"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-235"></span><span>    </span><span id="local-6989586621680105635"><span class="annot"><span class="annottext">patch :: (v, v) -&gt; Add v x -&gt; Add v x
</span><a href="#local-6989586621680105635"><span class="hs-identifier hs-var hs-var hs-var hs-var">patch</span></a></span></span><span> </span><span id="local-6989586621680105634"><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105634"><span class="hs-identifier hs-var">diff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-type">Add</span></a></span><span> </span><span id="local-6989586621680105633"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105633"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680105632"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105632"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680105631"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105631"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; I v -&gt; O v -&gt; Add v x
forall v x. I v -&gt; I v -&gt; O v -&gt; Add v x
</span><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-var">Add</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105634"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105633"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105634"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105632"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; O v -&gt; O v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105634"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105631"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-236"></span><span id="local-6989586621680105629"><span id="local-6989586621680105630"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105630"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Locks"><span class="hs-identifier hs-type">Locks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-type">Add</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105630"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105629"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105630"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-237"></span><span>    </span><span id="local-6989586621680105626"><span class="annot"><span class="annottext">locks :: Add v x -&gt; [Lock v]
</span><a href="#local-6989586621680105626"><span class="hs-identifier hs-var hs-var hs-var hs-var">locks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Add v x -&gt; [Lock v]
forall f v. Function f v =&gt; f -&gt; [Lock v]
</span><a href="NITTA.Intermediate.Types.html#inputsLockOutputs"><span class="hs-identifier hs-var">inputsLockOutputs</span></a></span></span></span><span>
</span><span id="line-238"></span><span id="local-6989586621680105624"><span id="local-6989586621680105625"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105625"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="annot"><a href="#local-6989586621680105624"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#FunctionSimulation"><span class="hs-identifier hs-type">FunctionSimulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-type">Add</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105625"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105624"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105625"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105624"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-239"></span><span>    </span><span id="local-6989586621680105622"><span class="annot"><span class="annottext">simulate :: CycleCntx v x -&gt; Add v x -&gt; [(v, x)]
</span><a href="#local-6989586621680105622"><span class="hs-identifier hs-var hs-var hs-var hs-var">simulate</span></a></span></span><span> </span><span id="local-6989586621680105621"><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680105621"><span class="hs-identifier hs-var">cntx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Add"><span class="hs-identifier hs-type">Add</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span id="local-6989586621680105620"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105620"><span class="hs-identifier hs-var">v1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span id="local-6989586621680105619"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105619"><span class="hs-identifier hs-var">v2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span id="local-6989586621680105618"><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680105618"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-240"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680105617"><span class="annot"><span class="annottext">x1 :: x
</span><a href="#local-6989586621680105617"><span class="hs-identifier hs-var hs-var">x1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680105621"><span class="hs-identifier hs-var">cntx</span></a></span><span> </span><span class="annot"><span class="annottext">CycleCntx v x -&gt; v -&gt; x
forall a p.
(Eq a, Hashable a, ToString a) =&gt;
CycleCntx a p -&gt; a -&gt; p
</span><a href="NITTA.Intermediate.Types.html#getCntx"><span class="hs-operator hs-var">`getCntx`</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105620"><span class="hs-identifier hs-var">v1</span></a></span><span>
</span><span id="line-241"></span><span>            </span><span id="local-6989586621680105616"><span class="annot"><span class="annottext">x2 :: x
</span><a href="#local-6989586621680105616"><span class="hs-identifier hs-var hs-var">x2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680105621"><span class="hs-identifier hs-var">cntx</span></a></span><span> </span><span class="annot"><span class="annottext">CycleCntx v x -&gt; v -&gt; x
forall a p.
(Eq a, Hashable a, ToString a) =&gt;
CycleCntx a p -&gt; a -&gt; p
</span><a href="NITTA.Intermediate.Types.html#getCntx"><span class="hs-operator hs-var">`getCntx`</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105619"><span class="hs-identifier hs-var">v2</span></a></span><span>
</span><span id="line-242"></span><span>            </span><span id="local-6989586621680105615"><span class="annot"><span class="annottext">y :: x
</span><a href="#local-6989586621680105615"><span class="hs-identifier hs-var hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105617"><span class="hs-identifier hs-var">x1</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; x -&gt; x
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105616"><span class="hs-identifier hs-var">x2</span></a></span><span>
</span><span id="line-243"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105613"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105615"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680105613"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105613"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; [v]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680105618"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-244"></span><span>
</span><span id="line-245"></span><span class="hs-keyword">data</span><span> </span><span id="Sub"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-var">Sub</span></a></span></span><span> </span><span id="local-6989586621680106117"><span class="annot"><a href="#local-6989586621680106117"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621680106116"><span class="annot"><a href="#local-6989586621680106116"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Sub"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-var">Sub</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680106117"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680106117"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680106117"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680105608"><span id="local-6989586621680105610"><span class="annot"><span class="annottext">Sub v x -&gt; Sub v x -&gt; Bool
(Sub v x -&gt; Sub v x -&gt; Bool)
-&gt; (Sub v x -&gt; Sub v x -&gt; Bool) -&gt; Eq (Sub v x)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall v x. Eq v =&gt; Sub v x -&gt; Sub v x -&gt; Bool
/= :: Sub v x -&gt; Sub v x -&gt; Bool
$c/= :: forall v x. Eq v =&gt; Sub v x -&gt; Sub v x -&gt; Bool
== :: Sub v x -&gt; Sub v x -&gt; Bool
$c== :: forall v x. Eq v =&gt; Sub v x -&gt; Sub v x -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-246"></span><span id="local-6989586621680105606"><span id="local-6989586621680105607"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105607"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105606"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680105604"><span class="annot"><span class="annottext">label :: Sub v x -&gt; String
</span><a href="#local-6989586621680105604"><span class="hs-keyword hs-var hs-var hs-var hs-var">label</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-&quot;</span></span></span></span><span>
</span><span id="line-247"></span><span id="local-6989586621680105602"><span id="local-6989586621680105603"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680105597"><span id="local-6989586621680105600"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105603"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105603"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105602"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-248"></span><span>    </span><span id="local-6989586621680105596"><span class="annot"><span class="annottext">show :: Sub v x -&gt; String
</span><a href="#local-6989586621680105596"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span> </span><span id="local-6989586621680105595"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105595"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680105594"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105594"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680105593"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105593"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-249"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680105592"><span class="annot"><span class="annottext">lexp :: String
</span><a href="#local-6989586621680105592"><span class="hs-identifier hs-var hs-var">lexp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105595"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; - &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105594"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-250"></span><span>            </span><span id="local-6989586621680105591"><span class="annot"><span class="annottext">rexp :: String
</span><a href="#local-6989586621680105591"><span class="hs-identifier hs-var hs-var">rexp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105593"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-251"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680105592"><span class="hs-identifier hs-var">lexp</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680105591"><span class="hs-identifier hs-var">rexp</span></a></span></span></span><span>
</span><span id="line-252"></span><span id="local-6989586621680105589"><span id="local-6989586621680105590"><span class="annot"><a href="NITTA.Intermediate.Functions.html#sub"><span class="hs-identifier hs-type">sub</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105590"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Value.html#Val"><span class="hs-identifier hs-type">Val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105589"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680105590"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680105590"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680105590"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#F"><span class="hs-identifier hs-type">F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105590"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105589"><span class="hs-identifier hs-type">x</span></a></span></span></span><span>
</span><span id="line-253"></span><span id="sub"><span class="annot"><span class="annottext">sub :: v -&gt; v -&gt; [v] -&gt; F v x
</span><a href="NITTA.Intermediate.Functions.html#sub"><span class="hs-identifier hs-var hs-var">sub</span></a></span></span><span> </span><span id="local-6989586621680105588"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105588"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680105587"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105587"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680105586"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680105586"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Sub v x -&gt; F v x
forall f v x.
(Function f v, Patch f (v, v), Locks f v, Show f, Label f,
 FunctionSimulation f v x, Typeable f, Eq f) =&gt;
f -&gt; F v x
</span><a href="NITTA.Intermediate.Types.html#packF"><span class="hs-identifier hs-var">packF</span></a></span><span> </span><span class="annot"><span class="annottext">(Sub v x -&gt; F v x) -&gt; Sub v x -&gt; F v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; I v -&gt; O v -&gt; Sub v x
forall v x. I v -&gt; I v -&gt; O v -&gt; Sub v x
</span><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-var">Sub</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; I v
forall v. v -&gt; I v
</span><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-var">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105588"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; I v
forall v. v -&gt; I v
</span><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-var">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105587"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(O v -&gt; Sub v x) -&gt; O v -&gt; Sub v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; O v
forall v. Set v -&gt; O v
</span><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-var">O</span></a></span><span> </span><span class="annot"><span class="annottext">(Set v -&gt; O v) -&gt; Set v -&gt; O v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Set v
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680105586"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-254"></span><span>
</span><span id="line-255"></span><span id="local-6989586621680105584"><span id="local-6989586621680105585"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680105580"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105585"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105585"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105584"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105585"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-256"></span><span>    </span><span id="local-6989586621680105579"><span class="annot"><span class="annottext">inputs :: Sub v x -&gt; Set v
</span><a href="#local-6989586621680105579"><span class="hs-identifier hs-var hs-var hs-var hs-var">inputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span> </span><span id="local-6989586621680105578"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105578"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680105577"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105577"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680105576"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105576"><span class="hs-identifier hs-var">_c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105578"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; Set v -&gt; Set v
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-operator hs-var">`union`</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105577"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-257"></span><span>    </span><span id="local-6989586621680105575"><span class="annot"><span class="annottext">outputs :: Sub v x -&gt; Set v
</span><a href="#local-6989586621680105575"><span class="hs-identifier hs-var hs-var hs-var hs-var">outputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span> </span><span id="local-6989586621680105574"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105574"><span class="hs-identifier hs-var">_a</span></a></span></span><span> </span><span id="local-6989586621680105573"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105573"><span class="hs-identifier hs-var">_b</span></a></span></span><span> </span><span id="local-6989586621680105572"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105572"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105572"><span class="hs-identifier hs-var">c</span></a></span></span></span><span>
</span><span id="line-258"></span><span id="local-6989586621680105570"><span id="local-6989586621680105571"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105571"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105571"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105570"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680105571"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680105571"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-259"></span><span>    </span><span id="local-6989586621680105568"><span class="annot"><span class="annottext">patch :: (v, v) -&gt; Sub v x -&gt; Sub v x
</span><a href="#local-6989586621680105568"><span class="hs-identifier hs-var hs-var hs-var hs-var">patch</span></a></span></span><span> </span><span id="local-6989586621680105567"><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105567"><span class="hs-identifier hs-var">diff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span> </span><span id="local-6989586621680105566"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105566"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680105565"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105565"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680105564"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105564"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; I v -&gt; O v -&gt; Sub v x
forall v x. I v -&gt; I v -&gt; O v -&gt; Sub v x
</span><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-var">Sub</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105567"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105566"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105567"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105565"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; O v -&gt; O v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105567"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105564"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-260"></span><span id="local-6989586621680105562"><span id="local-6989586621680105563"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105563"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Locks"><span class="hs-identifier hs-type">Locks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105563"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105562"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105563"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-261"></span><span>    </span><span id="local-6989586621680105559"><span class="annot"><span class="annottext">locks :: Sub v x -&gt; [Lock v]
</span><a href="#local-6989586621680105559"><span class="hs-identifier hs-var hs-var hs-var hs-var">locks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Sub v x -&gt; [Lock v]
forall f v. Function f v =&gt; f -&gt; [Lock v]
</span><a href="NITTA.Intermediate.Types.html#inputsLockOutputs"><span class="hs-identifier hs-var">inputsLockOutputs</span></a></span></span></span><span>
</span><span id="line-262"></span><span id="local-6989586621680105557"><span id="local-6989586621680105558"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105558"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="annot"><a href="#local-6989586621680105557"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#FunctionSimulation"><span class="hs-identifier hs-type">FunctionSimulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105558"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105557"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105558"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105557"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-263"></span><span>    </span><span id="local-6989586621680105555"><span class="annot"><span class="annottext">simulate :: CycleCntx v x -&gt; Sub v x -&gt; [(v, x)]
</span><a href="#local-6989586621680105555"><span class="hs-identifier hs-var hs-var hs-var hs-var">simulate</span></a></span></span><span> </span><span id="local-6989586621680105554"><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680105554"><span class="hs-identifier hs-var">cntx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span id="local-6989586621680105553"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105553"><span class="hs-identifier hs-var">v1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span id="local-6989586621680105552"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105552"><span class="hs-identifier hs-var">v2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span id="local-6989586621680105551"><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680105551"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-264"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680105550"><span class="annot"><span class="annottext">x1 :: x
</span><a href="#local-6989586621680105550"><span class="hs-identifier hs-var hs-var">x1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680105554"><span class="hs-identifier hs-var">cntx</span></a></span><span> </span><span class="annot"><span class="annottext">CycleCntx v x -&gt; v -&gt; x
forall a p.
(Eq a, Hashable a, ToString a) =&gt;
CycleCntx a p -&gt; a -&gt; p
</span><a href="NITTA.Intermediate.Types.html#getCntx"><span class="hs-operator hs-var">`getCntx`</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105553"><span class="hs-identifier hs-var">v1</span></a></span><span>
</span><span id="line-265"></span><span>            </span><span id="local-6989586621680105549"><span class="annot"><span class="annottext">x2 :: x
</span><a href="#local-6989586621680105549"><span class="hs-identifier hs-var hs-var">x2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680105554"><span class="hs-identifier hs-var">cntx</span></a></span><span> </span><span class="annot"><span class="annottext">CycleCntx v x -&gt; v -&gt; x
forall a p.
(Eq a, Hashable a, ToString a) =&gt;
CycleCntx a p -&gt; a -&gt; p
</span><a href="NITTA.Intermediate.Types.html#getCntx"><span class="hs-operator hs-var">`getCntx`</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105552"><span class="hs-identifier hs-var">v2</span></a></span><span>
</span><span id="line-266"></span><span>            </span><span id="local-6989586621680105548"><span class="annot"><span class="annottext">y :: x
</span><a href="#local-6989586621680105548"><span class="hs-identifier hs-var hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105550"><span class="hs-identifier hs-var">x1</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; x -&gt; x
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105549"><span class="hs-identifier hs-var">x2</span></a></span><span>
</span><span id="line-267"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105547"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105548"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680105547"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105547"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; [v]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680105551"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-268"></span><span>
</span><span id="line-269"></span><span class="hs-keyword">data</span><span> </span><span id="Multiply"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-var">Multiply</span></a></span></span><span> </span><span id="local-6989586621680106098"><span class="annot"><a href="#local-6989586621680106098"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621680106097"><span class="annot"><a href="#local-6989586621680106097"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Multiply"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-var">Multiply</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680106098"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680106098"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680106098"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680105542"><span id="local-6989586621680105544"><span class="annot"><span class="annottext">Multiply v x -&gt; Multiply v x -&gt; Bool
(Multiply v x -&gt; Multiply v x -&gt; Bool)
-&gt; (Multiply v x -&gt; Multiply v x -&gt; Bool) -&gt; Eq (Multiply v x)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall v x. Eq v =&gt; Multiply v x -&gt; Multiply v x -&gt; Bool
/= :: Multiply v x -&gt; Multiply v x -&gt; Bool
$c/= :: forall v x. Eq v =&gt; Multiply v x -&gt; Multiply v x -&gt; Bool
== :: Multiply v x -&gt; Multiply v x -&gt; Bool
$c== :: forall v x. Eq v =&gt; Multiply v x -&gt; Multiply v x -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-270"></span><span id="local-6989586621680105540"><span id="local-6989586621680105541"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-type">Multiply</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105541"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105540"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680105538"><span class="annot"><span class="annottext">label :: Multiply v x -&gt; String
</span><a href="#local-6989586621680105538"><span class="hs-keyword hs-var hs-var hs-var hs-var">label</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-type">Multiply</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;*&quot;</span></span></span></span><span>
</span><span id="line-271"></span><span id="local-6989586621680105536"><span id="local-6989586621680105537"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680105531"><span id="local-6989586621680105534"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105537"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-type">Multiply</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105537"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105536"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-272"></span><span>    </span><span id="local-6989586621680105530"><span class="annot"><span class="annottext">show :: Multiply v x -&gt; String
</span><a href="#local-6989586621680105530"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-type">Multiply</span></a></span><span> </span><span id="local-6989586621680105529"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105529"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680105528"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105528"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680105527"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105527"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-273"></span><span>        </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105529"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; * &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105528"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">O v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105527"><span class="hs-identifier hs-var">c</span></a></span></span></span><span>
</span><span id="line-274"></span><span id="local-6989586621680105525"><span id="local-6989586621680105526"><span class="annot"><a href="NITTA.Intermediate.Functions.html#multiply"><span class="hs-identifier hs-type">multiply</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105526"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Value.html#Val"><span class="hs-identifier hs-type">Val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105525"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680105526"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680105526"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680105526"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#F"><span class="hs-identifier hs-type">F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105526"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105525"><span class="hs-identifier hs-type">x</span></a></span></span></span><span>
</span><span id="line-275"></span><span id="multiply"><span class="annot"><span class="annottext">multiply :: v -&gt; v -&gt; [v] -&gt; F v x
</span><a href="NITTA.Intermediate.Functions.html#multiply"><span class="hs-identifier hs-var hs-var">multiply</span></a></span></span><span> </span><span id="local-6989586621680105524"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105524"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680105523"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105523"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680105522"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680105522"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Multiply v x -&gt; F v x
forall f v x.
(Function f v, Patch f (v, v), Locks f v, Show f, Label f,
 FunctionSimulation f v x, Typeable f, Eq f) =&gt;
f -&gt; F v x
</span><a href="NITTA.Intermediate.Types.html#packF"><span class="hs-identifier hs-var">packF</span></a></span><span> </span><span class="annot"><span class="annottext">(Multiply v x -&gt; F v x) -&gt; Multiply v x -&gt; F v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; I v -&gt; O v -&gt; Multiply v x
forall v x. I v -&gt; I v -&gt; O v -&gt; Multiply v x
</span><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-var">Multiply</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; I v
forall v. v -&gt; I v
</span><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-var">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105524"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; I v
forall v. v -&gt; I v
</span><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-var">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105523"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(O v -&gt; Multiply v x) -&gt; O v -&gt; Multiply v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; O v
forall v. Set v -&gt; O v
</span><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-var">O</span></a></span><span> </span><span class="annot"><span class="annottext">(Set v -&gt; O v) -&gt; Set v -&gt; O v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Set v
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680105522"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-276"></span><span>
</span><span id="line-277"></span><span id="local-6989586621680105520"><span id="local-6989586621680105521"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680105516"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105521"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-type">Multiply</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105521"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105520"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105521"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-278"></span><span>    </span><span id="local-6989586621680105515"><span class="annot"><span class="annottext">inputs :: Multiply v x -&gt; Set v
</span><a href="#local-6989586621680105515"><span class="hs-identifier hs-var hs-var hs-var hs-var">inputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-type">Multiply</span></a></span><span> </span><span id="local-6989586621680105514"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105514"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680105513"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105513"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680105512"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105512"><span class="hs-identifier hs-var">_c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105514"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; Set v -&gt; Set v
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-operator hs-var">`union`</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105513"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-279"></span><span>    </span><span id="local-6989586621680105511"><span class="annot"><span class="annottext">outputs :: Multiply v x -&gt; Set v
</span><a href="#local-6989586621680105511"><span class="hs-identifier hs-var hs-var hs-var hs-var">outputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-type">Multiply</span></a></span><span> </span><span id="local-6989586621680105510"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105510"><span class="hs-identifier hs-var">_a</span></a></span></span><span> </span><span id="local-6989586621680105509"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105509"><span class="hs-identifier hs-var">_b</span></a></span></span><span> </span><span id="local-6989586621680105508"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105508"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105508"><span class="hs-identifier hs-var">c</span></a></span></span></span><span>
</span><span id="line-280"></span><span id="local-6989586621680105506"><span id="local-6989586621680105507"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105507"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-type">Multiply</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105507"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105506"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680105507"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680105507"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-281"></span><span>    </span><span id="local-6989586621680105504"><span class="annot"><span class="annottext">patch :: (v, v) -&gt; Multiply v x -&gt; Multiply v x
</span><a href="#local-6989586621680105504"><span class="hs-identifier hs-var hs-var hs-var hs-var">patch</span></a></span></span><span> </span><span id="local-6989586621680105503"><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105503"><span class="hs-identifier hs-var">diff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-type">Multiply</span></a></span><span> </span><span id="local-6989586621680105502"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105502"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680105501"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105501"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680105500"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105500"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; I v -&gt; O v -&gt; Multiply v x
forall v x. I v -&gt; I v -&gt; O v -&gt; Multiply v x
</span><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-var">Multiply</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105503"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105502"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105503"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105501"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; O v -&gt; O v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105503"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105500"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-282"></span><span id="local-6989586621680105498"><span id="local-6989586621680105499"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105499"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Locks"><span class="hs-identifier hs-type">Locks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-type">Multiply</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105499"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105498"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105499"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-283"></span><span>    </span><span id="local-6989586621680105495"><span class="annot"><span class="annottext">locks :: Multiply v x -&gt; [Lock v]
</span><a href="#local-6989586621680105495"><span class="hs-identifier hs-var hs-var hs-var hs-var">locks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Multiply v x -&gt; [Lock v]
forall f v. Function f v =&gt; f -&gt; [Lock v]
</span><a href="NITTA.Intermediate.Types.html#inputsLockOutputs"><span class="hs-identifier hs-var">inputsLockOutputs</span></a></span></span></span><span>
</span><span id="line-284"></span><span id="local-6989586621680105493"><span id="local-6989586621680105494"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105494"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="annot"><a href="#local-6989586621680105493"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#FunctionSimulation"><span class="hs-identifier hs-type">FunctionSimulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-type">Multiply</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105494"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105493"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105494"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105493"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-285"></span><span>    </span><span id="local-6989586621680105491"><span class="annot"><span class="annottext">simulate :: CycleCntx v x -&gt; Multiply v x -&gt; [(v, x)]
</span><a href="#local-6989586621680105491"><span class="hs-identifier hs-var hs-var hs-var hs-var">simulate</span></a></span></span><span> </span><span id="local-6989586621680105490"><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680105490"><span class="hs-identifier hs-var">cntx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Multiply"><span class="hs-identifier hs-type">Multiply</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span id="local-6989586621680105489"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105489"><span class="hs-identifier hs-var">v1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span id="local-6989586621680105488"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105488"><span class="hs-identifier hs-var">v2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span id="local-6989586621680105487"><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680105487"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-286"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680105486"><span class="annot"><span class="annottext">x1 :: x
</span><a href="#local-6989586621680105486"><span class="hs-identifier hs-var hs-var">x1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680105490"><span class="hs-identifier hs-var">cntx</span></a></span><span> </span><span class="annot"><span class="annottext">CycleCntx v x -&gt; v -&gt; x
forall a p.
(Eq a, Hashable a, ToString a) =&gt;
CycleCntx a p -&gt; a -&gt; p
</span><a href="NITTA.Intermediate.Types.html#getCntx"><span class="hs-operator hs-var">`getCntx`</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105489"><span class="hs-identifier hs-var">v1</span></a></span><span>
</span><span id="line-287"></span><span>            </span><span id="local-6989586621680105485"><span class="annot"><span class="annottext">x2 :: x
</span><a href="#local-6989586621680105485"><span class="hs-identifier hs-var hs-var">x2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680105490"><span class="hs-identifier hs-var">cntx</span></a></span><span> </span><span class="annot"><span class="annottext">CycleCntx v x -&gt; v -&gt; x
forall a p.
(Eq a, Hashable a, ToString a) =&gt;
CycleCntx a p -&gt; a -&gt; p
</span><a href="NITTA.Intermediate.Types.html#getCntx"><span class="hs-operator hs-var">`getCntx`</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105488"><span class="hs-identifier hs-var">v2</span></a></span><span>
</span><span id="line-288"></span><span>            </span><span id="local-6989586621680105484"><span class="annot"><span class="annottext">y :: x
</span><a href="#local-6989586621680105484"><span class="hs-identifier hs-var hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105486"><span class="hs-identifier hs-var">x1</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; x -&gt; x
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105485"><span class="hs-identifier hs-var">x2</span></a></span><span>
</span><span id="line-289"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105482"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105484"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680105482"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105482"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; [v]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680105487"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-290"></span><span>
</span><span id="line-291"></span><span class="hs-keyword">data</span><span> </span><span id="Division"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-var">Division</span></a></span></span><span> </span><span id="local-6989586621680106073"><span class="annot"><a href="#local-6989586621680106073"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621680106072"><span class="annot"><a href="#local-6989586621680106072"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Division"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-var">Division</span></a></span></span><span>
</span><span id="line-292"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Adenom%3ADivision"><span class="annot"><span class="annottext">Division v x -&gt; I v
</span><a href="NITTA.Intermediate.Functions.html#%24sel%3Adenom%3ADivision"><span class="hs-identifier hs-var hs-var">denom</span></a></span></span><span class="hs-special">,</span><span> </span><span id="%24sel%3Anumer%3ADivision"><span class="annot"><span class="annottext">Division v x -&gt; I v
</span><a href="NITTA.Intermediate.Functions.html#%24sel%3Anumer%3ADivision"><span class="hs-identifier hs-var hs-var">numer</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680106073"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-293"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Aquotient%3ADivision"><span class="annot"><span class="annottext">Division v x -&gt; O v
</span><a href="NITTA.Intermediate.Functions.html#%24sel%3Aquotient%3ADivision"><span class="hs-identifier hs-var hs-var">quotient</span></a></span></span><span class="hs-special">,</span><span> </span><span id="%24sel%3Aremain%3ADivision"><span class="annot"><span class="annottext">Division v x -&gt; O v
</span><a href="NITTA.Intermediate.Functions.html#%24sel%3Aremain%3ADivision"><span class="hs-identifier hs-var hs-var">remain</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680106073"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-294"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-295"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680105473"><span id="local-6989586621680105475"><span class="annot"><span class="annottext">Division v x -&gt; Division v x -&gt; Bool
(Division v x -&gt; Division v x -&gt; Bool)
-&gt; (Division v x -&gt; Division v x -&gt; Bool) -&gt; Eq (Division v x)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall v x. Eq v =&gt; Division v x -&gt; Division v x -&gt; Bool
/= :: Division v x -&gt; Division v x -&gt; Bool
$c/= :: forall v x. Eq v =&gt; Division v x -&gt; Division v x -&gt; Bool
== :: Division v x -&gt; Division v x -&gt; Bool
$c== :: forall v x. Eq v =&gt; Division v x -&gt; Division v x -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-296"></span><span id="local-6989586621680105471"><span id="local-6989586621680105472"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-type">Division</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105472"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105471"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680105469"><span class="annot"><span class="annottext">label :: Division v x -&gt; String
</span><a href="#local-6989586621680105469"><span class="hs-keyword hs-var hs-var hs-var hs-var">label</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-type">Division</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;/&quot;</span></span></span></span><span>
</span><span id="line-297"></span><span id="local-6989586621680105467"><span id="local-6989586621680105468"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680105462"><span id="local-6989586621680105465"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105468"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-type">Division</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105468"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105467"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-298"></span><span>    </span><span id="local-6989586621680105461"><span class="annot"><span class="annottext">show :: Division v x -&gt; String
</span><a href="#local-6989586621680105461"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-type">Division</span></a></span><span class="hs-special">{</span><span id="local-6989586621680105460"><span class="annot"><span class="annottext">I v
denom :: I v
$sel:denom:Division :: forall v x. Division v x -&gt; I v
</span><a href="#local-6989586621680105460"><span class="hs-identifier hs-var hs-var">denom</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680105459"><span class="annot"><span class="annottext">I v
numer :: I v
$sel:numer:Division :: forall v x. Division v x -&gt; I v
</span><a href="#local-6989586621680105459"><span class="hs-identifier hs-var hs-var">numer</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680105458"><span class="annot"><span class="annottext">O v
quotient :: O v
$sel:quotient:Division :: forall v x. Division v x -&gt; O v
</span><a href="#local-6989586621680105458"><span class="hs-identifier hs-var hs-var">quotient</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680105457"><span class="annot"><span class="annottext">O v
remain :: O v
$sel:remain:Division :: forall v x. Division v x -&gt; O v
</span><a href="#local-6989586621680105457"><span class="hs-identifier hs-var hs-var">remain</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-299"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680105456"><span class="annot"><span class="annottext">q :: String
</span><a href="#local-6989586621680105456"><span class="hs-identifier hs-var hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105459"><span class="hs-identifier hs-var">numer</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; / &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105460"><span class="hs-identifier hs-var">denom</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">O v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105458"><span class="hs-identifier hs-var">quotient</span></a></span><span>
</span><span id="line-300"></span><span>            </span><span id="local-6989586621680105455"><span class="annot"><span class="annottext">r :: String
</span><a href="#local-6989586621680105455"><span class="hs-identifier hs-var hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105459"><span class="hs-identifier hs-var">numer</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; mod &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105460"><span class="hs-identifier hs-var">denom</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">O v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105457"><span class="hs-identifier hs-var">remain</span></a></span><span>
</span><span id="line-301"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680105456"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;; &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680105455"><span class="hs-identifier hs-var">r</span></a></span></span></span><span>
</span><span id="line-302"></span><span id="local-6989586621680105453"><span id="local-6989586621680105454"><span class="annot"><a href="NITTA.Intermediate.Functions.html#division"><span class="hs-identifier hs-type">division</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105454"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Value.html#Val"><span class="hs-identifier hs-type">Val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105453"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680105454"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680105454"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680105454"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680105454"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#F"><span class="hs-identifier hs-type">F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105454"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105453"><span class="hs-identifier hs-type">x</span></a></span></span></span><span>
</span><span id="line-303"></span><span id="division"><span class="annot"><span class="annottext">division :: v -&gt; v -&gt; [v] -&gt; [v] -&gt; F v x
</span><a href="NITTA.Intermediate.Functions.html#division"><span class="hs-identifier hs-var hs-var">division</span></a></span></span><span> </span><span id="local-6989586621680105452"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105452"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621680105451"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105451"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680105450"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680105450"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span id="local-6989586621680105449"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680105449"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-304"></span><span>    </span><span class="annot"><span class="annottext">Division v x -&gt; F v x
forall f v x.
(Function f v, Patch f (v, v), Locks f v, Show f, Label f,
 FunctionSimulation f v x, Typeable f, Eq f) =&gt;
f -&gt; F v x
</span><a href="NITTA.Intermediate.Types.html#packF"><span class="hs-identifier hs-var">packF</span></a></span><span> </span><span class="annot"><span class="annottext">(Division v x -&gt; F v x) -&gt; Division v x -&gt; F v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-305"></span><span>        </span><span class="annot"><span class="annottext">Division :: forall v x. I v -&gt; I v -&gt; O v -&gt; O v -&gt; Division v x
</span><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-type">Division</span></a></span><span>
</span><span id="line-306"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:denom:Division :: I v
</span><a href="NITTA.Intermediate.Functions.html#%24sel%3Adenom%3ADivision"><span class="hs-identifier hs-var">denom</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">v -&gt; I v
forall v. v -&gt; I v
</span><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-var">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105452"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-307"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:numer:Division :: I v
</span><a href="NITTA.Intermediate.Functions.html#%24sel%3Anumer%3ADivision"><span class="hs-identifier hs-var">numer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">v -&gt; I v
forall v. v -&gt; I v
</span><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-var">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105451"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-308"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:quotient:Division :: O v
</span><a href="NITTA.Intermediate.Functions.html#%24sel%3Aquotient%3ADivision"><span class="hs-identifier hs-var">quotient</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; O v
forall v. Set v -&gt; O v
</span><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-var">O</span></a></span><span> </span><span class="annot"><span class="annottext">(Set v -&gt; O v) -&gt; Set v -&gt; O v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Set v
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680105450"><span class="hs-identifier hs-var">q</span></a></span><span>
</span><span id="line-309"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:remain:Division :: O v
</span><a href="NITTA.Intermediate.Functions.html#%24sel%3Aremain%3ADivision"><span class="hs-identifier hs-var">remain</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; O v
forall v. Set v -&gt; O v
</span><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-var">O</span></a></span><span> </span><span class="annot"><span class="annottext">(Set v -&gt; O v) -&gt; Set v -&gt; O v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Set v
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680105449"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-310"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span id="local-6989586621680105447"><span id="local-6989586621680105448"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680105443"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105448"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-type">Division</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105448"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105447"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105448"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-313"></span><span>    </span><span id="local-6989586621680105442"><span class="annot"><span class="annottext">inputs :: Division v x -&gt; Set v
</span><a href="#local-6989586621680105442"><span class="hs-identifier hs-var hs-var hs-var hs-var">inputs</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-type">Division</span></a></span><span class="hs-special">{</span><span id="local-6989586621680105441"><span class="annot"><span class="annottext">I v
denom :: I v
$sel:denom:Division :: forall v x. Division v x -&gt; I v
</span><a href="#local-6989586621680105441"><span class="hs-identifier hs-var hs-var">denom</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680105440"><span class="annot"><span class="annottext">I v
numer :: I v
$sel:numer:Division :: forall v x. Division v x -&gt; I v
</span><a href="#local-6989586621680105440"><span class="hs-identifier hs-var hs-var">numer</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105441"><span class="hs-identifier hs-var">denom</span></a></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; Set v -&gt; Set v
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-operator hs-var">`union`</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105440"><span class="hs-identifier hs-var">numer</span></a></span><span>
</span><span id="line-314"></span><span>    </span><span id="local-6989586621680105439"><span class="annot"><span class="annottext">outputs :: Division v x -&gt; Set v
</span><a href="#local-6989586621680105439"><span class="hs-identifier hs-var hs-var hs-var hs-var">outputs</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-type">Division</span></a></span><span class="hs-special">{</span><span id="local-6989586621680105438"><span class="annot"><span class="annottext">O v
quotient :: O v
$sel:quotient:Division :: forall v x. Division v x -&gt; O v
</span><a href="#local-6989586621680105438"><span class="hs-identifier hs-var hs-var">quotient</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680105437"><span class="annot"><span class="annottext">O v
remain :: O v
$sel:remain:Division :: forall v x. Division v x -&gt; O v
</span><a href="#local-6989586621680105437"><span class="hs-identifier hs-var hs-var">remain</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105438"><span class="hs-identifier hs-var">quotient</span></a></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; Set v -&gt; Set v
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-operator hs-var">`union`</span></span><span> </span><span class="annot"><span class="annottext">O v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105437"><span class="hs-identifier hs-var">remain</span></a></span></span></span><span>
</span><span id="line-315"></span><span id="local-6989586621680105435"><span id="local-6989586621680105436"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105436"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-type">Division</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105436"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105435"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680105436"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680105436"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-316"></span><span>    </span><span id="local-6989586621680105433"><span class="annot"><span class="annottext">patch :: (v, v) -&gt; Division v x -&gt; Division v x
</span><a href="#local-6989586621680105433"><span class="hs-identifier hs-var hs-var hs-var hs-var">patch</span></a></span></span><span> </span><span id="local-6989586621680105432"><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105432"><span class="hs-identifier hs-var">diff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-type">Division</span></a></span><span> </span><span id="local-6989586621680105431"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105431"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680105430"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105430"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680105429"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105429"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621680105428"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105428"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; I v -&gt; O v -&gt; O v -&gt; Division v x
forall v x. I v -&gt; I v -&gt; O v -&gt; O v -&gt; Division v x
</span><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-var">Division</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105432"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105431"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105432"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105430"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; O v -&gt; O v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105432"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105429"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; O v -&gt; O v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105432"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105428"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-317"></span><span id="local-6989586621680105426"><span id="local-6989586621680105427"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105427"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Locks"><span class="hs-identifier hs-type">Locks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-type">Division</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105427"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105426"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105427"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-318"></span><span>    </span><span id="local-6989586621680105423"><span class="annot"><span class="annottext">locks :: Division v x -&gt; [Lock v]
</span><a href="#local-6989586621680105423"><span class="hs-identifier hs-var hs-var hs-var hs-var">locks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Division v x -&gt; [Lock v]
forall f v. Function f v =&gt; f -&gt; [Lock v]
</span><a href="NITTA.Intermediate.Types.html#inputsLockOutputs"><span class="hs-identifier hs-var">inputsLockOutputs</span></a></span></span></span><span>
</span><span id="line-319"></span><span id="local-6989586621680105421"><span id="local-6989586621680105422"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105422"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integral</span></span><span> </span><span class="annot"><a href="#local-6989586621680105421"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#FunctionSimulation"><span class="hs-identifier hs-type">FunctionSimulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-type">Division</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105422"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105421"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105422"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105421"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-320"></span><span>    </span><span id="local-6989586621680105419"><span class="annot"><span class="annottext">simulate :: CycleCntx v x -&gt; Division v x -&gt; [(v, x)]
</span><a href="#local-6989586621680105419"><span class="hs-identifier hs-var hs-var hs-var hs-var">simulate</span></a></span></span><span> </span><span id="local-6989586621680105418"><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680105418"><span class="hs-identifier hs-var">cntx</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Division"><span class="hs-identifier hs-type">Division</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:denom:Division :: forall v x. Division v x -&gt; I v
</span><a href="NITTA.Intermediate.Functions.html#%24sel%3Adenom%3ADivision"><span class="hs-identifier hs-var">denom</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span id="local-6989586621680105417"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105417"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:numer:Division :: forall v x. Division v x -&gt; I v
</span><a href="NITTA.Intermediate.Functions.html#%24sel%3Anumer%3ADivision"><span class="hs-identifier hs-var">numer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span id="local-6989586621680105416"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105416"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:quotient:Division :: forall v x. Division v x -&gt; O v
</span><a href="NITTA.Intermediate.Functions.html#%24sel%3Aquotient%3ADivision"><span class="hs-identifier hs-var">quotient</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span id="local-6989586621680105415"><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680105415"><span class="hs-identifier hs-var">qs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:remain:Division :: forall v x. Division v x -&gt; O v
</span><a href="NITTA.Intermediate.Functions.html#%24sel%3Aremain%3ADivision"><span class="hs-identifier hs-var">remain</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span id="local-6989586621680105414"><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680105414"><span class="hs-identifier hs-var">rs</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-321"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680105413"><span class="annot"><span class="annottext">dx :: x
</span><a href="#local-6989586621680105413"><span class="hs-identifier hs-var hs-var">dx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680105418"><span class="hs-identifier hs-var">cntx</span></a></span><span> </span><span class="annot"><span class="annottext">CycleCntx v x -&gt; v -&gt; x
forall a p.
(Eq a, Hashable a, ToString a) =&gt;
CycleCntx a p -&gt; a -&gt; p
</span><a href="NITTA.Intermediate.Types.html#getCntx"><span class="hs-operator hs-var">`getCntx`</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105417"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-322"></span><span>            </span><span id="local-6989586621680105412"><span class="annot"><span class="annottext">nx :: x
</span><a href="#local-6989586621680105412"><span class="hs-identifier hs-var hs-var">nx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680105418"><span class="hs-identifier hs-var">cntx</span></a></span><span> </span><span class="annot"><span class="annottext">CycleCntx v x -&gt; v -&gt; x
forall a p.
(Eq a, Hashable a, ToString a) =&gt;
CycleCntx a p -&gt; a -&gt; p
</span><a href="NITTA.Intermediate.Types.html#getCntx"><span class="hs-operator hs-var">`getCntx`</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105416"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-323"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621680105411"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105411"><span class="hs-identifier hs-var">qx</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680105410"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105410"><span class="hs-identifier hs-var">rx</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105413"><span class="hs-identifier hs-var">dx</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; x -&gt; (x, x)
forall a. Integral a =&gt; a -&gt; a -&gt; (a, a)
</span><span class="hs-operator hs-var">`quotRem`</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105412"><span class="hs-identifier hs-var">nx</span></a></span><span>
</span><span id="line-324"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105408"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105411"><span class="hs-identifier hs-var">qx</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680105408"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105408"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; [v]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680105415"><span class="hs-identifier hs-var">qs</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[(v, x)] -&gt; [(v, x)] -&gt; [(v, x)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105407"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105410"><span class="hs-identifier hs-var">rx</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680105407"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105407"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; [v]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680105414"><span class="hs-identifier hs-var">rs</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-325"></span><span>
</span><span id="line-326"></span><span class="hs-keyword">data</span><span> </span><span id="Neg"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-var">Neg</span></a></span></span><span> </span><span id="local-6989586621680106050"><span class="annot"><a href="#local-6989586621680106050"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621680106049"><span class="annot"><a href="#local-6989586621680106049"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Neg"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-var">Neg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680106050"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680106050"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680105402"><span id="local-6989586621680105404"><span class="annot"><span class="annottext">Neg v x -&gt; Neg v x -&gt; Bool
(Neg v x -&gt; Neg v x -&gt; Bool)
-&gt; (Neg v x -&gt; Neg v x -&gt; Bool) -&gt; Eq (Neg v x)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall v x. Eq v =&gt; Neg v x -&gt; Neg v x -&gt; Bool
/= :: Neg v x -&gt; Neg v x -&gt; Bool
$c/= :: forall v x. Eq v =&gt; Neg v x -&gt; Neg v x -&gt; Bool
== :: Neg v x -&gt; Neg v x -&gt; Bool
$c== :: forall v x. Eq v =&gt; Neg v x -&gt; Neg v x -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-327"></span><span id="local-6989586621680105400"><span id="local-6989586621680105401"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-type">Neg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105401"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105400"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680105398"><span class="annot"><span class="annottext">label :: Neg v x -&gt; String
</span><a href="#local-6989586621680105398"><span class="hs-keyword hs-var hs-var hs-var hs-var">label</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-type">Neg</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;neg&quot;</span></span></span></span><span>
</span><span id="line-328"></span><span id="local-6989586621680105396"><span id="local-6989586621680105397"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680105391"><span id="local-6989586621680105394"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105397"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-type">Neg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105397"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105396"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-329"></span><span>    </span><span id="local-6989586621680105390"><span class="annot"><span class="annottext">show :: Neg v x -&gt; String
</span><a href="#local-6989586621680105390"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-type">Neg</span></a></span><span> </span><span id="local-6989586621680105389"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105389"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680105388"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105388"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105389"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">O v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105388"><span class="hs-identifier hs-var">o</span></a></span></span></span><span>
</span><span id="line-330"></span><span>
</span><span id="line-331"></span><span id="local-6989586621680105386"><span id="local-6989586621680105387"><span class="annot"><a href="NITTA.Intermediate.Functions.html#neg"><span class="hs-identifier hs-type">neg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105387"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Value.html#Val"><span class="hs-identifier hs-type">Val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105386"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680105387"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680105387"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#F"><span class="hs-identifier hs-type">F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105387"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105386"><span class="hs-identifier hs-type">x</span></a></span></span></span><span>
</span><span id="line-332"></span><span id="neg"><span class="annot"><span class="annottext">neg :: v -&gt; [v] -&gt; F v x
</span><a href="NITTA.Intermediate.Functions.html#neg"><span class="hs-identifier hs-var hs-var">neg</span></a></span></span><span> </span><span id="local-6989586621680105385"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105385"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680105384"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680105384"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Neg v x -&gt; F v x
forall f v x.
(Function f v, Patch f (v, v), Locks f v, Show f, Label f,
 FunctionSimulation f v x, Typeable f, Eq f) =&gt;
f -&gt; F v x
</span><a href="NITTA.Intermediate.Types.html#packF"><span class="hs-identifier hs-var">packF</span></a></span><span> </span><span class="annot"><span class="annottext">(Neg v x -&gt; F v x) -&gt; Neg v x -&gt; F v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; O v -&gt; Neg v x
forall v x. I v -&gt; O v -&gt; Neg v x
</span><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-var">Neg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; I v
forall v. v -&gt; I v
</span><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-var">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105385"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(O v -&gt; Neg v x) -&gt; O v -&gt; Neg v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; O v
forall v. Set v -&gt; O v
</span><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-var">O</span></a></span><span> </span><span class="annot"><span class="annottext">(Set v -&gt; O v) -&gt; Set v -&gt; O v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Set v
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680105384"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-333"></span><span>
</span><span id="line-334"></span><span id="local-6989586621680105382"><span id="local-6989586621680105383"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680105378"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621680105383"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-type">Neg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105383"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105382"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105383"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-335"></span><span>    </span><span id="local-6989586621680105377"><span class="annot"><span class="annottext">inputs :: Neg v x -&gt; Set v
</span><a href="#local-6989586621680105377"><span class="hs-identifier hs-var hs-var hs-var hs-var">inputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-type">Neg</span></a></span><span> </span><span id="local-6989586621680105376"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105376"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="annot"><span class="annottext">O v
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105376"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-336"></span><span>    </span><span id="local-6989586621680105375"><span class="annot"><span class="annottext">outputs :: Neg v x -&gt; Set v
</span><a href="#local-6989586621680105375"><span class="hs-identifier hs-var hs-var hs-var hs-var">outputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-type">Neg</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680105374"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105374"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105374"><span class="hs-identifier hs-var">o</span></a></span></span></span><span>
</span><span id="line-337"></span><span id="local-6989586621680105372"><span id="local-6989586621680105373"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621680105373"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-type">Neg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105373"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105372"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680105373"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680105373"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-338"></span><span>    </span><span id="local-6989586621680105370"><span class="annot"><span class="annottext">patch :: (v, v) -&gt; Neg v x -&gt; Neg v x
</span><a href="#local-6989586621680105370"><span class="hs-identifier hs-var hs-var hs-var hs-var">patch</span></a></span></span><span> </span><span id="local-6989586621680105369"><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105369"><span class="hs-identifier hs-var">diff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-type">Neg</span></a></span><span> </span><span id="local-6989586621680105368"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105368"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680105367"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105367"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; O v -&gt; Neg v x
forall v x. I v -&gt; O v -&gt; Neg v x
</span><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-var">Neg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105369"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105368"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; O v -&gt; O v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105369"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105367"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-339"></span><span id="local-6989586621680105365"><span id="local-6989586621680105366"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105366"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Locks"><span class="hs-identifier hs-type">Locks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-type">Neg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105366"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105365"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105366"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-340"></span><span>    </span><span id="local-6989586621680105362"><span class="annot"><span class="annottext">locks :: Neg v x -&gt; [Lock v]
</span><a href="#local-6989586621680105362"><span class="hs-identifier hs-var hs-var hs-var hs-var">locks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Neg v x -&gt; [Lock v]
forall f v. Function f v =&gt; f -&gt; [Lock v]
</span><a href="NITTA.Intermediate.Types.html#inputsLockOutputs"><span class="hs-identifier hs-var">inputsLockOutputs</span></a></span></span></span><span>
</span><span id="line-341"></span><span id="local-6989586621680105360"><span id="local-6989586621680105361"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105361"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="annot"><a href="#local-6989586621680105360"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#FunctionSimulation"><span class="hs-identifier hs-type">FunctionSimulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-type">Neg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105361"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105360"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105361"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105360"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-342"></span><span>    </span><span id="local-6989586621680105358"><span class="annot"><span class="annottext">simulate :: CycleCntx v x -&gt; Neg v x -&gt; [(v, x)]
</span><a href="#local-6989586621680105358"><span class="hs-identifier hs-var hs-var hs-var hs-var">simulate</span></a></span></span><span> </span><span id="local-6989586621680105357"><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680105357"><span class="hs-identifier hs-var">cntx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Neg"><span class="hs-identifier hs-type">Neg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span id="local-6989586621680105356"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105356"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span id="local-6989586621680105355"><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680105355"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-343"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680105354"><span class="annot"><span class="annottext">x1 :: x
</span><a href="#local-6989586621680105354"><span class="hs-identifier hs-var hs-var">x1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680105357"><span class="hs-identifier hs-var">cntx</span></a></span><span> </span><span class="annot"><span class="annottext">CycleCntx v x -&gt; v -&gt; x
forall a p.
(Eq a, Hashable a, ToString a) =&gt;
CycleCntx a p -&gt; a -&gt; p
</span><a href="NITTA.Intermediate.Types.html#getCntx"><span class="hs-operator hs-var">`getCntx`</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105356"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-344"></span><span>            </span><span id="local-6989586621680105353"><span class="annot"><span class="annottext">y :: x
</span><a href="#local-6989586621680105353"><span class="hs-identifier hs-var hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">-</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105354"><span class="hs-identifier hs-var">x1</span></a></span><span>
</span><span id="line-345"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105352"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105353"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680105352"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105352"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; [v]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680105355"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-346"></span><span>
</span><span id="line-347"></span><span class="hs-keyword">data</span><span> </span><span id="Constant"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-var">Constant</span></a></span></span><span> </span><span id="local-6989586621680106030"><span class="annot"><a href="#local-6989586621680106030"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621680106031"><span class="annot"><a href="#local-6989586621680106031"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Constant"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-var">Constant</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#X"><span class="hs-identifier hs-type">X</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680106031"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680106030"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680105347"><span id="local-6989586621680105349"><span class="annot"><span class="annottext">Constant v x -&gt; Constant v x -&gt; Bool
(Constant v x -&gt; Constant v x -&gt; Bool)
-&gt; (Constant v x -&gt; Constant v x -&gt; Bool) -&gt; Eq (Constant v x)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall v x. (Eq x, Eq v) =&gt; Constant v x -&gt; Constant v x -&gt; Bool
/= :: Constant v x -&gt; Constant v x -&gt; Bool
$c/= :: forall v x. (Eq x, Eq v) =&gt; Constant v x -&gt; Constant v x -&gt; Bool
== :: Constant v x -&gt; Constant v x -&gt; Bool
$c== :: forall v x. (Eq x, Eq v) =&gt; Constant v x -&gt; Constant v x -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-348"></span><span id="local-6989586621680105345"><span id="local-6989586621680105346"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621680105346"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-type">Constant</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105345"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105346"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680105343"><span class="annot"><span class="annottext">label :: Constant v x -&gt; String
</span><a href="#local-6989586621680105343"><span class="hs-keyword hs-var hs-var hs-var hs-var">label</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-type">Constant</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#X"><span class="hs-identifier hs-type">X</span></a></span><span> </span><span id="local-6989586621680105342"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105342"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">O v
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105342"><span class="hs-identifier hs-var">x</span></a></span></span></span><span>
</span><span id="line-349"></span><span id="local-6989586621680105340"><span id="local-6989586621680105341"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680105335"><span id="local-6989586621680105338"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105341"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621680105340"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-type">Constant</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105341"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105340"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-350"></span><span>    </span><span id="local-6989586621680105334"><span class="annot"><span class="annottext">show :: Constant v x -&gt; String
</span><a href="#local-6989586621680105334"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-type">Constant</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#X"><span class="hs-identifier hs-type">X</span></a></span><span> </span><span id="local-6989586621680105333"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105333"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680105332"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105332"><span class="hs-identifier hs-var">os</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;const(&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105333"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;) = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">O v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105332"><span class="hs-identifier hs-var">os</span></a></span></span></span><span>
</span><span id="line-351"></span><span id="local-6989586621680105330"><span id="local-6989586621680105331"><span class="annot"><a href="NITTA.Intermediate.Functions.html#constant"><span class="hs-identifier hs-type">constant</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105331"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Value.html#Val"><span class="hs-identifier hs-type">Val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105330"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680105330"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680105331"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#F"><span class="hs-identifier hs-type">F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105331"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105330"><span class="hs-identifier hs-type">x</span></a></span></span></span><span>
</span><span id="line-352"></span><span id="constant"><span class="annot"><span class="annottext">constant :: x -&gt; [v] -&gt; F v x
</span><a href="NITTA.Intermediate.Functions.html#constant"><span class="hs-identifier hs-var hs-var">constant</span></a></span></span><span> </span><span id="local-6989586621680105329"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105329"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680105328"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680105328"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Constant v x -&gt; F v x
forall f v x.
(Function f v, Patch f (v, v), Locks f v, Show f, Label f,
 FunctionSimulation f v x, Typeable f, Eq f) =&gt;
f -&gt; F v x
</span><a href="NITTA.Intermediate.Types.html#packF"><span class="hs-identifier hs-var">packF</span></a></span><span> </span><span class="annot"><span class="annottext">(Constant v x -&gt; F v x) -&gt; Constant v x -&gt; F v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">X x -&gt; O v -&gt; Constant v x
forall v x. X x -&gt; O v -&gt; Constant v x
</span><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-var">Constant</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x -&gt; X x
forall x. x -&gt; X x
</span><a href="NITTA.Intermediate.Types.html#X"><span class="hs-identifier hs-var">X</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105329"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(O v -&gt; Constant v x) -&gt; O v -&gt; Constant v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; O v
forall v. Set v -&gt; O v
</span><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-var">O</span></a></span><span> </span><span class="annot"><span class="annottext">(Set v -&gt; O v) -&gt; Set v -&gt; O v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Set v
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680105328"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-353"></span><span id="isConst"><span class="annot"><span class="annottext">isConst :: F v x -&gt; Bool
</span><a href="NITTA.Intermediate.Functions.html#isConst"><span class="hs-identifier hs-var hs-var">isConst</span></a></span></span><span> </span><span id="local-6989586621680105327"><span class="annot"><span class="annottext">F v x
</span><a href="#local-6989586621680105327"><span class="hs-identifier hs-var">f</span></a></span></span><span>
</span><span id="line-354"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-type">Constant</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F v x -&gt; Maybe (Constant v x)
forall (f :: * -&gt; * -&gt; *) v x.
(Typeable f, Typeable v, Typeable x) =&gt;
F v x -&gt; Maybe (f v x)
</span><a href="NITTA.Intermediate.Types.html#castF"><span class="hs-identifier hs-var">castF</span></a></span><span> </span><span class="annot"><span class="annottext">F v x
</span><a href="#local-6989586621680105327"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-355"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-356"></span><span>
</span><span id="line-357"></span><span id="local-6989586621680105325"><span id="local-6989586621680105326"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680105320"><span id="local-6989586621680105323"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621680105326"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621680105326"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621680105326"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-type">Constant</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105325"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105326"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105325"><span class="hs-identifier hs-type">v</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-358"></span><span>    </span><span id="local-6989586621680105319"><span class="annot"><span class="annottext">outputs :: Constant v x -&gt; Set v
</span><a href="#local-6989586621680105319"><span class="hs-identifier hs-var hs-var hs-var hs-var">outputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-type">Constant</span></a></span><span> </span><span class="annot"><span class="annottext">X x
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680105318"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105318"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105318"><span class="hs-identifier hs-var">o</span></a></span></span></span><span>
</span><span id="line-359"></span><span id="local-6989586621680105316"><span id="local-6989586621680105317"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105317"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-type">Constant</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105317"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105316"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680105317"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680105317"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-360"></span><span>    </span><span id="local-6989586621680105314"><span class="annot"><span class="annottext">patch :: (v, v) -&gt; Constant v x -&gt; Constant v x
</span><a href="#local-6989586621680105314"><span class="hs-identifier hs-var hs-var hs-var hs-var">patch</span></a></span></span><span> </span><span id="local-6989586621680105313"><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105313"><span class="hs-identifier hs-var">diff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-type">Constant</span></a></span><span> </span><span id="local-6989586621680105312"><span class="annot"><span class="annottext">X x
</span><a href="#local-6989586621680105312"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680105311"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105311"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">X x -&gt; O v -&gt; Constant v x
forall v x. X x -&gt; O v -&gt; Constant v x
</span><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-var">Constant</span></a></span><span> </span><span class="annot"><span class="annottext">X x
</span><a href="#local-6989586621680105312"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; O v -&gt; O v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105313"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105311"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-361"></span><span id="local-6989586621680105309"><span id="local-6989586621680105310"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105310"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Locks"><span class="hs-identifier hs-type">Locks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-type">Constant</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105310"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105309"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105310"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680105306"><span class="annot"><span class="annottext">locks :: Constant v x -&gt; [Lock v]
</span><a href="#local-6989586621680105306"><span class="hs-identifier hs-var hs-var hs-var hs-var">locks</span></a></span></span><span> </span><span class="annot"><span class="annottext">Constant v x
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span></span></span><span>
</span><span id="line-362"></span><span id="local-6989586621680105304"><span id="local-6989586621680105305"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#FunctionSimulation"><span class="hs-identifier hs-type">FunctionSimulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-type">Constant</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105305"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105304"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105305"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105304"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-363"></span><span>    </span><span id="local-6989586621680105302"><span class="annot"><span class="annottext">simulate :: CycleCntx v x -&gt; Constant v x -&gt; [(v, x)]
</span><a href="#local-6989586621680105302"><span class="hs-identifier hs-var hs-var hs-var hs-var">simulate</span></a></span></span><span> </span><span id="local-6989586621680105301"><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680105301"><span class="hs-identifier hs-var">_cntx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Constant"><span class="hs-identifier hs-type">Constant</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#X"><span class="hs-identifier hs-type">X</span></a></span><span> </span><span id="local-6989586621680105300"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105300"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span id="local-6989586621680105299"><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680105299"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105298"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680105300"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680105298"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105298"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; [v]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680105299"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-364"></span><span>
</span><span id="line-365"></span><span class="hs-comment">-- TODO: separete into two different functions</span><span>
</span><span id="line-366"></span><span>
</span><span id="line-367"></span><span class="hs-comment">-- |Functional unit that implements logic shift operations</span><span>
</span><span id="line-368"></span><span class="hs-keyword">data</span><span> </span><span id="ShiftLR"><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftLR"><span class="hs-identifier hs-var">ShiftLR</span></a></span></span><span> </span><span id="local-6989586621680106010"><span class="annot"><a href="#local-6989586621680106010"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621680106009"><span class="annot"><a href="#local-6989586621680106009"><span class="hs-identifier hs-type">x</span></a></span></span><span>
</span><span id="line-369"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="ShiftL"><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftL"><span class="hs-identifier hs-var">ShiftL</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680106010"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680106010"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-370"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="ShiftR"><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftR"><span class="hs-identifier hs-var">ShiftR</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680106010"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680106010"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-371"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680105292"><span id="local-6989586621680105294"><span class="annot"><span class="annottext">ShiftLR v x -&gt; ShiftLR v x -&gt; Bool
(ShiftLR v x -&gt; ShiftLR v x -&gt; Bool)
-&gt; (ShiftLR v x -&gt; ShiftLR v x -&gt; Bool) -&gt; Eq (ShiftLR v x)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall v x. Eq v =&gt; ShiftLR v x -&gt; ShiftLR v x -&gt; Bool
/= :: ShiftLR v x -&gt; ShiftLR v x -&gt; Bool
$c/= :: forall v x. Eq v =&gt; ShiftLR v x -&gt; ShiftLR v x -&gt; Bool
== :: ShiftLR v x -&gt; ShiftLR v x -&gt; Bool
$c== :: forall v x. Eq v =&gt; ShiftLR v x -&gt; ShiftLR v x -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-372"></span><span>
</span><span id="line-373"></span><span id="local-6989586621680105290"><span id="local-6989586621680105291"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680105285"><span id="local-6989586621680105288"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105291"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftLR"><span class="hs-identifier hs-type">ShiftLR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105291"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105290"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-374"></span><span>    </span><span id="local-6989586621680105284"><span class="annot"><span class="annottext">show :: ShiftLR v x -&gt; String
</span><a href="#local-6989586621680105284"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftL"><span class="hs-identifier hs-type">ShiftL</span></a></span><span> </span><span id="local-6989586621680105283"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680105283"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621680105282"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105282"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680105281"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105281"><span class="hs-identifier hs-var">os</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105282"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; &lt;&lt; &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680105283"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">O v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105281"><span class="hs-identifier hs-var">os</span></a></span><span>
</span><span id="line-375"></span><span>    </span><span class="annot"><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftR"><span class="hs-identifier hs-type">ShiftR</span></a></span><span> </span><span id="local-6989586621680105280"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680105280"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621680105279"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105279"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680105278"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105278"><span class="hs-identifier hs-var">os</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105279"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; &gt;&gt; &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680105280"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">O v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105278"><span class="hs-identifier hs-var">os</span></a></span></span></span><span>
</span><span id="line-376"></span><span id="local-6989586621680105276"><span id="local-6989586621680105277"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105277"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftLR"><span class="hs-identifier hs-type">ShiftLR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105277"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105276"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680105274"><span class="annot"><span class="annottext">label :: ShiftLR v x -&gt; String
</span><a href="#local-6989586621680105274"><span class="hs-keyword hs-var hs-var hs-var hs-var">label</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShiftLR v x -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span></span></span><span>
</span><span id="line-377"></span><span>
</span><span id="line-378"></span><span id="local-6989586621680105272"><span id="local-6989586621680105273"><span class="annot"><a href="NITTA.Intermediate.Functions.html#shiftL"><span class="hs-identifier hs-type">shiftL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105273"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Value.html#Val"><span class="hs-identifier hs-type">Val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105272"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680105273"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680105273"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#F"><span class="hs-identifier hs-type">F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105273"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105272"><span class="hs-identifier hs-type">x</span></a></span></span></span><span>
</span><span id="line-379"></span><span id="shiftL"><span class="annot"><span class="annottext">shiftL :: Int -&gt; v -&gt; [v] -&gt; F v x
</span><a href="NITTA.Intermediate.Functions.html#shiftL"><span class="hs-identifier hs-var hs-var">shiftL</span></a></span></span><span> </span><span id="local-6989586621680105271"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680105271"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621680105270"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105270"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680105269"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680105269"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShiftLR v x -&gt; F v x
forall f v x.
(Function f v, Patch f (v, v), Locks f v, Show f, Label f,
 FunctionSimulation f v x, Typeable f, Eq f) =&gt;
f -&gt; F v x
</span><a href="NITTA.Intermediate.Types.html#packF"><span class="hs-identifier hs-var">packF</span></a></span><span> </span><span class="annot"><span class="annottext">(ShiftLR v x -&gt; F v x) -&gt; ShiftLR v x -&gt; F v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; I v -&gt; O v -&gt; ShiftLR v x
forall v x. Int -&gt; I v -&gt; O v -&gt; ShiftLR v x
</span><a href="NITTA.Intermediate.Functions.html#ShiftL"><span class="hs-identifier hs-var">ShiftL</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680105271"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; I v
forall v. v -&gt; I v
</span><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-var">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105270"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(O v -&gt; ShiftLR v x) -&gt; O v -&gt; ShiftLR v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; O v
forall v. Set v -&gt; O v
</span><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-var">O</span></a></span><span> </span><span class="annot"><span class="annottext">(Set v -&gt; O v) -&gt; Set v -&gt; O v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Set v
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680105269"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-380"></span><span id="local-6989586621680105267"><span id="local-6989586621680105268"><span class="annot"><a href="NITTA.Intermediate.Functions.html#shiftR"><span class="hs-identifier hs-type">shiftR</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105268"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Value.html#Val"><span class="hs-identifier hs-type">Val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105267"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680105268"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680105268"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#F"><span class="hs-identifier hs-type">F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105268"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105267"><span class="hs-identifier hs-type">x</span></a></span></span></span><span>
</span><span id="line-381"></span><span id="shiftR"><span class="annot"><span class="annottext">shiftR :: Int -&gt; v -&gt; [v] -&gt; F v x
</span><a href="NITTA.Intermediate.Functions.html#shiftR"><span class="hs-identifier hs-var hs-var">shiftR</span></a></span></span><span> </span><span id="local-6989586621680105266"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680105266"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621680105265"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105265"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680105264"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680105264"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShiftLR v x -&gt; F v x
forall f v x.
(Function f v, Patch f (v, v), Locks f v, Show f, Label f,
 FunctionSimulation f v x, Typeable f, Eq f) =&gt;
f -&gt; F v x
</span><a href="NITTA.Intermediate.Types.html#packF"><span class="hs-identifier hs-var">packF</span></a></span><span> </span><span class="annot"><span class="annottext">(ShiftLR v x -&gt; F v x) -&gt; ShiftLR v x -&gt; F v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; I v -&gt; O v -&gt; ShiftLR v x
forall v x. Int -&gt; I v -&gt; O v -&gt; ShiftLR v x
</span><a href="NITTA.Intermediate.Functions.html#ShiftR"><span class="hs-identifier hs-var">ShiftR</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680105266"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; I v
forall v. v -&gt; I v
</span><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-var">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105265"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(O v -&gt; ShiftLR v x) -&gt; O v -&gt; ShiftLR v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; O v
forall v. Set v -&gt; O v
</span><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-var">O</span></a></span><span> </span><span class="annot"><span class="annottext">(Set v -&gt; O v) -&gt; Set v -&gt; O v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Set v
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680105264"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-382"></span><span>
</span><span id="line-383"></span><span id="local-6989586621680105262"><span id="local-6989586621680105263"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680105258"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105263"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftLR"><span class="hs-identifier hs-type">ShiftLR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105263"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105262"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105263"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-384"></span><span>    </span><span id="local-6989586621680105257"><span class="annot"><span class="annottext">inputs :: ShiftLR v x -&gt; Set v
</span><a href="#local-6989586621680105257"><span class="hs-identifier hs-var hs-var hs-var hs-var">inputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftL"><span class="hs-identifier hs-type">ShiftL</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680105256"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105256"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="annot"><span class="annottext">O v
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105256"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-385"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Types.html#inputs"><span class="hs-identifier hs-var">inputs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftR"><span class="hs-identifier hs-type">ShiftR</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680105255"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105255"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="annot"><span class="annottext">O v
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105255"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-386"></span><span>    </span><span id="local-6989586621680105254"><span class="annot"><span class="annottext">outputs :: ShiftLR v x -&gt; Set v
</span><a href="#local-6989586621680105254"><span class="hs-identifier hs-var hs-var hs-var hs-var">outputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftL"><span class="hs-identifier hs-type">ShiftL</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680105253"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105253"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105253"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-387"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Types.html#outputs"><span class="hs-identifier hs-var">outputs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftR"><span class="hs-identifier hs-type">ShiftR</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680105252"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105252"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105252"><span class="hs-identifier hs-var">o</span></a></span></span></span><span>
</span><span id="line-388"></span><span id="local-6989586621680105250"><span id="local-6989586621680105251"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105251"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftLR"><span class="hs-identifier hs-type">ShiftLR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105251"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105250"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680105251"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680105251"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-389"></span><span>    </span><span id="local-6989586621680105248"><span class="annot"><span class="annottext">patch :: (v, v) -&gt; ShiftLR v x -&gt; ShiftLR v x
</span><a href="#local-6989586621680105248"><span class="hs-identifier hs-var hs-var hs-var hs-var">patch</span></a></span></span><span> </span><span id="local-6989586621680105247"><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105247"><span class="hs-identifier hs-var">diff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftL"><span class="hs-identifier hs-type">ShiftL</span></a></span><span> </span><span id="local-6989586621680105246"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680105246"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621680105245"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105245"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680105244"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105244"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; I v -&gt; O v -&gt; ShiftLR v x
forall v x. Int -&gt; I v -&gt; O v -&gt; ShiftLR v x
</span><a href="NITTA.Intermediate.Functions.html#ShiftL"><span class="hs-identifier hs-var">ShiftL</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680105246"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105247"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105245"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; O v -&gt; O v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105247"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105244"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-390"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span id="local-6989586621680105243"><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105243"><span class="hs-identifier hs-var">diff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftR"><span class="hs-identifier hs-type">ShiftR</span></a></span><span> </span><span id="local-6989586621680105242"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680105242"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621680105241"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105241"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680105240"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105240"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; I v -&gt; O v -&gt; ShiftLR v x
forall v x. Int -&gt; I v -&gt; O v -&gt; ShiftLR v x
</span><a href="NITTA.Intermediate.Functions.html#ShiftR"><span class="hs-identifier hs-var">ShiftR</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680105242"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105243"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105241"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; O v -&gt; O v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105243"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105240"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-391"></span><span id="local-6989586621680105238"><span id="local-6989586621680105239"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105239"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Locks"><span class="hs-identifier hs-type">Locks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftLR"><span class="hs-identifier hs-type">ShiftLR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105239"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105238"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105239"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-392"></span><span>    </span><span id="local-6989586621680105235"><span class="annot"><span class="annottext">locks :: ShiftLR v x -&gt; [Lock v]
</span><a href="#local-6989586621680105235"><span class="hs-identifier hs-var hs-var hs-var hs-var">locks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShiftLR v x -&gt; [Lock v]
forall f v. Function f v =&gt; f -&gt; [Lock v]
</span><a href="NITTA.Intermediate.Types.html#inputsLockOutputs"><span class="hs-identifier hs-var">inputsLockOutputs</span></a></span></span></span><span>
</span><span id="line-393"></span><span id="local-6989586621680105233"><span id="local-6989586621680105234"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105234"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">B.Bits</span></span><span> </span><span class="annot"><a href="#local-6989586621680105233"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#FunctionSimulation"><span class="hs-identifier hs-type">FunctionSimulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftLR"><span class="hs-identifier hs-type">ShiftLR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105234"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105233"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105234"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105233"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-394"></span><span>    </span><span id="local-6989586621680105231"><span class="annot"><span class="annottext">simulate :: CycleCntx v x -&gt; ShiftLR v x -&gt; [(v, x)]
</span><a href="#local-6989586621680105231"><span class="hs-identifier hs-var hs-var hs-var hs-var">simulate</span></a></span></span><span> </span><span id="local-6989586621680105230"><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680105230"><span class="hs-identifier hs-var">cntx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftL"><span class="hs-identifier hs-type">ShiftL</span></a></span><span> </span><span id="local-6989586621680105229"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680105229"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span id="local-6989586621680105228"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105228"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span id="local-6989586621680105227"><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680105227"><span class="hs-identifier hs-var">os</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-395"></span><span>        </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105226"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CycleCntx v x -&gt; v -&gt; x
forall a p.
(Eq a, Hashable a, ToString a) =&gt;
CycleCntx a p -&gt; a -&gt; p
</span><a href="NITTA.Intermediate.Types.html#getCntx"><span class="hs-identifier hs-var">getCntx</span></a></span><span> </span><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680105230"><span class="hs-identifier hs-var">cntx</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105228"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; Int -&gt; x
forall a. Bits a =&gt; a -&gt; Int -&gt; a
</span><span class="hs-operator hs-var">`B.shiftL`</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680105229"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680105226"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105226"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; [v]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680105227"><span class="hs-identifier hs-var">os</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-396"></span><span>    </span><span class="annot"><a href="NITTA.Intermediate.Types.html#simulate"><span class="hs-identifier hs-var">simulate</span></a></span><span> </span><span id="local-6989586621680105224"><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680105224"><span class="hs-identifier hs-var">cntx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#ShiftR"><span class="hs-identifier hs-type">ShiftR</span></a></span><span> </span><span id="local-6989586621680105223"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680105223"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span id="local-6989586621680105222"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105222"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span id="local-6989586621680105221"><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680105221"><span class="hs-identifier hs-var">os</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-397"></span><span>        </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105220"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CycleCntx v x -&gt; v -&gt; x
forall a p.
(Eq a, Hashable a, ToString a) =&gt;
CycleCntx a p -&gt; a -&gt; p
</span><a href="NITTA.Intermediate.Types.html#getCntx"><span class="hs-identifier hs-var">getCntx</span></a></span><span> </span><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680105224"><span class="hs-identifier hs-var">cntx</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105222"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; Int -&gt; x
forall a. Bits a =&gt; a -&gt; Int -&gt; a
</span><span class="hs-operator hs-var">`B.shiftR`</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680105223"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680105220"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105220"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; [v]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680105221"><span class="hs-identifier hs-var">os</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-398"></span><span>
</span><span id="line-399"></span><span class="hs-keyword">newtype</span><span> </span><span id="Send"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier hs-var">Send</span></a></span></span><span> </span><span id="local-6989586621680105987"><span class="annot"><a href="#local-6989586621680105987"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621680105986"><span class="annot"><a href="#local-6989586621680105986"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Send"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier hs-var">Send</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105987"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680105214"><span id="local-6989586621680105216"><span class="annot"><span class="annottext">Send v x -&gt; Send v x -&gt; Bool
(Send v x -&gt; Send v x -&gt; Bool)
-&gt; (Send v x -&gt; Send v x -&gt; Bool) -&gt; Eq (Send v x)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall v x. Eq v =&gt; Send v x -&gt; Send v x -&gt; Bool
/= :: Send v x -&gt; Send v x -&gt; Bool
$c/= :: forall v x. Eq v =&gt; Send v x -&gt; Send v x -&gt; Bool
== :: Send v x -&gt; Send v x -&gt; Bool
$c== :: forall v x. Eq v =&gt; Send v x -&gt; Send v x -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-400"></span><span id="local-6989586621680105212"><span id="local-6989586621680105213"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680105207"><span id="local-6989586621680105210"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105213"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier hs-type">Send</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105213"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105212"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-401"></span><span>    </span><span id="local-6989586621680105206"><span class="annot"><span class="annottext">show :: Send v x -&gt; String
</span><a href="#local-6989586621680105206"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier hs-type">Send</span></a></span><span> </span><span id="local-6989586621680105205"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105205"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;send(&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105205"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;)&quot;</span></span></span></span><span>
</span><span id="line-402"></span><span id="local-6989586621680105203"><span id="local-6989586621680105204"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier hs-type">Send</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105204"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105203"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680105201"><span class="annot"><span class="annottext">label :: Send v x -&gt; String
</span><a href="#local-6989586621680105201"><span class="hs-keyword hs-var hs-var hs-var hs-var">label</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier hs-type">Send</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;send&quot;</span></span></span></span><span>
</span><span id="line-403"></span><span id="local-6989586621680105199"><span id="local-6989586621680105200"><span class="annot"><a href="NITTA.Intermediate.Functions.html#send"><span class="hs-identifier hs-type">send</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105200"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Value.html#Val"><span class="hs-identifier hs-type">Val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105199"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680105200"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#F"><span class="hs-identifier hs-type">F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105200"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105199"><span class="hs-identifier hs-type">x</span></a></span></span></span><span>
</span><span id="line-404"></span><span id="send"><span class="annot"><span class="annottext">send :: v -&gt; F v x
</span><a href="NITTA.Intermediate.Functions.html#send"><span class="hs-identifier hs-var hs-var">send</span></a></span></span><span> </span><span id="local-6989586621680105198"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105198"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Send v x -&gt; F v x
forall f v x.
(Function f v, Patch f (v, v), Locks f v, Show f, Label f,
 FunctionSimulation f v x, Typeable f, Eq f) =&gt;
f -&gt; F v x
</span><a href="NITTA.Intermediate.Types.html#packF"><span class="hs-identifier hs-var">packF</span></a></span><span> </span><span class="annot"><span class="annottext">(Send v x -&gt; F v x) -&gt; Send v x -&gt; F v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; Send v x
forall v x. I v -&gt; Send v x
</span><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier hs-var">Send</span></a></span><span> </span><span class="annot"><span class="annottext">(I v -&gt; Send v x) -&gt; I v -&gt; Send v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">v -&gt; I v
forall v. v -&gt; I v
</span><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-var">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105198"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-405"></span><span id="local-6989586621680105196"><span id="local-6989586621680105197"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680105191"><span id="local-6989586621680105193"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105197"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier hs-type">Send</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105197"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105196"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105197"><span class="hs-identifier hs-type">v</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-406"></span><span>    </span><span id="local-6989586621680105190"><span class="annot"><span class="annottext">inputs :: Send v x -&gt; Set v
</span><a href="#local-6989586621680105190"><span class="hs-identifier hs-var hs-var hs-var hs-var">inputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier hs-type">Send</span></a></span><span> </span><span id="local-6989586621680105189"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105189"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105189"><span class="hs-identifier hs-var">i</span></a></span></span></span><span>
</span><span id="line-407"></span><span id="local-6989586621680105187"><span id="local-6989586621680105188"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105188"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier hs-type">Send</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105188"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105187"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680105188"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680105188"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-408"></span><span>    </span><span id="local-6989586621680105185"><span class="annot"><span class="annottext">patch :: (v, v) -&gt; Send v x -&gt; Send v x
</span><a href="#local-6989586621680105185"><span class="hs-identifier hs-var hs-var hs-var hs-var">patch</span></a></span></span><span> </span><span id="local-6989586621680105184"><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105184"><span class="hs-identifier hs-var">diff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier hs-type">Send</span></a></span><span> </span><span id="local-6989586621680105183"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105183"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; Send v x
forall v x. I v -&gt; Send v x
</span><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier hs-var">Send</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105184"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105183"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-409"></span><span id="local-6989586621680105181"><span id="local-6989586621680105182"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105182"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Locks"><span class="hs-identifier hs-type">Locks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier hs-type">Send</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105182"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105181"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105182"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680105178"><span class="annot"><span class="annottext">locks :: Send v x -&gt; [Lock v]
</span><a href="#local-6989586621680105178"><span class="hs-identifier hs-var hs-var hs-var hs-var">locks</span></a></span></span><span> </span><span class="annot"><span class="annottext">Send v x
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span></span></span><span>
</span><span id="line-410"></span><span id="local-6989586621680105176"><span id="local-6989586621680105177"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#FunctionSimulation"><span class="hs-identifier hs-type">FunctionSimulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier hs-type">Send</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105177"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105176"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105177"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105176"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-411"></span><span>    </span><span id="local-6989586621680105174"><span class="annot"><span class="annottext">simulate :: CycleCntx v x -&gt; Send v x -&gt; [(v, x)]
</span><a href="#local-6989586621680105174"><span class="hs-identifier hs-var hs-var hs-var hs-var">simulate</span></a></span></span><span> </span><span id="local-6989586621680105173"><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680105173"><span class="hs-identifier hs-var">_cntx</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Send"><span class="hs-identifier hs-type">Send</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span></span></span><span>
</span><span id="line-412"></span><span>
</span><span id="line-413"></span><span class="hs-keyword">newtype</span><span> </span><span id="Receive"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier hs-var">Receive</span></a></span></span><span> </span><span id="local-6989586621680105968"><span class="annot"><a href="#local-6989586621680105968"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621680105967"><span class="annot"><a href="#local-6989586621680105967"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Receive"><span class="annot"><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier hs-var">Receive</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105968"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680105168"><span id="local-6989586621680105170"><span class="annot"><span class="annottext">Receive v x -&gt; Receive v x -&gt; Bool
(Receive v x -&gt; Receive v x -&gt; Bool)
-&gt; (Receive v x -&gt; Receive v x -&gt; Bool) -&gt; Eq (Receive v x)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall v x. Eq v =&gt; Receive v x -&gt; Receive v x -&gt; Bool
/= :: Receive v x -&gt; Receive v x -&gt; Bool
$c/= :: forall v x. Eq v =&gt; Receive v x -&gt; Receive v x -&gt; Bool
== :: Receive v x -&gt; Receive v x -&gt; Bool
$c== :: forall v x. Eq v =&gt; Receive v x -&gt; Receive v x -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-414"></span><span id="local-6989586621680105166"><span id="local-6989586621680105167"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680105161"><span id="local-6989586621680105164"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105167"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier hs-type">Receive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105167"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105166"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-415"></span><span>    </span><span id="local-6989586621680105160"><span class="annot"><span class="annottext">show :: Receive v x -&gt; String
</span><a href="#local-6989586621680105160"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier hs-type">Receive</span></a></span><span> </span><span id="local-6989586621680105159"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105159"><span class="hs-identifier hs-var">os</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;receive() = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">O v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105159"><span class="hs-identifier hs-var">os</span></a></span></span></span><span>
</span><span id="line-416"></span><span id="local-6989586621680105157"><span id="local-6989586621680105158"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier hs-type">Receive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105158"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105157"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680105155"><span class="annot"><span class="annottext">label :: Receive v x -&gt; String
</span><a href="#local-6989586621680105155"><span class="hs-keyword hs-var hs-var hs-var hs-var">label</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier hs-type">Receive</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;receive&quot;</span></span></span></span><span>
</span><span id="line-417"></span><span id="local-6989586621680105153"><span id="local-6989586621680105154"><span class="annot"><a href="NITTA.Intermediate.Functions.html#receive"><span class="hs-identifier hs-type">receive</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105154"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Value.html#Val"><span class="hs-identifier hs-type">Val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105153"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680105154"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#F"><span class="hs-identifier hs-type">F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105154"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105153"><span class="hs-identifier hs-type">x</span></a></span></span></span><span>
</span><span id="line-418"></span><span id="receive"><span class="annot"><span class="annottext">receive :: [v] -&gt; F v x
</span><a href="NITTA.Intermediate.Functions.html#receive"><span class="hs-identifier hs-var hs-var">receive</span></a></span></span><span> </span><span id="local-6989586621680105152"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680105152"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Receive v x -&gt; F v x
forall f v x.
(Function f v, Patch f (v, v), Locks f v, Show f, Label f,
 FunctionSimulation f v x, Typeable f, Eq f) =&gt;
f -&gt; F v x
</span><a href="NITTA.Intermediate.Types.html#packF"><span class="hs-identifier hs-var">packF</span></a></span><span> </span><span class="annot"><span class="annottext">(Receive v x -&gt; F v x) -&gt; Receive v x -&gt; F v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">O v -&gt; Receive v x
forall v x. O v -&gt; Receive v x
</span><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier hs-var">Receive</span></a></span><span> </span><span class="annot"><span class="annottext">(O v -&gt; Receive v x) -&gt; O v -&gt; Receive v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; O v
forall v. Set v -&gt; O v
</span><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-var">O</span></a></span><span> </span><span class="annot"><span class="annottext">(Set v -&gt; O v) -&gt; Set v -&gt; O v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Set v
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680105152"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-419"></span><span id="local-6989586621680105150"><span id="local-6989586621680105151"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680105145"><span id="local-6989586621680105148"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105151"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier hs-type">Receive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105151"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105150"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105151"><span class="hs-identifier hs-type">v</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-420"></span><span>    </span><span id="local-6989586621680105144"><span class="annot"><span class="annottext">outputs :: Receive v x -&gt; Set v
</span><a href="#local-6989586621680105144"><span class="hs-identifier hs-var hs-var hs-var hs-var">outputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier hs-type">Receive</span></a></span><span> </span><span id="local-6989586621680105143"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105143"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105143"><span class="hs-identifier hs-var">o</span></a></span></span></span><span>
</span><span id="line-421"></span><span id="local-6989586621680105141"><span id="local-6989586621680105142"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105142"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier hs-type">Receive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105142"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105141"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680105142"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680105142"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-422"></span><span>    </span><span id="local-6989586621680105139"><span class="annot"><span class="annottext">patch :: (v, v) -&gt; Receive v x -&gt; Receive v x
</span><a href="#local-6989586621680105139"><span class="hs-identifier hs-var hs-var hs-var hs-var">patch</span></a></span></span><span> </span><span id="local-6989586621680105138"><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105138"><span class="hs-identifier hs-var">diff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier hs-type">Receive</span></a></span><span> </span><span id="local-6989586621680105137"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105137"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; Receive v x
forall v x. O v -&gt; Receive v x
</span><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier hs-var">Receive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; O v -&gt; O v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105138"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105137"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-423"></span><span id="local-6989586621680105135"><span id="local-6989586621680105136"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105136"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Locks"><span class="hs-identifier hs-type">Locks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier hs-type">Receive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105136"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105135"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105136"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680105132"><span class="annot"><span class="annottext">locks :: Receive v x -&gt; [Lock v]
</span><a href="#local-6989586621680105132"><span class="hs-identifier hs-var hs-var hs-var hs-var">locks</span></a></span></span><span> </span><span class="annot"><span class="annottext">Receive v x
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span></span></span><span>
</span><span id="line-424"></span><span id="local-6989586621680105130"><span id="local-6989586621680105131"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105131"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Value.html#Val"><span class="hs-identifier hs-type">Val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105130"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#FunctionSimulation"><span class="hs-identifier hs-type">FunctionSimulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier hs-type">Receive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105131"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105130"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105131"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105130"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-425"></span><span>    </span><span id="local-6989586621680105128"><span class="annot"><span class="annottext">simulate :: CycleCntx v x -&gt; Receive v x -&gt; [(v, x)]
</span><a href="#local-6989586621680105128"><span class="hs-identifier hs-var hs-var hs-var hs-var">simulate</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#CycleCntx"><span class="hs-identifier hs-type">CycleCntx</span></a></span><span class="hs-special">{</span><span id="local-6989586621680105127"><span class="annot"><span class="annottext">HashMap v x
cycleCntx :: HashMap v x
cycleCntx :: forall v x. CycleCntx v x -&gt; HashMap v x
</span><a href="#local-6989586621680105127"><span class="hs-identifier hs-var hs-var">cycleCntx</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#Receive"><span class="hs-identifier hs-type">Receive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span id="local-6989586621680105126"><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680105126"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-426"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; v
forall c. Set c -&gt; c
</span><a href="NITTA.Utils.Base.html#oneOf"><span class="hs-identifier hs-var">oneOf</span></a></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680105126"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">v -&gt; HashMap v x -&gt; Maybe x
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-operator hs-var">`HM.lookup`</span></span><span> </span><span class="annot"><span class="annottext">HashMap v x
</span><a href="#local-6989586621680105127"><span class="hs-identifier hs-var">cycleCntx</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-427"></span><span>            </span><span class="hs-comment">-- if output variables are defined - nothing to do (values thrown on upper level)</span><span>
</span><span id="line-428"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">x
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-429"></span><span>            </span><span class="hs-comment">-- if output variables are not defined - set initial value</span><span>
</span><span id="line-430"></span><span>            </span><span class="annot"><span class="annottext">Maybe x
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105125"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">x
forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680105125"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105125"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; [v]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680105126"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-431"></span><span>
</span><span id="line-432"></span><span class="hs-comment">-- |Special function for negative tests only.</span><span>
</span><span id="line-433"></span><span class="hs-keyword">data</span><span> </span><span id="BrokenBuffer"><span class="annot"><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-var">BrokenBuffer</span></a></span></span><span> </span><span id="local-6989586621680105946"><span class="annot"><a href="#local-6989586621680105946"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621680105945"><span class="annot"><a href="#local-6989586621680105945"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="BrokenBuffer"><span class="annot"><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-var">BrokenBuffer</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105946"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105946"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680105119"><span id="local-6989586621680105121"><span class="annot"><span class="annottext">BrokenBuffer v x -&gt; BrokenBuffer v x -&gt; Bool
(BrokenBuffer v x -&gt; BrokenBuffer v x -&gt; Bool)
-&gt; (BrokenBuffer v x -&gt; BrokenBuffer v x -&gt; Bool)
-&gt; Eq (BrokenBuffer v x)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall v x. Eq v =&gt; BrokenBuffer v x -&gt; BrokenBuffer v x -&gt; Bool
/= :: BrokenBuffer v x -&gt; BrokenBuffer v x -&gt; Bool
$c/= :: forall v x. Eq v =&gt; BrokenBuffer v x -&gt; BrokenBuffer v x -&gt; Bool
== :: BrokenBuffer v x -&gt; BrokenBuffer v x -&gt; Bool
$c== :: forall v x. Eq v =&gt; BrokenBuffer v x -&gt; BrokenBuffer v x -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-434"></span><span>
</span><span id="line-435"></span><span id="local-6989586621680105117"><span id="local-6989586621680105118"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-type">BrokenBuffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105118"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105117"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680105115"><span class="annot"><span class="annottext">label :: BrokenBuffer v x -&gt; String
</span><a href="#local-6989586621680105115"><span class="hs-keyword hs-var hs-var hs-var hs-var">label</span></a></span></span><span> </span><span class="annot"><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-type">BrokenBuffer</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;broken&quot;</span></span></span></span><span>
</span><span id="line-436"></span><span id="local-6989586621680105113"><span id="local-6989586621680105114"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680105108"><span id="local-6989586621680105111"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105114"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-type">BrokenBuffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105114"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105113"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-437"></span><span>    </span><span id="local-6989586621680105107"><span class="annot"><span class="annottext">show :: BrokenBuffer v x -&gt; String
</span><a href="#local-6989586621680105107"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-type">BrokenBuffer</span></a></span><span> </span><span id="local-6989586621680105106"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105106"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680105105"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105105"><span class="hs-identifier hs-var">os</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;brokenBuffer(&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105106"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;)&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">O v -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105105"><span class="hs-identifier hs-var">os</span></a></span></span></span><span>
</span><span id="line-438"></span><span id="local-6989586621680105103"><span id="local-6989586621680105104"><span class="annot"><a href="NITTA.Intermediate.Functions.html#brokenBuffer"><span class="hs-identifier hs-type">brokenBuffer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105104"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Value.html#Val"><span class="hs-identifier hs-type">Val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105103"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680105104"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680105104"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#F"><span class="hs-identifier hs-type">F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105104"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105103"><span class="hs-identifier hs-type">x</span></a></span></span></span><span>
</span><span id="line-439"></span><span id="brokenBuffer"><span class="annot"><span class="annottext">brokenBuffer :: v -&gt; [v] -&gt; F v x
</span><a href="NITTA.Intermediate.Functions.html#brokenBuffer"><span class="hs-identifier hs-var hs-var">brokenBuffer</span></a></span></span><span> </span><span id="local-6989586621680105102"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105102"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680105101"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680105101"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BrokenBuffer v x -&gt; F v x
forall f v x.
(Function f v, Patch f (v, v), Locks f v, Show f, Label f,
 FunctionSimulation f v x, Typeable f, Eq f) =&gt;
f -&gt; F v x
</span><a href="NITTA.Intermediate.Types.html#packF"><span class="hs-identifier hs-var">packF</span></a></span><span> </span><span class="annot"><span class="annottext">(BrokenBuffer v x -&gt; F v x) -&gt; BrokenBuffer v x -&gt; F v x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">I v -&gt; O v -&gt; BrokenBuffer v x
forall v x. I v -&gt; O v -&gt; BrokenBuffer v x
</span><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-var">BrokenBuffer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; I v
forall v. v -&gt; I v
</span><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-var">I</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105102"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set v -&gt; O v
forall v. Set v -&gt; O v
</span><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-var">O</span></a></span><span> </span><span class="annot"><span class="annottext">(Set v -&gt; O v) -&gt; Set v -&gt; O v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Set v
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621680105101"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-440"></span><span>
</span><span id="line-441"></span><span id="local-6989586621680105099"><span id="local-6989586621680105100"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680105095"><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105100"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-type">BrokenBuffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105100"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105099"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105100"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-442"></span><span>    </span><span id="local-6989586621680105094"><span class="annot"><span class="annottext">inputs :: BrokenBuffer v x -&gt; Set v
</span><a href="#local-6989586621680105094"><span class="hs-identifier hs-var hs-var hs-var hs-var">inputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-type">BrokenBuffer</span></a></span><span> </span><span id="local-6989586621680105093"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105093"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680105092"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105092"><span class="hs-identifier hs-var">_b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105093"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-443"></span><span>    </span><span id="local-6989586621680105091"><span class="annot"><span class="annottext">outputs :: BrokenBuffer v x -&gt; Set v
</span><a href="#local-6989586621680105091"><span class="hs-identifier hs-var hs-var hs-var hs-var">outputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-type">BrokenBuffer</span></a></span><span> </span><span id="local-6989586621680105090"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105090"><span class="hs-identifier hs-var">_a</span></a></span></span><span> </span><span id="local-6989586621680105089"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105089"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O v -&gt; Set v
forall a v. Variables a v =&gt; a -&gt; Set v
</span><a href="NITTA.Intermediate.Variable.html#variables"><span class="hs-identifier hs-var">variables</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105089"><span class="hs-identifier hs-var">b</span></a></span></span></span><span>
</span><span id="line-444"></span><span id="local-6989586621680105087"><span id="local-6989586621680105088"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105088"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-type">BrokenBuffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105088"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105087"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680105088"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680105088"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-445"></span><span>    </span><span id="local-6989586621680105085"><span class="annot"><span class="annottext">patch :: (v, v) -&gt; BrokenBuffer v x -&gt; BrokenBuffer v x
</span><a href="#local-6989586621680105085"><span class="hs-identifier hs-var hs-var hs-var hs-var">patch</span></a></span></span><span> </span><span id="local-6989586621680105084"><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105084"><span class="hs-identifier hs-var">diff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-type">BrokenBuffer</span></a></span><span> </span><span id="local-6989586621680105083"><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105083"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680105082"><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105082"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">I v -&gt; O v -&gt; BrokenBuffer v x
forall v x. I v -&gt; O v -&gt; BrokenBuffer v x
</span><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-var">BrokenBuffer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; I v -&gt; I v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105084"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">I v
</span><a href="#local-6989586621680105083"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, v) -&gt; O v -&gt; O v
forall f diff. Patch f diff =&gt; diff -&gt; f -&gt; f
</span><a href="NITTA.Intermediate.Types.html#patch"><span class="hs-identifier hs-var">patch</span></a></span><span> </span><span class="annot"><span class="annottext">(v, v)
</span><a href="#local-6989586621680105084"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">O v
</span><a href="#local-6989586621680105082"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-446"></span><span id="local-6989586621680105080"><span id="local-6989586621680105081"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105081"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#Locks"><span class="hs-identifier hs-type">Locks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-type">BrokenBuffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105081"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105080"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105081"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-447"></span><span>    </span><span id="local-6989586621680105077"><span class="annot"><span class="annottext">locks :: BrokenBuffer v x -&gt; [Lock v]
</span><a href="#local-6989586621680105077"><span class="hs-identifier hs-var hs-var hs-var hs-var">locks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BrokenBuffer v x -&gt; [Lock v]
forall f v. Function f v =&gt; f -&gt; [Lock v]
</span><a href="NITTA.Intermediate.Types.html#inputsLockOutputs"><span class="hs-identifier hs-var">inputsLockOutputs</span></a></span></span></span><span>
</span><span id="line-448"></span><span id="local-6989586621680105075"><span id="local-6989586621680105076"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Variable.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105076"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="NITTA.Intermediate.Types.html#FunctionSimulation"><span class="hs-identifier hs-type">FunctionSimulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-type">BrokenBuffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105076"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105075"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680105076"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680105075"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-449"></span><span>    </span><span id="local-6989586621680105073"><span class="annot"><span class="annottext">simulate :: CycleCntx v x -&gt; BrokenBuffer v x -&gt; [(v, x)]
</span><a href="#local-6989586621680105073"><span class="hs-identifier hs-var hs-var hs-var hs-var">simulate</span></a></span></span><span> </span><span id="local-6989586621680105072"><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680105072"><span class="hs-identifier hs-var">cntx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Functions.html#BrokenBuffer"><span class="hs-identifier hs-type">BrokenBuffer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span id="local-6989586621680105071"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105071"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="NITTA.Intermediate.Types.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span id="local-6989586621680105070"><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680105070"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105069"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CycleCntx v x
</span><a href="#local-6989586621680105072"><span class="hs-identifier hs-var">cntx</span></a></span><span> </span><span class="annot"><span class="annottext">CycleCntx v x -&gt; v -&gt; x
forall a p.
(Eq a, Hashable a, ToString a) =&gt;
CycleCntx a p -&gt; a -&gt; p
</span><a href="NITTA.Intermediate.Types.html#getCntx"><span class="hs-operator hs-var">`getCntx`</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105071"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680105069"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680105069"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; [v]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621680105070"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-450"></span></pre></body></html>